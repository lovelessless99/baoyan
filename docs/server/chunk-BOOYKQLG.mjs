import './polyfills.server.mjs';
import{a as s2,b as yi,j as o2,m as bi,q as wi,r as Y3}from"./chunk-KKV3LNAD.mjs";import{$ as p,$a as N3,A as O1,Ab as dt,B as ai,Bb as j3,Ca as X4,Cb as $e,Cc as _i,Da as K4,Db as ie,E as $4,Ea as Q4,Eb as Ge,F as G4,Fb as Oe,Fc as zi,H as T1,Hb as a1,I as Y4,Ib as J4,Ic as jt,Jb as Ne,Kb as Fe,Lb as k1,Mb as U3,N as li,Nb as W3,Nc as n2,P as L1,Q as k3,R as x,Ra as fi,S as hi,Sc as we,T as ui,Tb as Pe,Tc as O,Ub as be,Uc as z,V as B3,Vc as Me,W as S,Wa as ve,Wc as D,X as R,Xa as g,Xc as $3,Yc as G3,Z as X,Za as Ae,_b as Pt,a as p1,aa as V,ab as ht,bb as xe,c as q4,cb as ut,cc as pi,da as ye,ea as N,eb as Z4,ec as gi,f as y,fa as U,fb as r1,g as We,gb as me,ha as R3,jb as le,ka as di,kb as vi,kc as e2,l as g1,lb as mi,lc as je,m as Ze,na as K,nb as se,oa as D1,ob as A1,pa as I1,pb as Q,q as He,qb as ke,qc as L,r as Bt,ra as Nt,rc as t2,s as oi,sc as i2,ta as Ft,tc as l1,v as ci,va as G,vb as Be,vc as q3,w as ri,wa as fe,wb as Re,xb as qe,y as Rt,ya as B,yb as F3,yc as oe,z as Ie,zb as P3}from"./chunk-ZI3E4MPX.mjs";import{a as j,b as ne,c as k,e as T,g as F7,h as de}from"./chunk-5XUXGTUW.mjs";var n1=T((Z6,qo)=>{"use strict";var D2=k("buffer"),i1=D2.Buffer;function Wo(i,t){for(var e in i)t[e]=i[e]}i1.from&&i1.alloc&&i1.allocUnsafe&&i1.allocUnsafeSlow?qo.exports=D2:(Wo(D2,Z6),Z6.Buffer=X1);function X1(i,t,e){return i1(i,t,e)}X1.prototype=Object.create(i1.prototype);Wo(i1,X1);X1.from=function(i,t,e){if(typeof i=="number")throw new TypeError("Argument must not be a number");return i1(i,t,e)};X1.alloc=function(i,t,e){if(typeof i!="number")throw new TypeError("Argument must be a number");var n=i1(i);return t!==void 0?typeof e=="string"?n.fill(t,e):n.fill(t):n.fill(0),n};X1.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return i1(i)};X1.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return D2.SlowBuffer(i)}});var Yo=T(J6=>{"use strict";var $o=k("stream").Stream,Go=k("util"),K1=function(i){this.readable=this.writable=!0,this._paused=!1,this._driver=i};Go.inherits(K1,$o);K1.prototype.pause=function(){this._paused=!0,this._driver.messages._paused=!0};K1.prototype.resume=function(){this._paused=!1,this.emit("drain");var i=this._driver.messages;i._paused=!1,i.emit("drain")};K1.prototype.write=function(i){return this.writable?(this._driver.parse(i),!this._paused):!1};K1.prototype.end=function(i){if(this.writable){i!==void 0&&this.write(i),this.writable=!1;var t=this._driver.messages;t.readable&&(t.readable=t.writable=!1,t.emit("end"))}};K1.prototype.destroy=function(){this.end()};var Q1=function(i){this.readable=this.writable=!0,this._paused=!1,this._driver=i};Go.inherits(Q1,$o);Q1.prototype.pause=function(){this._driver.io._paused=!0};Q1.prototype.resume=function(){this._driver.io._paused=!1,this._driver.io.emit("drain")};Q1.prototype.write=function(i){return this.writable?(typeof i=="string"?this._driver.text(i):this._driver.binary(i),!this._paused):!1};Q1.prototype.end=function(i){i!==void 0&&this.write(i)};Q1.prototype.destroy=function(){};J6.IO=K1;J6.Messages=Q1});var I2=T((Cz,Xo)=>{"use strict";var pt=function(){this.clear()};pt.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"];pt.prototype.clear=function(){this._sent={},this._lines=[]};pt.prototype.set=function(i,t){if(t!==void 0){i=this._strip(i),t=this._strip(t);var e=i.toLowerCase();(!this._sent.hasOwnProperty(e)||this.ALLOWED_DUPLICATES.indexOf(e)>=0)&&(this._sent[e]=!0,this._lines.push(i+": "+t+`\r
`))}};pt.prototype.toString=function(){return this._lines.join("")};pt.prototype._strip=function(i){return i.toString().replace(/^ */,"").replace(/ *$/,"")};Xo.exports=pt});var Qo=T((Ez,Ko)=>{"use strict";var A2=n1().Buffer,k2=function(){this._queue=[],this._queueSize=0,this._offset=0};k2.prototype.put=function(i){!i||i.length===0||(A2.isBuffer(i)||(i=A2.from(i)),this._queue.push(i),this._queueSize+=i.length)};k2.prototype.read=function(i){if(i>this._queueSize)return null;if(i===0)return A2.alloc(0);this._queueSize-=i;var t=this._queue,e=i,n=t[0],s,o;if(n.length>=i)return n.length===i?t.shift():(o=n.slice(0,i),t[0]=n.slice(i),o);for(var c=0,r=t.length;c<r&&!(e<t[c].length);c++)e-=t[c].length;return s=t.splice(0,c),e>0&&t.length>0&&(s.push(t[0].slice(0,e)),t[0]=t[0].slice(e)),A2.concat(s,i)};k2.prototype.eachByte=function(i,t){for(var e,n,s;this._queue.length>0;){for(e=this._queue[0],n=e.length;this._offset<n;)s=this._offset,this._offset+=1,i.call(t,e[s]);this._offset=0,this._queue.shift()}};Ko.exports=k2});var M1=T((Sz,nc)=>{"use strict";var Zo=n1().Buffer,tc=k("events").EventEmitter,vh=k("util"),Jo=Yo(),ic=I2(),mh=Qo(),ge=function(i,t,e){tc.call(this),ge.validateOptions(e||{},["maxLength","masking","requireMasking","protocols"]),this._request=i,this._reader=new mh,this._options=e||{},this._maxLength=this._options.maxLength||this.MAX_LENGTH,this._headers=new ic,this.__queue=[],this.readyState=0,this.url=t,this.io=new Jo.IO(this),this.messages=new Jo.Messages(this),this._bindEventListeners()};vh.inherits(ge,tc);ge.isWebSocket=function(i){var t=i.headers.connection||"",e=i.headers.upgrade||"";return i.method==="GET"&&t.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&e.toLowerCase()==="websocket"};ge.validateOptions=function(i,t){for(var e in i)if(t.indexOf(e)<0)throw new Error("Unrecognized option: "+e)};var ec={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var i=this;this.messages.on("error",function(){}),this.on("message",function(t){var e=i.messages;e.readable&&e.emit("data",t.data)}),this.on("error",function(t){var e=i.messages;e.readable&&e.emit("error",t)}),this.on("close",function(){var t=i.messages;t.readable&&(t.readable=t.writable=!1,t.emit("end"))})},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(i){return!1},setHeader:function(i,t){return this.readyState>0?!1:(this._headers.set(i,t),!0)},start:function(){if(this.readyState!==0)return!1;if(!ge.isWebSocket(this._request))return this._failHandshake(new Error("Not a WebSocket request"));var i;try{i=this._handshakeResponse()}catch(t){return this._failHandshake(t)}return this._write(i),this._stage!==-1&&this._open(),!0},_failHandshake:function(i){var t=new ic;return t.set("Content-Type","text/plain"),t.set("Content-Length",Zo.byteLength(i.message,"utf8")),t=["HTTP/1.1 400 Bad Request",t.toString(),i.message],this._write(Zo.from(t.join(`\r
`),"utf8")),this._fail("protocol_error",i.message),!1},text:function(i){return this.frame(i)},binary:function(i){return!1},ping:function(){return!1},pong:function(){return!1},close:function(i,t){return this.readyState!==1?!1:(this.readyState=3,this.emit("close",new ge.CloseEvent(null,null)),!0)},_open:function(){this.readyState=1,this.__queue.forEach(function(i){this.frame.apply(this,i)},this),this.__queue=[],this.emit("open",new ge.OpenEvent)},_queue:function(i){return this.__queue.push(i),!0},_write:function(i){var t=this.io;t.readable&&t.emit("data",i)},_fail:function(i,t){this.readyState=2,this.emit("error",new Error(t)),this.close()}};for(e8 in ec)ge.prototype[e8]=ec[e8];var e8;ge.ConnectEvent=function(){};ge.OpenEvent=function(){};ge.CloseEvent=function(i,t){this.code=i,this.reason=t};ge.MessageEvent=function(i){this.data=i};ge.PingEvent=function(i){this.data=i};ge.PongEvent=function(i){this.data=i};nc.exports=ge});var ac=T(s8=>{"use strict";var i8=k("assert");s8.HTTPParser=_;function _(i){i8.ok(i===_.REQUEST||i===_.RESPONSE||i===void 0),i===void 0||this.initialize(i),this.maxHeaderSize=_.maxHeaderSize}_.prototype.initialize=function(i,t){i8.ok(i===_.REQUEST||i===_.RESPONSE),this.type=i,this.state=i+"_LINE",this.info={headers:[],upgrade:!1},this.trailers=[],this.line="",this.isChunked=!1,this.connection="",this.headerSize=0,this.body_bytes=null,this.isUserCall=!1,this.hadError=!1};_.encoding="ascii";_.maxHeaderSize=80*1024;_.REQUEST="REQUEST";_.RESPONSE="RESPONSE";var sc=_.kOnHeaders=1,t8=_.kOnHeadersComplete=2,B2=_.kOnBody=3,n8=_.kOnMessageComplete=4;_.prototype[sc]=_.prototype[t8]=_.prototype[B2]=_.prototype[n8]=function(){};var oc=!0;Object.defineProperty(_,"kOnExecute",{get:function(){return oc=!1,99}});var cc=s8.methods=_.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK","SOURCE"],rc=cc.indexOf("CONNECT");_.prototype.reinitialize=_;_.prototype.close=_.prototype.pause=_.prototype.resume=_.prototype.free=function(){};_.prototype._compatMode0_11=!1;_.prototype.getAsyncId=function(){return 0};var ph={REQUEST_LINE:!0,RESPONSE_LINE:!0,HEADER:!0};_.prototype.execute=function(i,t,e){if(!(this instanceof _))throw new TypeError("not a HTTPParser");t=t||0,e=typeof e=="number"?e:i.length,this.chunk=i,this.offset=t;var n=this.end=t+e;try{for(;this.offset<n&&!this[this.state](););}catch(s){if(this.isUserCall)throw s;return this.hadError=!0,s}return this.chunk=null,e=this.offset-t,ph[this.state]&&(this.headerSize+=e,this.headerSize>(this.maxHeaderSize||_.maxHeaderSize))?new Error("max header size exceeded"):e};var gh={REQUEST_LINE:!0,RESPONSE_LINE:!0,BODY_RAW:!0};_.prototype.finish=function(){if(!this.hadError){if(!gh[this.state])return new Error("invalid state for EOF");this.state==="BODY_RAW"&&this.userCall()(this[n8]())}};_.prototype.consume=_.prototype.unconsume=_.prototype.getCurrentBuffer=function(){};_.prototype.userCall=function(){this.isUserCall=!0;var i=this;return function(t){return i.isUserCall=!1,t}};_.prototype.nextRequest=function(){this.userCall()(this[n8]()),this.reinitialize(this.type)};_.prototype.consumeLine=function(){for(var i=this.end,t=this.chunk,e=this.offset;e<i;e++)if(t[e]===10){var n=this.line+t.toString(_.encoding,this.offset,e);return n.charAt(n.length-1)==="\r"&&(n=n.substr(0,n.length-1)),this.line="",this.offset=e+1,n}this.line+=t.toString(_.encoding,this.offset,this.end),this.offset=this.end};var _h=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/,zh=/^[ \t]+(.*[^ \t])/;_.prototype.parseHeader=function(i,t){if(i.indexOf("\r")!==-1)throw R2("HPE_LF_EXPECTED");var e=_h.exec(i),n=e&&e[1];if(n)t.push(n),t.push(e[2]);else{var s=zh.exec(i);s&&t.length&&(t[t.length-1]&&(t[t.length-1]+=" "),t[t.length-1]+=s[1])}};var yh=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;_.prototype.REQUEST_LINE=function(){var i=this.consumeLine();if(i){var t=yh.exec(i);if(t===null)throw R2("HPE_INVALID_CONSTANT");if(this.info.method=this._compatMode0_11?t[1]:cc.indexOf(t[1]),this.info.method===-1)throw new Error("invalid request method");this.info.url=t[2],this.info.versionMajor=+t[3],this.info.versionMinor=+t[4],this.body_bytes=0,this.state="HEADER"}};var bh=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;_.prototype.RESPONSE_LINE=function(){var i=this.consumeLine();if(i){var t=bh.exec(i);if(t===null)throw R2("HPE_INVALID_CONSTANT");this.info.versionMajor=+t[1],this.info.versionMinor=+t[2];var e=this.info.statusCode=+t[3];this.info.statusMessage=t[4],((e/100|0)===1||e===204||e===304)&&(this.body_bytes=0),this.state="HEADER"}};_.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(this.connection.indexOf("close")!==-1)return!1}else if(this.connection.indexOf("keep-alive")===-1)return!1;return!!(this.body_bytes!==null||this.isChunked)};_.prototype.HEADER=function(){var i=this.consumeLine();if(i!==void 0){var t=this.info;if(i)this.parseHeader(i,t.headers);else{for(var e=t.headers,n=!1,s,o=!1,c=0;c<e.length;c+=2)switch(e[c].toLowerCase()){case"transfer-encoding":this.isChunked=e[c+1].toLowerCase()==="chunked";break;case"content-length":if(s=+e[c+1],n){if(s!==this.body_bytes)throw R2("HPE_UNEXPECTED_CONTENT_LENGTH")}else n=!0,this.body_bytes=s;break;case"connection":this.connection+=e[c+1].toLowerCase();break;case"upgrade":o=!0;break}this.isChunked&&n&&(n=!1,this.body_bytes=null),o&&this.connection.indexOf("upgrade")!=-1?t.upgrade=this.type===_.REQUEST||t.statusCode===101:t.upgrade=t.method===rc,this.isChunked&&t.upgrade&&(this.isChunked=!1),t.shouldKeepAlive=this.shouldKeepAlive();var r;if(oc?r=this.userCall()(this[t8](t)):r=this.userCall()(this[t8](t.versionMajor,t.versionMinor,t.headers,t.method,t.url,t.statusCode,t.statusMessage,t.upgrade,t.shouldKeepAlive)),r===2)return this.nextRequest(),!0;if(this.isChunked&&!r)this.state="BODY_CHUNKHEAD";else{if(r||this.body_bytes===0)return this.nextRequest(),t.upgrade;this.body_bytes===null?this.state="BODY_RAW":this.state="BODY_SIZED"}}}};_.prototype.BODY_CHUNKHEAD=function(){var i=this.consumeLine();i!==void 0&&(this.body_bytes=parseInt(i,16),this.body_bytes?this.state="BODY_CHUNK":this.state="BODY_CHUNKTRAILERS")};_.prototype.BODY_CHUNK=function(){var i=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[B2](this.chunk,this.offset,i)),this.offset+=i,this.body_bytes-=i,this.body_bytes||(this.state="BODY_CHUNKEMPTYLINE")};_.prototype.BODY_CHUNKEMPTYLINE=function(){var i=this.consumeLine();i!==void 0&&(i8.equal(i,""),this.state="BODY_CHUNKHEAD")};_.prototype.BODY_CHUNKTRAILERS=function(){var i=this.consumeLine();i!==void 0&&(i?this.parseHeader(i,this.trailers):(this.trailers.length&&this.userCall()(this[sc](this.trailers,"")),this.nextRequest()))};_.prototype.BODY_RAW=function(){var i=this.end-this.offset;this.userCall()(this[B2](this.chunk,this.offset,i)),this.offset=this.end};_.prototype.BODY_SIZED=function(){var i=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[B2](this.chunk,this.offset,i)),this.offset+=i,this.body_bytes-=i,this.body_bytes||this.nextRequest()};["Headers","HeadersComplete","Body","MessageComplete"].forEach(function(i){var t=_["kOn"+i];Object.defineProperty(_.prototype,"on"+i,{get:function(){return this[t]},set:function(e){return this._compatMode0_11=!0,rc="CONNECT",this[t]=e}})});function R2(i){var t=new Error("Parse Error");return t.code=i,t}});var F2=T((Hz,hc)=>{"use strict";var N2=ac().HTTPParser,wh=n1().Buffer,Mh={request:N2.REQUEST||"request",response:N2.RESPONSE||"response"},_e=function(i){this._type=i,this._parser=new N2(Mh[i]),this._complete=!1,this.headers={};var t=null,e=this;this._parser.onHeaderField=function(n,s,o){t=n.toString("utf8",s,s+o).toLowerCase()},this._parser.onHeaderValue=function(n,s,o){var c=n.toString("utf8",s,s+o);e.headers.hasOwnProperty(t)?e.headers[t]+=", "+c:e.headers[t]=c},this._parser.onHeadersComplete=this._parser[N2.kOnHeadersComplete]=function(n,s,o,c,r,a){var l=arguments[0];if(typeof l=="object"&&(c=l.method,r=l.url,a=l.statusCode,o=l.headers),e.method=typeof c=="number"?_e.METHODS[c]:c,e.statusCode=a,e.url=r,!!o){for(var h=0,u=o.length,d,f;h<u;h+=2)d=o[h].toLowerCase(),f=o[h+1],e.headers.hasOwnProperty(d)?e.headers[d]+=", "+f:e.headers[d]=f;e._complete=!0}}};_e.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"};var lc=process.version?process.version.match(/[0-9]+/g).map(function(i){return parseInt(i,10)}):[];lc[0]===0&&lc[1]===12&&(_e.METHODS[16]="REPORT",_e.METHODS[17]="MKACTIVITY",_e.METHODS[18]="CHECKOUT",_e.METHODS[19]="MERGE",_e.METHODS[20]="M-SEARCH",_e.METHODS[21]="NOTIFY",_e.METHODS[22]="SUBSCRIBE",_e.METHODS[23]="UNSUBSCRIBE",_e.METHODS[24]="PATCH",_e.METHODS[25]="PURGE");_e.prototype.isComplete=function(){return this._complete};_e.prototype.parse=function(i){var t=this._parser.execute(i,0,i.length);if(typeof t!="number"){this.error=t,this._complete=!0;return}this._complete&&(this.body=t<i.length?i.slice(t):wh.alloc(0))};hc.exports=_e});var fc=T((xz,dc)=>{"use strict";var o8=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,Ch=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,Eh=/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"\\])*)"/,c8=new RegExp(o8.source+"(?:=(?:"+o8.source+"|"+Eh.source+"))?"),r8=new RegExp(o8.source+"(?: *; *"+c8.source+")*","g"),Sh=new RegExp("^"+r8.source+"(?: *, *"+r8.source+")*$"),Vh=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/,uc=Object.prototype.hasOwnProperty,Hh={parseHeader:function(i){var t=new s4;if(i===""||i===void 0)return t;if(!Sh.test(i))throw new SyntaxError("Invalid Sec-WebSocket-Extensions header: "+i);var e=i.match(r8);return e.forEach(function(n){var s=n.match(new RegExp(c8.source,"g")),o=s.shift(),c={};s.forEach(function(r){var a=r.match(c8),l=a[1],h;a[2]!==void 0?h=a[2]:a[3]!==void 0?h=a[3].replace(/\\/g,""):h=!0,Vh.test(h)&&(h=parseFloat(h)),uc.call(c,l)?(c[l]=[].concat(c[l]),c[l].push(h)):c[l]=h},this),t.push(o,c)},this),t},serializeParams:function(i,t){var e=[],n=function(o,c){c instanceof Array?c.forEach(function(r){n(o,r)}):c===!0?e.push(o):typeof c=="number"?e.push(o+"="+c):Ch.test(c)?e.push(o+'="'+c.replace(/"/g,'\\"')+'"'):e.push(o+"="+c)};for(var s in t)n(s,t[s]);return[i].concat(e).join("; ")}},s4=function(){this._byName={},this._inOrder=[]};s4.prototype.push=function(i,t){uc.call(this._byName,i)||(this._byName[i]=[]),this._byName[i].push(t),this._inOrder.push({name:i,params:t})};s4.prototype.eachOffer=function(i,t){for(var e=this._inOrder,n=0,s=e.length;n<s;n++)i.call(t,e[n].name,e[n].params)};s4.prototype.byName=function(i){return this._byName[i]||[]};s4.prototype.toArray=function(){return this._inOrder.slice()};dc.exports=Hh});var a8=T((Oz,vc)=>{"use strict";var o4=function(i){this._bufferSize=i,this.clear()};o4.prototype.clear=function(){this._buffer=new Array(this._bufferSize),this._ringOffset=0,this._ringSize=this._bufferSize,this._head=0,this._tail=0,this.length=0};o4.prototype.push=function(i){var t=!1,e=!1;this._ringSize<this._bufferSize?t=this._tail===0:this._ringOffset===this._ringSize&&(t=!0,e=this._tail===0),t&&(this._tail=this._bufferSize,this._buffer=this._buffer.concat(new Array(this._bufferSize)),this._bufferSize=this._buffer.length,e&&(this._ringSize=this._bufferSize)),this._buffer[this._tail]=i,this.length+=1,this._tail<this._ringSize&&(this._ringOffset+=1),this._tail=(this._tail+1)%this._bufferSize};o4.prototype.peek=function(){if(this.length!==0)return this._buffer[this._head]};o4.prototype.shift=function(){if(this.length!==0){var i=this._buffer[this._head];return this._buffer[this._head]=void 0,this.length-=1,this._ringOffset-=1,this._ringOffset===0&&this.length>0?(this._head=this._ringSize,this._ringOffset=this.length,this._ringSize=this._bufferSize):this._head=(this._head+1)%this._ringSize,i}};vc.exports=o4});var pc=T((Tz,mc)=>{"use strict";var xh=a8(),gt=function(i,t){this._session=i,this._method=t,this._queue=new xh(gt.QUEUE_SIZE),this._stopped=!1,this.pending=0};gt.QUEUE_SIZE=8;gt.prototype.call=function(i,t,e,n){if(!this._stopped){var s={error:i,message:t,callback:e,context:n,done:!1},o=!1,c=this;if(this._queue.push(s),s.error)return s.done=!0,this._stop(),this._flushQueue();var r=function(a,l){o^(o=!0)&&(a?(c._stop(),s.error=a,s.message=null):s.message=l,s.done=!0,c._flushQueue())};try{this._session[this._method](t,r)}catch(a){r(a)}}};gt.prototype._stop=function(){this.pending=this._queue.length,this._stopped=!0};gt.prototype._flushQueue=function(){for(var i=this._queue,t;i.length>0&&i.peek().done;)t=i.shift(),t.error?(this.pending=0,i.clear()):this.pending-=1,t.callback.call(t.context,t.error,t.message)};mc.exports=gt});var l8=T((Lz,gc)=>{"use strict";var Oh=a8(),Z1=function(){this._complete=!1,this._callbacks=new Oh(Z1.QUEUE_SIZE)};Z1.QUEUE_SIZE=4;Z1.all=function(i){var t=new Z1,e=i.length,n=e;for(e===0&&t.done();n--;)i[n].then(function(){e-=1,e===0&&t.done()});return t};Z1.prototype.then=function(i){this._complete?i():this._callbacks.push(i)};Z1.prototype.done=function(){this._complete=!0;for(var i=this._callbacks,t;t=i.shift();)t()};gc.exports=Z1});var yc=T((Dz,zc)=>{"use strict";var _c=pc(),Th=l8(),J1=function(i){this._ext=i[0],this._session=i[1],this._functors={incoming:new _c(this._session,"processIncomingMessage"),outgoing:new _c(this._session,"processOutgoingMessage")}};J1.prototype.pending=function(i){var t=this._functors[i];t._stopped||(t.pending+=1)};J1.prototype.incoming=function(i,t,e,n){this._exec("incoming",i,t,e,n)};J1.prototype.outgoing=function(i,t,e,n){this._exec("outgoing",i,t,e,n)};J1.prototype.close=function(){return this._closed=this._closed||new Th,this._doClose(),this._closed};J1.prototype._exec=function(i,t,e,n,s){this._functors[i].call(t,e,function(o,c){o&&(o.message=this._ext.name+": "+o.message),n.call(s,o,c),this._doClose()},this)};J1.prototype._doClose=function(){var i=this._functors.incoming,t=this._functors.outgoing;!this._closed||i.pending+t.pending!==0||(this._session&&this._session.close(),this._session=null,this._closed.done())};zc.exports=J1});var wc=T((Iz,bc)=>{"use strict";var Lh=yc(),Dh=l8(),c4=function(i){this._cells=i.map(function(t){return new Lh(t)}),this._stopped={incoming:!1,outgoing:!1}};c4.prototype.processIncomingMessage=function(i,t,e){this._stopped.incoming||this._loop("incoming",this._cells.length-1,-1,-1,i,t,e)};c4.prototype.processOutgoingMessage=function(i,t,e){this._stopped.outgoing||this._loop("outgoing",0,this._cells.length,1,i,t,e)};c4.prototype.close=function(i,t){this._stopped={incoming:!0,outgoing:!0};var e=this._cells.map(function(n){return n.close()});i&&Dh.all(e).then(function(){i.call(t)})};c4.prototype._loop=function(i,t,e,n,s,o,c){for(var r=this._cells,a=r.length,l=this;a--;)r[a].pending(i);var h=function(u,d,f){if(u===e)return o.call(c,d,f);r[u][i](d,f,function(m,w){m&&(l._stopped[i]=!0),h(u+n,m,w)})};h(t,null,s)};bc.exports=c4});var Sc=T((Az,Ec)=>{"use strict";var r4=fc(),Mc=wc(),P2=function(){this._rsv1=this._rsv2=this._rsv3=null,this._byName={},this._inOrder=[],this._sessions=[],this._index={}};P2.MESSAGE_OPCODES=[1,2];var Cc={add:function(i){if(typeof i.name!="string")throw new TypeError("extension.name must be a string");if(i.type!=="permessage")throw new TypeError('extension.type must be "permessage"');if(typeof i.rsv1!="boolean")throw new TypeError("extension.rsv1 must be true or false");if(typeof i.rsv2!="boolean")throw new TypeError("extension.rsv2 must be true or false");if(typeof i.rsv3!="boolean")throw new TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(i.name))throw new TypeError('An extension with name "'+i.name+'" is already registered');this._byName[i.name]=i,this._inOrder.push(i)},generateOffer:function(){var i=[],t=[],e={};return this._inOrder.forEach(function(n){var s=n.createClientSession();if(s){var o=[n,s];i.push(o),e[n.name]=o;var c=s.generateOffer();c=c?[].concat(c):[],c.forEach(function(r){t.push(r4.serializeParams(n.name,r))},this)}},this),this._sessions=i,this._index=e,t.length>0?t.join(", "):null},activate:function(i){var t=r4.parseHeader(i),e=[];t.eachOffer(function(n,s){var o=this._index[n];if(!o)throw new Error('Server sent an extension response for unknown extension "'+n+'"');var c=o[0],r=o[1],a=this._reserved(c);if(a)throw new Error("Server sent two extension responses that use the RSV"+a[0]+' bit: "'+a[1]+'" and "'+c.name+'"');if(r.activate(s)!==!0)throw new Error("Server sent unacceptable extension parameters: "+r4.serializeParams(n,s));this._reserve(c),e.push(o)},this),this._sessions=e,this._pipeline=new Mc(e)},generateResponse:function(i){var t=[],e=[],n=r4.parseHeader(i);return this._inOrder.forEach(function(s){var o=n.byName(s.name);if(!(o.length===0||this._reserved(s))){var c=s.createServerSession(o);c&&(this._reserve(s),t.push([s,c]),e.push(r4.serializeParams(s.name,c.generateResponse())))}},this),this._sessions=t,this._pipeline=new Mc(t),e.length>0?e.join(", "):null},validFrameRsv:function(i){var t={rsv1:!1,rsv2:!1,rsv3:!1},e;if(P2.MESSAGE_OPCODES.indexOf(i.opcode)>=0)for(var n=0,s=this._sessions.length;n<s;n++)e=this._sessions[n][0],t.rsv1=t.rsv1||e.rsv1,t.rsv2=t.rsv2||e.rsv2,t.rsv3=t.rsv3||e.rsv3;return(t.rsv1||!i.rsv1)&&(t.rsv2||!i.rsv2)&&(t.rsv3||!i.rsv3)},processIncomingMessage:function(i,t,e){this._pipeline.processIncomingMessage(i,t,e)},processOutgoingMessage:function(i,t,e){this._pipeline.processOutgoingMessage(i,t,e)},close:function(i,t){if(!this._pipeline)return i.call(t);this._pipeline.close(i,t)},_reserve:function(i){this._rsv1=this._rsv1||i.rsv1&&i.name,this._rsv2=this._rsv2||i.rsv2&&i.name,this._rsv3=this._rsv3||i.rsv3&&i.name},_reserved:function(i){return this._rsv1&&i.rsv1?[1,this._rsv1]:this._rsv2&&i.rsv2?[2,this._rsv2]:this._rsv3&&i.rsv3?[3,this._rsv3]:!1}};for(h8 in Cc)P2.prototype[h8]=Cc[h8];var h8;Ec.exports=P2});var Oc=T((kz,xc)=>{"use strict";var Hc=function(){},Vc={final:!1,rsv1:!1,rsv2:!1,rsv3:!1,opcode:null,masked:!1,maskingKey:null,lengthBytes:1,length:0,payload:null};for(u8 in Vc)Hc.prototype[u8]=Vc[u8];var u8;xc.exports=Hc});var Ic=T((Bz,Dc)=>{"use strict";var Ih=n1().Buffer,Lc=function(){this.rsv1=!1,this.rsv2=!1,this.rsv3=!1,this.opcode=null,this.length=0,this._chunks=[]},Tc={read:function(){return this.data=this.data||Ih.concat(this._chunks,this.length)},pushFrame:function(i){this.rsv1=this.rsv1||i.rsv1,this.rsv2=this.rsv2||i.rsv2,this.rsv3=this.rsv3||i.rsv3,this.opcode===null&&(this.opcode=i.opcode),this._chunks.push(i.payload),this.length+=i.length}};for(d8 in Tc)Lc.prototype[d8]=Tc[d8];var d8;Dc.exports=Lc});var v8=T((Rz,Nc)=>{"use strict";var a4=n1().Buffer,Rc=k("crypto"),Ah=k("util"),kh=Sc(),et=M1(),Ac=Oc(),kc=Ic(),Le=function(i,t,e){if(et.apply(this,arguments),this._extensions=new kh,this._stage=0,this._masking=this._options.masking,this._protocols=this._options.protocols||[],this._requireMasking=this._options.requireMasking,this._pingCallbacks={},typeof this._protocols=="string"&&(this._protocols=this._protocols.split(/ *, */)),!!this._request){var n=this._request.headers["sec-websocket-protocol"],s=this._protocols;n!==void 0&&(typeof n=="string"&&(n=n.split(/ *, */)),this.protocol=n.filter(function(o){return s.indexOf(o)>=0})[0]),this.version="hybi-"+Le.VERSION}};Ah.inherits(Le,et);Le.VERSION="13";Le.mask=function(i,t,e){if(!t||t.length===0)return i;e=e||0;for(var n=0,s=i.length-e;n<s;n++)i[e+n]=i[e+n]^t[n%4];return i};Le.generateAccept=function(i){var t=Rc.createHash("sha1");return t.update(i+Le.GUID),t.digest("base64")};Le.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var Bc={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(i){return this._extensions.add(i),!0},parse:function(i){this._reader.put(i);for(var t=!0;t;)switch(this._stage){case 0:t=this._reader.read(1),t&&this._parseOpcode(t[0]);break;case 1:t=this._reader.read(1),t&&this._parseLength(t[0]);break;case 2:t=this._reader.read(this._frame.lengthBytes),t&&this._parseExtendedLength(t);break;case 3:t=this._reader.read(4),t&&(this._stage=4,this._frame.maskingKey=t);break;case 4:t=this._reader.read(this._frame.length),t&&(this._stage=0,this._emitFrame(t));break;default:t=null}},text:function(i){return this.readyState>1?!1:this.frame(i,"text")},binary:function(i){return this.readyState>1?!1:this.frame(i,"binary")},ping:function(i,t){return this.readyState>1?!1:(i=i||"",t&&(this._pingCallbacks[i]=t),this.frame(i,"ping"))},pong:function(i){return this.readyState>1?!1:(i=i||"",this.frame(i,"pong"))},close:function(i,t){return i=i||"",t=t||this.ERRORS.normal_closure,this.readyState<=0?(this.readyState=3,this.emit("close",new et.CloseEvent(t,i)),!0):this.readyState===1?(this.readyState=2,this._extensions.close(function(){this.frame(i,"close",t)},this),!0):!1},frame:function(i,t,e){if(this.readyState<=0)return this._queue([i,t,e]);if(this.readyState>2)return!1;i instanceof Array&&(i=a4.from(i)),typeof i=="number"&&(i=i.toString());var n=new kc,s=typeof i=="string",o,c;n.rsv1=n.rsv2=n.rsv3=!1,n.opcode=this.OPCODES[t||(s?"text":"binary")],o=s?a4.from(i,"utf8"):i,e&&(c=o,o=a4.allocUnsafe(2+c.length),o.writeUInt16BE(e,0),c.copy(o,2)),n.data=o;var r=function(a){var l=new Ac;l.final=!0,l.rsv1=a.rsv1,l.rsv2=a.rsv2,l.rsv3=a.rsv3,l.opcode=a.opcode,l.masked=!!this._masking,l.length=a.data.length,l.payload=a.data,l.masked&&(l.maskingKey=Rc.randomBytes(4)),this._sendFrame(l)};return this.MESSAGE_OPCODES.indexOf(n.opcode)>=0?this._extensions.processOutgoingMessage(n,function(a,l){if(a)return this._fail("extension_error",a.message);r.call(this,l)},this):r.call(this,n),!0},_sendFrame:function(i){var t=i.length,e=t<=125?2:t<=65535?4:10,n=e+(i.masked?4:0),s=a4.allocUnsafe(n+t),o=i.masked?this.MASK:0;s[0]=(i.final?this.FIN:0)|(i.rsv1?this.RSV1:0)|(i.rsv2?this.RSV2:0)|(i.rsv3?this.RSV3:0)|i.opcode,t<=125?s[1]=o|t:t<=65535?(s[1]=o|126,s.writeUInt16BE(t,2)):(s[1]=o|127,s.writeUInt32BE(Math.floor(t/4294967296),2),s.writeUInt32BE(t%4294967296,6)),i.payload.copy(s,n),i.masked&&(i.maskingKey.copy(s,e),Le.mask(s,i.maskingKey,n)),this._write(s)},_handshakeResponse:function(){var i=this._request.headers["sec-websocket-key"],t=this._request.headers["sec-websocket-version"];if(t!==Le.VERSION)throw new Error("Unsupported WebSocket version: "+t);if(typeof i!="string")throw new Error("Missing handshake request header: Sec-WebSocket-Key");this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Accept",Le.generateAccept(i)),this.protocol&&this._headers.set("Sec-WebSocket-Protocol",this.protocol);var e=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"]);e&&this._headers.set("Sec-WebSocket-Extensions",e);var n="HTTP/1.1 101 Switching Protocols",s=[n,this._headers.toString(),""];return a4.from(s.join(`\r
`),"utf8")},_shutdown:function(i,t,e){delete this._frame,delete this._message,this._stage=5;var n=this.readyState===1;this.readyState=2,this._extensions.close(function(){n&&this.frame(t,"close",i),this.readyState=3,e&&this.emit("error",new Error(t)),this.emit("close",new et.CloseEvent(i,t))},this)},_fail:function(i,t){this.readyState>1||this._shutdown(this.ERRORS[i],t,!0)},_parseOpcode:function(i){var t=[this.RSV1,this.RSV2,this.RSV3].map(function(n){return(i&n)===n}),e=this._frame=new Ac;if(e.final=(i&this.FIN)===this.FIN,e.rsv1=t[0],e.rsv2=t[1],e.rsv3=t[2],e.opcode=i&this.OPCODE,this._stage=1,!this._extensions.validFrameRsv(e))return this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(e.rsv1?1:0)+", reserved2 = "+(e.rsv2?1:0)+", reserved3 = "+(e.rsv3?1:0));if(this.OPCODE_CODES.indexOf(e.opcode)<0)return this._fail("protocol_error","Unrecognized frame opcode: "+e.opcode);if(this.MESSAGE_OPCODES.indexOf(e.opcode)<0&&!e.final)return this._fail("protocol_error","Received fragmented control frame: opcode = "+e.opcode);if(this._message&&this.OPENING_OPCODES.indexOf(e.opcode)>=0)return this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished")},_parseLength:function(i){var t=this._frame;if(t.masked=(i&this.MASK)===this.MASK,t.length=i&this.LENGTH,t.length>=0&&t.length<=125){if(this._stage=t.masked?3:4,!this._checkFrameLength())return}else this._stage=2,t.lengthBytes=t.length===126?2:8;if(this._requireMasking&&!t.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(i){var t=this._frame;if(t.length=this._readUInt(i),this._stage=t.masked?3:4,this.MESSAGE_OPCODES.indexOf(t.opcode)<0&&t.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+t.length);this._checkFrameLength()},_checkFrameLength:function(){var i=this._message?this._message.length:0;return i+this._frame.length>this._maxLength?(this._fail("too_large","WebSocket frame length too large"),!1):!0},_emitFrame:function(i){var t=this._frame,e=t.payload=Le.mask(i,t.maskingKey),n=t.opcode,s,o,c,r,a;if(delete this._frame,n===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(t)}if((n===this.OPCODES.text||n===this.OPCODES.binary)&&(this._message=new kc,this._message.pushFrame(t)),t.final&&this.MESSAGE_OPCODES.indexOf(n)>=0)return this._emitMessage(this._message);n===this.OPCODES.close&&(o=e.length>=2?e.readUInt16BE(0):null,c=e.length>2?this._encode(e.slice(2)):null,e.length!==0&&!(o!==null&&o>=this.MIN_RESERVED_ERROR&&o<=this.MAX_RESERVED_ERROR)&&this.ERROR_CODES.indexOf(o)<0&&(o=this.ERRORS.protocol_error),(e.length>125||e.length>2&&!c)&&(o=this.ERRORS.protocol_error),this._shutdown(o||this.DEFAULT_ERROR_CODE,c||"")),n===this.OPCODES.ping&&(this.frame(e,"pong"),this.emit("ping",new et.PingEvent(e.toString()))),n===this.OPCODES.pong&&(r=this._pingCallbacks,s=this._encode(e),a=r[s],delete r[s],a&&a(),this.emit("pong",new et.PongEvent(e.toString())))},_emitMessage:function(t){var t=this._message;t.read(),delete this._message,this._extensions.processIncomingMessage(t,function(e,n){if(e)return this._fail("extension_error",e.message);var s=n.data;if(n.opcode===this.OPCODES.text&&(s=this._encode(s)),s===null)return this._fail("encoding_error","Could not decode a text frame as UTF-8");this.emit("message",new et.MessageEvent(s))},this)},_encode:function(i){try{var t=i.toString("binary",0,i.length);if(!this.UTF8_MATCH.test(t))return null}catch{}return i.toString("utf8",0,i.length)},_readUInt:function(i){return i.length===2?i.readUInt16BE(0):i.readUInt32BE(0)*4294967296+i.readUInt32BE(4)}};for(f8 in Bc)Le.prototype[f8]=Bc[f8];var f8;Nc.exports=Le});var Wc=T((Nz,Uc)=>{"use strict";var jc=n1().Buffer,Bh=k("stream").Stream,Fc=k("url"),Rh=k("util"),Nh=M1(),Fh=I2(),Ph=F2(),jh={"ws:":80,"wss:":443},p8=function(i,t,e){this._client=i,this._http=new Ph("response"),this._origin=typeof i.url=="object"?i.url:Fc.parse(i.url),this._url=typeof t=="object"?t:Fc.parse(t),this._options=e||{},this._state=0,this.readable=this.writable=!0,this._paused=!1,this._headers=new Fh,this._headers.set("Host",this._origin.host),this._headers.set("Connection","keep-alive"),this._headers.set("Proxy-Connection","keep-alive");var n=this._url.auth&&jc.from(this._url.auth,"utf8").toString("base64");n&&this._headers.set("Proxy-Authorization","Basic "+n)};Rh.inherits(p8,Bh);var Pc={setHeader:function(i,t){return this._state!==0?!1:(this._headers.set(i,t),!0)},start:function(){if(this._state!==0)return!1;this._state=1;var i=this._origin,t=i.port||jh[i.protocol],e="CONNECT "+i.hostname+":"+t+" HTTP/1.1",n=[e,this._headers.toString(),""];return this.emit("data",jc.from(n.join(`\r
`),"utf8")),!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1,this.emit("drain")},write:function(i){if(!this.writable)return!1;if(this._http.parse(i),!this._http.isComplete())return!this._paused;if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this.statusCode===200)this.emit("connect",new Nh.ConnectEvent);else{var t="Can't establish a connection to the server at "+this._origin.href;this.emit("error",new Error(t))}return this.end(),!this._paused},end:function(i){this.writable&&(i!==void 0&&this.write(i),this.readable=this.writable=!1,this.emit("close"),this.emit("end"))},destroy:function(){this.end()}};for(m8 in Pc)p8.prototype[m8]=Pc[m8];var m8;Uc.exports=p8});var Yc=T((Fz,Gc)=>{"use strict";var $c=n1().Buffer,Uh=k("crypto"),Wh=k("url"),qh=k("util"),$h=F2(),Gh=M1(),_t=v8(),Yh=Wc(),l4=function(i,t){this.version="hybi-"+_t.VERSION,_t.call(this,null,i,t),this.readyState=-1,this._key=l4.generateKey(),this._accept=_t.generateAccept(this._key),this._http=new $h("response");var e=Wh.parse(this.url),n=e.auth&&$c.from(e.auth,"utf8").toString("base64");if(this.VALID_PROTOCOLS.indexOf(e.protocol)<0)throw new Error(this.url+" is not a valid WebSocket URL");this._pathname=(e.pathname||"/")+(e.search||""),this._headers.set("Host",e.host),this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Key",this._key),this._headers.set("Sec-WebSocket-Version",_t.VERSION),this._protocols.length>0&&this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", ")),n&&this._headers.set("Authorization","Basic "+n)};qh.inherits(l4,_t);l4.generateKey=function(){return Uh.randomBytes(16).toString("base64")};var qc={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(i,t){return new Yh(this,i,t)},start:function(){return this.readyState!==-1?!1:(this._write(this._handshakeRequest()),this.readyState=0,!0)},parse:function(i){if(this.readyState!==3){if(this.readyState>0)return _t.prototype.parse.call(this,i);this._http.parse(i),this._http.isComplete()&&(this._validateHandshake(),this.readyState!==3&&(this._open(),this.parse(this._http.body)))}},_handshakeRequest:function(){var i=this._extensions.generateOffer();i&&this._headers.set("Sec-WebSocket-Extensions",i);var t="GET "+this._pathname+" HTTP/1.1",e=[t,this._headers.toString(),""];return $c.from(e.join(`\r
`),"utf8")},_failHandshake:function(i){i="Error during WebSocket handshake: "+i,this.readyState=3,this.emit("error",new Error(i)),this.emit("close",new Gh.CloseEvent(this.ERRORS.protocol_error,i))},_validateHandshake:function(){if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this._http.error)return this._failHandshake(this._http.error.message);if(this._http.statusCode!==101)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var i=this._http.headers,t=i.upgrade||"",e=i.connection||"",n=i["sec-websocket-accept"]||"",s=i["sec-websocket-protocol"]||"";if(t==="")return this._failHandshake("'Upgrade' header is missing");if(t.toLowerCase()!=="websocket")return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(e==="")return this._failHandshake("'Connection' header is missing");if(e.toLowerCase()!=="upgrade")return this._failHandshake("'Connection' header value is not 'Upgrade'");if(n!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");if(this.protocol=null,s!==""){if(this._protocols.indexOf(s)<0)return this._failHandshake("Sec-WebSocket-Protocol mismatch");this.protocol=s}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(o){return this._failHandshake(o.message)}}};for(g8 in qc)l4.prototype[g8]=qc[g8];var g8;Gc.exports=l4});var y8=T((Pz,Kc)=>{"use strict";var j2=n1().Buffer,U2=M1(),Xh=k("util"),z8=function(i,t,e){U2.apply(this,arguments),this._stage=0,this.version="hixie-75",this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("WebSocket-Origin",this._request.headers.origin),this._headers.set("WebSocket-Location",this.url)};Xh.inherits(z8,U2);var Xc={close:function(){return this.readyState===3?!1:(this.readyState=3,this.emit("close",new U2.CloseEvent(null,null)),!0)},parse:function(i){this.readyState>1||(this._reader.put(i),this._reader.eachByte(function(t){var e;switch(this._stage){case-1:this._body.push(t),this._sendHandshakeBody();break;case 0:this._parseLeadingByte(t);break;case 1:if(this._length=(t&127)+128*this._length,this._closing&&this._length===0)return this.close();(t&128)!==128&&(this._length===0?this._stage=0:(this._skipped=0,this._stage=2));break;case 2:if(t===255)this._stage=0,e=j2.from(this._buffer).toString("utf8",0,this._buffer.length),this.emit("message",new U2.MessageEvent(e));else if(this._length)this._skipped+=1,this._skipped===this._length&&(this._stage=0);else if(this._buffer.push(t),this._buffer.length>this._maxLength)return this.close();break}},this))},frame:function(i){if(this.readyState===0)return this._queue([i]);if(this.readyState>1)return!1;typeof i!="string"&&(i=i.toString());var t=j2.byteLength(i),e=j2.allocUnsafe(t+2);return e[0]=0,e.write(i,1),e[e.length-1]=255,this._write(e),!0},_handshakeResponse:function(){var i="HTTP/1.1 101 Web Socket Protocol Handshake",t=[i,this._headers.toString(),""];return j2.from(t.join(`\r
`),"utf8")},_parseLeadingByte:function(i){(i&128)===128?(this._length=0,this._stage=1):(delete this._length,delete this._skipped,this._buffer=[],this._stage=2)}};for(_8 in Xc)z8.prototype[_8]=Xc[_8];var _8;Kc.exports=z8});var tr=T((jz,er)=>{"use strict";var h4=n1().Buffer,Kh=M1(),W2=y8(),Qh=k("crypto"),Zh=k("util"),Qc=function(i){return parseInt((i.match(/[0-9]/g)||[]).join(""),10)},Zc=function(i){return(i.match(/ /g)||[]).length},w8=function(i,t,e){W2.apply(this,arguments),this._stage=-1,this._body=[],this.version="hixie-76",this._headers.clear(),this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin),this._headers.set("Sec-WebSocket-Location",this.url)};Zh.inherits(w8,W2);var Jc={BODY_SIZE:8,start:function(){return W2.prototype.start.call(this)?(this._started=!0,this._sendHandshakeBody(),!0):!1},close:function(){return this.readyState===3?!1:(this.readyState===1&&this._write(h4.from([255,0])),this.readyState=3,this.emit("close",new Kh.CloseEvent(null,null)),!0)},_handshakeResponse:function(){var r=this._request.headers,i=r["sec-websocket-key1"],t=r["sec-websocket-key2"];if(!i)throw new Error("Missing required header: Sec-WebSocket-Key1");if(!t)throw new Error("Missing required header: Sec-WebSocket-Key2");var e=Qc(i),n=Zc(i),s=Qc(t),o=Zc(t);if(e%n!==0||s%o!==0)throw new Error("Client sent invalid Sec-WebSocket-Key headers");this._keyValues=[e/n,s/o];var c="HTTP/1.1 101 WebSocket Protocol Handshake",r=[c,this._headers.toString(),""];return h4.from(r.join(`\r
`),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var i=Qh.createHash("md5"),t=h4.allocUnsafe(8+this.BODY_SIZE);return t.writeUInt32BE(this._keyValues[0],0),t.writeUInt32BE(this._keyValues[1],4),h4.from(this._body).copy(t,8,0,this.BODY_SIZE),i.update(t),h4.from(i.digest("binary"),"binary")},_sendHandshakeBody:function(){if(this._started){var i=this._handshakeSignature();i&&(this._write(i),this._stage=0,this._open(),this._body.length>this.BODY_SIZE&&this.parse(this._body.slice(this.BODY_SIZE)))}},_parseLeadingByte:function(i){if(i!==255)return W2.prototype._parseLeadingByte.call(this,i);this._closing=!0,this._length=0,this._stage=1}};for(b8 in Jc)w8.prototype[b8]=Jc[b8];var b8;er.exports=w8});var nr=T((Uz,ir)=>{"use strict";var Jh=k("util"),eu=F2(),E8=M1(),tu=y8(),iu=tr(),nu=v8(),tt=function(i){E8.call(this,null,null,i),this._http=new eu("request")};Jh.inherits(tt,E8);var C8={EVENTS:["open","message","error","close","ping","pong"],_bindEventListeners:function(){this.messages.on("error",function(){}),this.on("error",function(){})},parse:function(i){if(this._delegate)return this._delegate.parse(i);if(this._http.parse(i),!!this._http.isComplete()){this.method=this._http.method,this.url=this._http.url,this.headers=this._http.headers,this.body=this._http.body;var t=this;this._delegate=tt.http(this,this._options),this._delegate.messages=this.messages,this._delegate.io=this.io,this._open(),this.EVENTS.forEach(function(e){this._delegate.on(e,function(n){t.emit(e,n)})},this),this.protocol=this._delegate.protocol,this.version=this._delegate.version,this.parse(this._http.body),this.emit("connect",new E8.ConnectEvent)}},_open:function(){this.__queue.forEach(function(i){this._delegate[i[0]].apply(this._delegate,i[1])},this),this.__queue=[]}};["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach(function(i){C8[i]=function(){return this._delegate?this._delegate[i].apply(this._delegate,arguments):(this.__queue.push([i,arguments]),!0)}});for(M8 in C8)tt.prototype[M8]=C8[M8];var M8;tt.isSecureRequest=function(i){if(i.connection&&i.connection.authorized!==void 0||i.socket&&i.socket.secure)return!0;var t=i.headers;return t?t.https==="on"||t["x-forwarded-ssl"]==="on"||t["x-forwarded-scheme"]==="https"||t["x-forwarded-proto"]==="https":!1};tt.determineUrl=function(i){var t=this.isSecureRequest(i)?"wss:":"ws:";return t+"//"+i.headers.host+i.url};tt.http=function(i,t){t=t||{},t.requireMasking===void 0&&(t.requireMasking=!0);var e=i.headers,n=e["sec-websocket-version"],s=e["sec-websocket-key"],o=e["sec-websocket-key1"],c=e["sec-websocket-key2"],r=this.determineUrl(i);return n||s?new nu(i,r,t):o||c?new iu(i,r,t):new tu(i,r,t)};ir.exports=tt});var u4=T((Wz,or)=>{"use strict";var sr=M1(),su=Yc(),q2=nr(),ou={client:function(i,t){return t=t||{},t.masking===void 0&&(t.masking=!0),new su(i,t)},server:function(i){return i=i||{},i.requireMasking===void 0&&(i.requireMasking=!0),new q2(i)},http:function(){return q2.http.apply(q2,arguments)},isSecureRequest:function(i){return q2.isSecureRequest(i)},isWebSocket:function(i){return sr.isWebSocket(i)},validateOptions:function(i,t){sr.validateOptions(i,t)}};or.exports=ou});var d4=T((qz,cr)=>{"use strict";var it=function(i,t){this.type=i;for(var e in t)this[e]=t[e]};it.prototype.initEvent=function(i,t,e){this.type=i,this.bubbles=t,this.cancelable=e};it.prototype.stopPropagation=function(){};it.prototype.preventDefault=function(){};it.CAPTURING_PHASE=1;it.AT_TARGET=2;it.BUBBLING_PHASE=3;cr.exports=it});var S8=T(($z,rr)=>{"use strict";var cu=d4(),ru={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(i,t,e){this.on(i,t)},removeEventListener:function(i,t,e){this.removeListener(i,t)},dispatchEvent:function(i){i.target=i.currentTarget=this,i.eventPhase=cu.AT_TARGET,this["on"+i.type]&&this["on"+i.type](i),this.emit(i.type,i)}};rr.exports=ru});var G2=T((Gz,hr)=>{"use strict";var au=k("stream").Stream,lu=k("util"),hu=u4(),ar=S8(),$2=d4(),q=function(i){i=i||{},hu.validateOptions(i,["headers","extensions","maxLength","ping","proxy","tls","ca"]),this.readable=this.writable=!0;var t=i.headers;if(t)for(var e in t)this._driver.setHeader(e,t[e]);var n=i.extensions;n&&[].concat(n).forEach(this._driver.addExtension,this._driver),this._ping=i.ping,this._pingId=0,this.readyState=q.CONNECTING,this.bufferedAmount=0,this.protocol="",this.url=this._driver.url,this.version=this._driver.version;var s=this;this._driver.on("open",function(o){s._open()}),this._driver.on("message",function(o){s._receiveMessage(o.data)}),this._driver.on("close",function(o){s._beginClose(o.reason,o.code)}),this._driver.on("error",function(o){s._emitError(o.message)}),this.on("error",function(){}),this._driver.messages.on("drain",function(){s.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){s._pingId+=1,s.ping(s._pingId.toString())},this._ping*1e3)),this._configureStream(),this._proxy||(this._stream.pipe(this._driver.io),this._driver.io.pipe(this._stream))};lu.inherits(q,au);q.CONNECTING=0;q.OPEN=1;q.CLOSING=2;q.CLOSED=3;q.CLOSE_TIMEOUT=3e4;var lr={write:function(i){return this.send(i)},end:function(i){i!==void 0&&this.send(i),this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(i){return this.readyState>q.OPEN?!1:(i instanceof Buffer||(i=String(i)),this._driver.messages.write(i))},ping:function(i,t){return this.readyState>q.OPEN?!1:this._driver.ping(i,t)},close:function(i,t){if(i===void 0&&(i=1e3),t===void 0&&(t=""),i!==1e3&&(i<3e3||i>4999))throw new Error("Failed to execute 'close' on WebSocket: The code must be either 1000, or between 3000 and 4999. "+i+" is neither.");if(this.readyState<q.CLOSING){var e=this;this._closeTimer=setTimeout(function(){e._beginClose("",1006)},q.CLOSE_TIMEOUT)}this.readyState!==q.CLOSED&&(this.readyState=q.CLOSING),this._driver.close(t,i)},_configureStream:function(){var i=this;this._stream.setTimeout(0),this._stream.setNoDelay(!0),["close","end"].forEach(function(t){this._stream.on(t,function(){i._finalizeClose()})},this),this._stream.on("error",function(t){i._emitError("Network error: "+i.url+": "+t.message),i._finalizeClose()})},_open:function(){if(this.readyState===q.CONNECTING){this.readyState=q.OPEN,this.protocol=this._driver.protocol||"";var i=new $2("open");i.initEvent("open",!1,!1),this.dispatchEvent(i)}},_receiveMessage:function(i){if(this.readyState>q.OPEN)return!1;this.readable&&this.emit("data",i);var t=new $2("message",{data:i});t.initEvent("message",!1,!1),this.dispatchEvent(t)},_emitError:function(i){if(!(this.readyState>=q.CLOSING)){var t=new $2("error",{message:i});t.initEvent("error",!1,!1),this.dispatchEvent(t)}},_beginClose:function(i,t){this.readyState!==q.CLOSED&&(this.readyState=q.CLOSING,this._closeParams=[i,t],this._stream&&(this._stream.destroy(),this._stream.readable||this._finalizeClose()))},_finalizeClose:function(){if(this.readyState!==q.CLOSED){this.readyState=q.CLOSED,this._closeTimer&&clearTimeout(this._closeTimer),this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end(),this.readable&&this.emit("end"),this.readable=this.writable=!1;var i=this._closeParams?this._closeParams[0]:"",t=this._closeParams?this._closeParams[1]:1006,e=new $2("close",{code:t,reason:i});e.initEvent("close",!1,!1),this.dispatchEvent(e)}}};for(V8 in lr)q.prototype[V8]=lr[V8];var V8;for(H8 in ar)q.prototype[H8]=ar[H8];var H8;hr.exports=q});var pr=T((Xz,mr)=>{"use strict";var uu=k("util"),du=k("net"),ur=k("tls"),dr=k("url"),fu=u4(),fr=G2(),Yz=d4(),vu={"http:":80,"https:":443,"ws:":80,"wss:":443},vr=["https:","wss:"],Y2=function(i,t,e){e=e||{},this.url=i,this._driver=fu.client(this.url,{maxLength:e.maxLength,protocols:t}),["open","error"].forEach(function(d){this._driver.on(d,function(){u.headers=u._driver.headers,u.statusCode=u._driver.statusCode})},this);var n=e.proxy||{},s=dr.parse(n.origin||this.url),o=s.port||vu[s.protocol],c=vr.indexOf(s.protocol)>=0,r=function(){u._onConnect()},a=e.net||{},l=e.tls||{},h=n.origin?n.tls||{}:l,u=this;a.host=h.host=s.hostname,a.port=h.port=o,l.ca=l.ca||e.ca,h.servername=h.servername||s.hostname,this._stream=c?ur.connect(h,r):du.connect(a,r),n.origin&&this._configureProxy(n,l),fr.call(this,e)};uu.inherits(Y2,fr);Y2.prototype._onConnect=function(){var i=this._proxy||this._driver;i.start()};Y2.prototype._configureProxy=function(i,t){var e=dr.parse(this.url),n=vr.indexOf(e.protocol)>=0,s=this,o;if(this._proxy=this._driver.proxy(i.origin),i.headers)for(o in i.headers)this._proxy.setHeader(o,i.headers[o]);this._proxy.pipe(this._stream,{end:!1}),this._stream.pipe(this._proxy),this._proxy.on("connect",function(){if(n){var c={socket:s._stream,servername:e.hostname};for(o in t)c[o]=t[o];s._stream=ur.connect(c),s._configureStream()}s._driver.io.pipe(s._stream),s._stream.pipe(s._driver.io),s._driver.start()}),this._proxy.on("error",function(c){s._driver.emit("error",c)})};mr.exports=Y2});var br=T((Kz,yr)=>{"use strict";var mu=k("stream").Stream,pu=k("util"),gu=u4(),_u=I2(),zt=G2(),gr=S8(),_r=d4(),f4=function(i,t,e){this.writable=!0,e=e||{},this._stream=t.socket,this._ping=e.ping||this.DEFAULT_PING,this._retry=e.retry||this.DEFAULT_RETRY;var n=gu.isSecureRequest(i)?"https:":"http:";this.url=n+"//"+i.headers.host+i.url,this.lastEventId=i.headers["last-event-id"]||"",this.readyState=zt.CONNECTING;var s=new _u,o=this;if(e.headers)for(var c in e.headers)s.set(c,e.headers[c]);if(!(!this._stream||!this._stream.writable)){process.nextTick(function(){o._open()}),this._stream.setTimeout(0),this._stream.setNoDelay(!0);var r=`HTTP/1.1 200 OK\r
Content-Type: text/event-stream\r
Cache-Control: no-cache, no-store\r
Connection: close\r
`+s.toString()+`\r
retry: `+Math.floor(this._retry*1e3)+`\r
\r
`;this._write(r),this._stream.on("drain",function(){o.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){o.ping()},this._ping*1e3)),["error","end"].forEach(function(a){o._stream.on(a,function(){o.close()})})}};pu.inherits(f4,mu);f4.isEventSource=function(i){if(i.method!=="GET")return!1;var t=(i.headers.accept||"").split(/\s*,\s*/);return t.indexOf("text/event-stream")>=0};var zr={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(i){if(!this.writable)return!1;try{return this._stream.write(i,"utf8")}catch{return!1}},_open:function(){if(this.readyState===zt.CONNECTING){this.readyState=zt.OPEN;var i=new _r("open");i.initEvent("open",!1,!1),this.dispatchEvent(i)}},write:function(i){return this.send(i)},end:function(i){i!==void 0&&this.write(i),this.close()},send:function(i,t){if(this.readyState>zt.OPEN)return!1;i=String(i).replace(/(\r\n|\r|\n)/g,"$1data: "),t=t||{};var e="";return t.event&&(e+="event: "+t.event+`\r
`),t.id&&(e+="id: "+t.id+`\r
`),e+="data: "+i+`\r
\r
`,this._write(e)},ping:function(){return this._write(`:\r
\r
`)},close:function(){if(this.readyState>zt.OPEN)return!1;this.readyState=zt.CLOSED,this.writable=!1,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end();var i=new _r("close");return i.initEvent("close",!1,!1),this.dispatchEvent(i),!0}};for(x8 in zr)f4.prototype[x8]=zr[x8];var x8;for(O8 in gr)f4.prototype[O8]=gr[O8];var O8;yr.exports=f4});var Cr=T((Qz,Mr)=>{"use strict";var zu=k("util"),T8=u4(),wr=G2(),C1=function(i,t,e,n,s){s=s||{},this._stream=t,this._driver=T8.http(i,{maxLength:s.maxLength,protocols:n});var o=this;if(!(!this._stream||!this._stream.writable)){if(!this._stream.readable)return this._stream.end();var c=function(){o._stream.removeListener("data",c)};this._stream.on("data",c),wr.call(this,s),process.nextTick(function(){o._driver.start(),o._driver.io.write(e)})}};zu.inherits(C1,wr);C1.isWebSocket=function(i){return T8.isWebSocket(i)};C1.validateOptions=function(i,t){T8.validateOptions(i,t)};C1.WebSocket=C1;C1.Client=pr();C1.EventSource=br();Mr.exports=C1});function ee(i,t){P7(i)&&(i="100%");var e=j7(i);return i=t===360?i:Math.min(t,Math.max(0,parseFloat(i))),e&&(i=parseInt(String(i*t),10)/100),Math.abs(i-t)<1e-6?1:(t===360?i=(i<0?i%t+t:i%t)/parseFloat(String(t)):i=i%t/parseFloat(String(t)),i)}function Ut(i){return Math.min(1,Math.max(0,i))}function P7(i){return typeof i=="string"&&i.indexOf(".")!==-1&&parseFloat(i)===1}function j7(i){return typeof i=="string"&&i.indexOf("%")!==-1}function c2(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function Wt(i){return i<=1?"".concat(Number(i)*100,"%"):i}function _1(i){return i.length===1?"0"+i:String(i)}function Mi(i,t,e){return{r:ee(i,255)*255,g:ee(t,255)*255,b:ee(e,255)*255}}function K3(i,t,e){i=ee(i,255),t=ee(t,255),e=ee(e,255);var n=Math.max(i,t,e),s=Math.min(i,t,e),o=0,c=0,r=(n+s)/2;if(n===s)c=0,o=0;else{var a=n-s;switch(c=r>.5?a/(2-n-s):a/(n+s),n){case i:o=(t-e)/a+(t<e?6:0);break;case t:o=(e-i)/a+2;break;case e:o=(i-t)/a+4;break;default:break}o/=6}return{h:o,s:c,l:r}}function X3(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*(6*e):e<1/2?t:e<2/3?i+(t-i)*(2/3-e)*6:i}function Ci(i,t,e){var n,s,o;if(i=ee(i,360),t=ee(t,100),e=ee(e,100),t===0)s=e,o=e,n=e;else{var c=e<.5?e*(1+t):e+t-e*t,r=2*e-c;n=X3(r,c,i+1/3),s=X3(r,c,i),o=X3(r,c,i-1/3)}return{r:n*255,g:s*255,b:o*255}}function B1(i,t,e){i=ee(i,255),t=ee(t,255),e=ee(e,255);var n=Math.max(i,t,e),s=Math.min(i,t,e),o=0,c=n,r=n-s,a=n===0?0:r/n;if(n===s)o=0;else{switch(n){case i:o=(t-e)/r+(t<e?6:0);break;case t:o=(e-i)/r+2;break;case e:o=(i-t)/r+4;break;default:break}o/=6}return{h:o,s:a,v:c}}function Ei(i,t,e){i=ee(i,360)*6,t=ee(t,100),e=ee(e,100);var n=Math.floor(i),s=i-n,o=e*(1-t),c=e*(1-s*t),r=e*(1-(1-s)*t),a=n%6,l=[e,c,o,o,r,e][a],h=[r,e,e,c,o,o][a],u=[o,o,r,e,e,c][a];return{r:l*255,g:h*255,b:u*255}}function R1(i,t,e,n){var s=[_1(Math.round(i).toString(16)),_1(Math.round(t).toString(16)),_1(Math.round(e).toString(16))];return n&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function Si(i,t,e,n,s){var o=[_1(Math.round(i).toString(16)),_1(Math.round(t).toString(16)),_1(Math.round(e).toString(16)),_1(U7(n))];return s&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function U7(i){return Math.round(parseFloat(i)*255).toString(16)}function Q3(i){return Ce(i)/255}function Ce(i){return parseInt(i,16)}function Vi(i){return{r:i>>16,g:(i&65280)>>8,b:i&255}}var qt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Ee(i){var t={r:0,g:0,b:0},e=1,n=null,s=null,o=null,c=!1,r=!1;return typeof i=="string"&&(i=$7(i)),typeof i=="object"&&(h1(i.r)&&h1(i.g)&&h1(i.b)?(t=Mi(i.r,i.g,i.b),c=!0,r=String(i.r).substr(-1)==="%"?"prgb":"rgb"):h1(i.h)&&h1(i.s)&&h1(i.v)?(n=Wt(i.s),s=Wt(i.v),t=Ei(i.h,n,s),c=!0,r="hsv"):h1(i.h)&&h1(i.s)&&h1(i.l)&&(n=Wt(i.s),o=Wt(i.l),t=Ci(i.h,n,o),c=!0,r="hsl"),Object.prototype.hasOwnProperty.call(i,"a")&&(e=i.a)),e=c2(e),{ok:c,format:i.format||r,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}var W7="[-\\+]?\\d+%?",q7="[-\\+]?\\d*\\.\\d+%?",z1="(?:".concat(q7,")|(?:").concat(W7,")"),Z3="[\\s|\\(]+(".concat(z1,")[,|\\s]+(").concat(z1,")[,|\\s]+(").concat(z1,")\\s*\\)?"),J3="[\\s|\\(]+(".concat(z1,")[,|\\s]+(").concat(z1,")[,|\\s]+(").concat(z1,")[,|\\s]+(").concat(z1,")\\s*\\)?"),Ye={CSS_UNIT:new RegExp(z1),rgb:new RegExp("rgb"+Z3),rgba:new RegExp("rgba"+J3),hsl:new RegExp("hsl"+Z3),hsla:new RegExp("hsla"+J3),hsv:new RegExp("hsv"+Z3),hsva:new RegExp("hsva"+J3),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function $7(i){if(i=i.trim().toLowerCase(),i.length===0)return!1;var t=!1;if(qt[i])i=qt[i],t=!0;else if(i==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e=Ye.rgb.exec(i);return e?{r:e[1],g:e[2],b:e[3]}:(e=Ye.rgba.exec(i),e?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=Ye.hsl.exec(i),e?{h:e[1],s:e[2],l:e[3]}:(e=Ye.hsla.exec(i),e?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=Ye.hsv.exec(i),e?{h:e[1],s:e[2],v:e[3]}:(e=Ye.hsva.exec(i),e?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=Ye.hex8.exec(i),e?{r:Ce(e[1]),g:Ce(e[2]),b:Ce(e[3]),a:Q3(e[4]),format:t?"name":"hex8"}:(e=Ye.hex6.exec(i),e?{r:Ce(e[1]),g:Ce(e[2]),b:Ce(e[3]),format:t?"name":"hex"}:(e=Ye.hex4.exec(i),e?{r:Ce(e[1]+e[1]),g:Ce(e[2]+e[2]),b:Ce(e[3]+e[3]),a:Q3(e[4]+e[4]),format:t?"name":"hex8"}:(e=Ye.hex3.exec(i),e?{r:Ce(e[1]+e[1]),g:Ce(e[2]+e[2]),b:Ce(e[3]+e[3]),format:t?"name":"hex"}:!1)))))))))}function h1(i){return!!Ye.CSS_UNIT.exec(String(i))}var r2=function(){function i(t,e){t===void 0&&(t=""),e===void 0&&(e={});var n;if(t instanceof i)return t;typeof t=="number"&&(t=Vi(t)),this.originalInput=t;var s=Ee(t);this.originalInput=t,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=e.format)!==null&&n!==void 0?n:s.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return i.prototype.isDark=function(){return this.getBrightness()<128},i.prototype.isLight=function(){return!this.isDark()},i.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},i.prototype.getLuminance=function(){var t=this.toRgb(),e,n,s,o=t.r/255,c=t.g/255,r=t.b/255;return o<=.03928?e=o/12.92:e=Math.pow((o+.055)/1.055,2.4),c<=.03928?n=c/12.92:n=Math.pow((c+.055)/1.055,2.4),r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),.2126*e+.7152*n+.0722*s},i.prototype.getAlpha=function(){return this.a},i.prototype.setAlpha=function(t){return this.a=c2(t),this.roundA=Math.round(100*this.a)/100,this},i.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},i.prototype.toHsv=function(){var t=B1(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},i.prototype.toHsvString=function(){var t=B1(this.r,this.g,this.b),e=Math.round(t.h*360),n=Math.round(t.s*100),s=Math.round(t.v*100);return this.a===1?"hsv(".concat(e,", ").concat(n,"%, ").concat(s,"%)"):"hsva(".concat(e,", ").concat(n,"%, ").concat(s,"%, ").concat(this.roundA,")")},i.prototype.toHsl=function(){var t=K3(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},i.prototype.toHslString=function(){var t=K3(this.r,this.g,this.b),e=Math.round(t.h*360),n=Math.round(t.s*100),s=Math.round(t.l*100);return this.a===1?"hsl(".concat(e,", ").concat(n,"%, ").concat(s,"%)"):"hsla(".concat(e,", ").concat(n,"%, ").concat(s,"%, ").concat(this.roundA,")")},i.prototype.toHex=function(t){return t===void 0&&(t=!1),R1(this.r,this.g,this.b,t)},i.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},i.prototype.toHex8=function(t){return t===void 0&&(t=!1),Si(this.r,this.g,this.b,this.a,t)},i.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},i.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},i.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},i.prototype.toRgbString=function(){var t=Math.round(this.r),e=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(e,", ").concat(n,")"):"rgba(".concat(t,", ").concat(e,", ").concat(n,", ").concat(this.roundA,")")},i.prototype.toPercentageRgb=function(){var t=function(e){return"".concat(Math.round(ee(e,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},i.prototype.toPercentageRgbString=function(){var t=function(e){return Math.round(ee(e,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},i.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+R1(this.r,this.g,this.b,!1),e=0,n=Object.entries(qt);e<n.length;e++){var s=n[e],o=s[0],c=s[1];if(t===c)return o}return!1},i.prototype.toString=function(t){var e=!!t;t=t??this.format;var n=!1,s=this.a<1&&this.a>=0,o=!e&&s&&(t.startsWith("hex")||t==="name");return o?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},i.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},i.prototype.clone=function(){return new i(this.toString())},i.prototype.lighten=function(t){t===void 0&&(t=10);var e=this.toHsl();return e.l+=t/100,e.l=Ut(e.l),new i(e)},i.prototype.brighten=function(t){t===void 0&&(t=10);var e=this.toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(t/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(t/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(t/100)))),new i(e)},i.prototype.darken=function(t){t===void 0&&(t=10);var e=this.toHsl();return e.l-=t/100,e.l=Ut(e.l),new i(e)},i.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},i.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},i.prototype.desaturate=function(t){t===void 0&&(t=10);var e=this.toHsl();return e.s-=t/100,e.s=Ut(e.s),new i(e)},i.prototype.saturate=function(t){t===void 0&&(t=10);var e=this.toHsl();return e.s+=t/100,e.s=Ut(e.s),new i(e)},i.prototype.greyscale=function(){return this.desaturate(100)},i.prototype.spin=function(t){var e=this.toHsl(),n=(e.h+t)%360;return e.h=n<0?360+n:n,new i(e)},i.prototype.mix=function(t,e){e===void 0&&(e=50);var n=this.toRgb(),s=new i(t).toRgb(),o=e/100,c={r:(s.r-n.r)*o+n.r,g:(s.g-n.g)*o+n.g,b:(s.b-n.b)*o+n.b,a:(s.a-n.a)*o+n.a};return new i(c)},i.prototype.analogous=function(t,e){t===void 0&&(t=6),e===void 0&&(e=30);var n=this.toHsl(),s=360/e,o=[this];for(n.h=(n.h-(s*t>>1)+720)%360;--t;)n.h=(n.h+s)%360,o.push(new i(n));return o},i.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new i(t)},i.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var e=this.toHsv(),n=e.h,s=e.s,o=e.v,c=[],r=1/t;t--;)c.push(new i({h:n,s,v:o})),o=(o+r)%1;return c},i.prototype.splitcomplement=function(){var t=this.toHsl(),e=t.h;return[this,new i({h:(e+72)%360,s:t.s,l:t.l}),new i({h:(e+216)%360,s:t.s,l:t.l})]},i.prototype.onBackground=function(t){var e=this.toRgb(),n=new i(t).toRgb(),s=e.a+n.a*(1-e.a);return new i({r:(e.r*e.a+n.r*n.a*(1-e.a))/s,g:(e.g*e.a+n.g*n.a*(1-e.a))/s,b:(e.b*e.a+n.b*n.a*(1-e.a))/s,a:s})},i.prototype.triad=function(){return this.polyad(3)},i.prototype.tetrad=function(){return this.polyad(4)},i.prototype.polyad=function(t){for(var e=this.toHsl(),n=e.h,s=[this],o=360/t,c=1;c<t;c++)s.push(new i({h:(n+c*o)%360,s:e.s,l:e.l}));return s},i.prototype.equals=function(t){return this.toRgbString()===new i(t).toRgbString()},i}();var a2=2,Hi=.16,G7=.05,Y7=.05,X7=.15,Di=5,Ii=4,K7=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function xi(i){var t=i.r,e=i.g,n=i.b,s=B1(t,e,n);return{h:s.h*360,s:s.s,v:s.v}}function l2(i){var t=i.r,e=i.g,n=i.b;return"#".concat(R1(t,e,n,!1))}function Q7(i,t,e){var n=e/100,s={r:(t.r-i.r)*n+i.r,g:(t.g-i.g)*n+i.g,b:(t.b-i.b)*n+i.b};return s}function Oi(i,t,e){var n;return Math.round(i.h)>=60&&Math.round(i.h)<=240?n=e?Math.round(i.h)-a2*t:Math.round(i.h)+a2*t:n=e?Math.round(i.h)+a2*t:Math.round(i.h)-a2*t,n<0?n+=360:n>=360&&(n-=360),n}function Ti(i,t,e){if(i.h===0&&i.s===0)return i.s;var n;return e?n=i.s-Hi*t:t===Ii?n=i.s+Hi:n=i.s+G7*t,n>1&&(n=1),e&&t===Di&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function Li(i,t,e){var n;return e?n=i.v+Y7*t:n=i.v-X7*t,n>1&&(n=1),Number(n.toFixed(2))}function h2(i){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=[],n=Ee(i),s=Di;s>0;s-=1){var o=xi(n),c=l2(Ee({h:Oi(o,s,!0),s:Ti(o,s,!0),v:Li(o,s,!0)}));e.push(c)}e.push(l2(n));for(var r=1;r<=Ii;r+=1){var a=xi(n),l=l2(Ee({h:Oi(a,r),s:Ti(a,r),v:Li(a,r)}));e.push(l)}return t.theme==="dark"?K7.map(function(h){var u=h.index,d=h.opacity,f=l2(Q7(Ee(t.backgroundColor||"#141414"),Ee(e[u]),d*100));return f}):e}var Ai=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];Ai.primary=Ai[5];var ki=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];ki.primary=ki[5];var Bi=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];Bi.primary=Bi[5];var Ri=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];Ri.primary=Ri[5];var Ni=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];Ni.primary=Ni[5];var Fi=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];Fi.primary=Fi[5];var Pi=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];Pi.primary=Pi[5];var ji=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];ji.primary=ji[5];var Ui=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];Ui.primary=Ui[5];var Wi=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];Wi.primary=Wi[5];var qi=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];qi.primary=qi[5];var $i=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];$i.primary=$i[5];var Gi=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];Gi.primary=Gi[5];var Yi=["#2a1215","#431418","#58181c","#791a1f","#a61d24","#d32029","#e84749","#f37370","#f89f9a","#fac8c3"];Yi.primary=Yi[5];var Xi=["#2b1611","#441d12","#592716","#7c3118","#aa3e19","#d84a1b","#e87040","#f3956a","#f8b692","#fad4bc"];Xi.primary=Xi[5];var Ki=["#2b1d11","#442a11","#593815","#7c4a15","#aa6215","#d87a16","#e89a3c","#f3b765","#f8cf8d","#fae3b7"];Ki.primary=Ki[5];var Qi=["#2b2111","#443111","#594214","#7c5914","#aa7714","#d89614","#e8b339","#f3cc62","#f8df8b","#faedb5"];Qi.primary=Qi[5];var Zi=["#2b2611","#443b11","#595014","#7c6e14","#aa9514","#d8bd14","#e8d639","#f3ea62","#f8f48b","#fafab5"];Zi.primary=Zi[5];var Ji=["#1f2611","#2e3c10","#3e4f13","#536d13","#6f9412","#8bbb11","#a9d134","#c9e75d","#e4f88b","#f0fab5"];Ji.primary=Ji[5];var en=["#162312","#1d3712","#274916","#306317","#3c8618","#49aa19","#6abe39","#8fd460","#b2e58b","#d5f2bb"];en.primary=en[5];var tn=["#112123","#113536","#144848","#146262","#138585","#13a8a8","#33bcb7","#58d1c9","#84e2d8","#b2f1e8"];tn.primary=tn[5];var nn=["#111a2c","#112545","#15325b","#15417e","#1554ad","#1668dc","#3c89e8","#65a9f3","#8dc5f8","#b7dcfa"];nn.primary=nn[5];var sn=["#131629","#161d40","#1c2755","#203175","#263ea0","#2b4acb","#5273e0","#7f9ef3","#a8c1f8","#d2e0fa"];sn.primary=sn[5];var on=["#1a1325","#24163a","#301c4d","#3e2069","#51258f","#642ab5","#854eca","#ab7ae0","#cda8f0","#ebd7fa"];on.primary=on[5];var cn=["#291321","#40162f","#551c3b","#75204f","#a02669","#cb2b83","#e0529c","#f37fb7","#f8a8cc","#fad2e3"];cn.primary=cn[5];var rn=["#151515","#1f1f1f","#2d2d2d","#393939","#494949","#5a5a5a","#6a6a6a","#7b7b7b","#888888","#969696"];rn.primary=rn[5];var u1="[@ant-design/icons-angular]:";function J7(i){console.error(`${u1} ${i}.`)}function hn(i){e2()&&console.warn(`${u1} ${i}.`)}function an(i){return h2(i)[0]}function u2(i,t){switch(t){case"fill":return`${i}-fill`;case"outline":return`${i}-o`;case"twotone":return`${i}-twotone`;case void 0:return i;default:throw new Error(`${u1}Theme "${t}" is not a recognized theme!`)}}function ea(i,t,e,n){return`${u2(i,t)}-${e}-${n}`}function ta(i){return i==="o"?"outline":i}function ia(i){return i.endsWith("-fill")||i.endsWith("-o")||i.endsWith("-twotone")}function un(i){return typeof i=="object"&&typeof i.name=="string"&&(typeof i.theme=="string"||i.theme===void 0)&&typeof i.icon=="string"}function na(i){let t=i.split("-"),e=ta(t.splice(t.length-1,1)[0]);return{name:t.join("-"),theme:e,icon:""}}function sa(i){return i.cloneNode(!0)}function oa(i){return i.replace(/['"]#333['"]/g,'"primaryColor"').replace(/['"]#E6E6E6['"]/g,'"secondaryColor"').replace(/['"]#D9D9D9['"]/g,'"secondaryColor"').replace(/['"]#D8D8D8['"]/g,'"secondaryColor"')}function d2(i){let t=i.split(":");switch(t.length){case 1:return[i,""];case 2:return[t[1],t[0]];default:throw new Error(`${u1}The icon type ${i} is not valid!`)}}function ca(i){return d2(i)[1]!==""}function ra(){return new Error(`${u1}Type should have a namespace. Try "namespace:${name}".`)}function ln(i){return new Error(`${u1}the icon ${i} does not exist or is not registered.`)}function aa(){return J7('you need to import "HttpClientModule" to use dynamic importing.'),null}function la(i){return new Error(`${u1}The url "${i}" is unsafe.`)}function ha(){return new Error(`${u1}<svg> tag not found.`)}function ua(){return new Error(`${u1}Importing timeout error.`)}var da="__ant_icon_load",fa=new X("ant_icons"),e6=(()=>{class i{set twoToneColor({primaryColor:e,secondaryColor:n}){this._twoToneColorPalette.primaryColor=e,this._twoToneColorPalette.secondaryColor=n||an(e)}get twoToneColor(){return j({},this._twoToneColorPalette)}get _disableDynamicLoading(){return!1}constructor(e,n,s,o,c){this._rendererFactory=e,this._handler=n,this._document=s,this.sanitizer=o,this._antIcons=c,this.defaultTheme="outline",this._svgDefinitions=new Map,this._svgRenderedDefinitions=new Map,this._inProgressFetches=new Map,this._assetsUrlRoot="",this._twoToneColorPalette={primaryColor:"#333333",secondaryColor:"#E6E6E6"},this._enableJsonpLoading=!1,this._jsonpIconLoad$=new y,this._renderer=this._rendererFactory.createRenderer(null,null),this._handler&&(this._http=new yi(this._handler)),this._antIcons&&this.addIcon(...this._antIcons)}useJsonpLoading(){this._enableJsonpLoading?hn("You are already using jsonp loading."):(this._enableJsonpLoading=!0,window[da]=e=>{this._jsonpIconLoad$.next(e)})}changeAssetsSource(e){this._assetsUrlRoot=e.endsWith("/")?e:e+"/"}addIcon(...e){e.forEach(n=>{this._svgDefinitions.set(u2(n.name,n.theme),n)})}addIconLiteral(e,n){let[s,o]=d2(e);if(!o)throw ra();this.addIcon({name:e,icon:n})}clear(){this._svgDefinitions.clear(),this._svgRenderedDefinitions.clear()}getRenderedContent(e,n){let s=un(e)?e:this._svgDefinitions.get(e)||null;if(!s&&this._disableDynamicLoading)throw ln(e);return(s?Ze(s):this._loadIconDynamically(e)).pipe(He(c=>{if(!c)throw ln(e);return this._loadSVGFromCacheOrCreateNew(c,n)}))}getCachedIcons(){return this._svgDefinitions}_loadIconDynamically(e){if(!this._http&&!this._enableJsonpLoading)return Ze(aa());let n=this._inProgressFetches.get(e);if(!n){let[s,o]=d2(e),c=o?{name:e,icon:""}:na(s),r=this._enableJsonpLoading?".js":".svg",a=(o?`${this._assetsUrlRoot}assets/${o}/${s}`:`${this._assetsUrlRoot}assets/${c.theme}/${c.name}`)+r,l=this.sanitizer.sanitize(fi.URL,a);if(!l)throw la(a);n=(this._enableJsonpLoading?this._loadIconDynamicallyWithJsonp(c,l):this._http.get(l,{responseType:"text"}).pipe(He(u=>ne(j({},c),{icon:u})))).pipe(ui(u=>this.addIcon(u)),Y4(()=>this._inProgressFetches.delete(e)),ai(()=>Ze(null)),li()),this._inProgressFetches.set(e,n)}return n}_loadIconDynamicallyWithJsonp(e,n){return new q4(s=>{let o=this._document.createElement("script"),c=setTimeout(()=>{r(),s.error(ua())},6e3);o.src=n;function r(){o.parentNode.removeChild(o),clearTimeout(c)}this._document.body.appendChild(o),this._jsonpIconLoad$.pipe(Ie(a=>a.name===e.name&&a.theme===e.theme),$4(1)).subscribe(a=>{s.next(a),r()})})}_loadSVGFromCacheOrCreateNew(e,n){let s,o=n||this._twoToneColorPalette.primaryColor,c=an(o)||this._twoToneColorPalette.secondaryColor,r=e.theme==="twotone"?ea(e.name,e.theme,o,c):e.theme===void 0?e.name:u2(e.name,e.theme),a=this._svgRenderedDefinitions.get(r);return a?s=a.icon:(s=this._setSVGAttribute(this._colorizeSVGIcon(this._createSVGElementFromString(ca(e.name)?e.icon:oa(e.icon)),e.theme==="twotone",o,c)),this._svgRenderedDefinitions.set(r,ne(j({},e),{icon:s}))),sa(s)}_createSVGElementFromString(e){let n=this._document.createElement("div");n.innerHTML=e;let s=n.querySelector("svg");if(!s)throw ha;return s}_setSVGAttribute(e){return this._renderer.setAttribute(e,"width","1em"),this._renderer.setAttribute(e,"height","1em"),e}_colorizeSVGIcon(e,n,s,o){if(n){let c=e.childNodes,r=c.length;for(let a=0;a<r;a++){let l=c[a];l.getAttribute("fill")==="secondaryColor"?this._renderer.setAttribute(l,"fill",o):this._renderer.setAttribute(l,"fill",s)}}return this._renderer.setAttribute(e,"fill","currentColor"),e}static{this.\u0275fac=function(n){return new(n||i)(p(ht),p(s2,8),p(oe,8),p(o2),p(fa,8))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac})}}return i})();function va(i,t){return i.type===t.type&&i.theme===t.theme&&i.twoToneColor===t.twoToneColor}var dn=(()=>{class i{constructor(e,n,s){this._iconService=e,this._elementRef=n,this._renderer=s}ngOnChanges(e){(e.type||e.theme||e.twoToneColor)&&this._changeIcon()}_changeIcon(){return new Promise(e=>{if(!this.type){this._clearSVGElement(),e(null);return}let n=this._getSelfRenderMeta();this._iconService.getRenderedContent(this._parseIconType(this.type,this.theme),this.twoToneColor).subscribe(s=>{let o=this._getSelfRenderMeta();va(n,o)?(this._setSVGElement(s),e(s)):e(null)})})}_getSelfRenderMeta(){return{type:this.type,theme:this.theme,twoToneColor:this.twoToneColor}}_parseIconType(e,n){if(un(e))return e;{let[s,o]=d2(e);return o?e:ia(s)?(n&&hn(`'type' ${s} already gets a theme inside so 'theme' ${n} would be ignored`),s):u2(s,n||this._iconService.defaultTheme)}}_setSVGElement(e){this._clearSVGElement(),this._renderer.appendChild(this._elementRef.nativeElement,e)}_clearSVGElement(){let e=this._elementRef.nativeElement,n=e.childNodes,s=n.length;for(let o=s-1;o>=0;o--){let c=n[o];c.tagName?.toLowerCase()==="svg"&&this._renderer.removeChild(e,c)}}static{this.\u0275fac=function(n){return new(n||i)(g(e6),g(B),g(xe))}}static{this.\u0275dir=U({type:i,selectors:[["","antIcon",""]],inputs:{type:"type",theme:"theme",twoToneColor:"twoToneColor"},features:[K]})}}return i})();var fn={isTestMode:!1};var vn={},ma="[NG-ZORRO]:";function pa(...i){let t=i.reduce((e,n)=>e+n.toString(),"");return vn[t]?!1:(vn[t]=!0,!0)}function ga(i,...t){(fn.isTestMode||e2()&&pa(...t))&&i(...t)}var $t=(...i)=>ga((...t)=>console.warn(ma,...t),...i);var mn={name:"bars",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z" /></svg>'};var pn={name:"calendar",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z" /></svg>'};var gn={name:"caret-down",theme:"fill",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" /></svg>'},_n={name:"caret-down",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" /></svg>'};var zn={name:"caret-up",theme:"fill",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z" /></svg>'},yn={name:"caret-up",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z" /></svg>'};var bn={name:"check-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z" /></svg>'},wn={name:"check-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z" /><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /></svg>'};var Mn={name:"close-circle",theme:"outline",icon:'<svg fill-rule="evenodd" viewBox="64 64 896 896" focusable="false"><path d="M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z" /></svg>'};var Cn={name:"close",theme:"outline",icon:'<svg fill-rule="evenodd" viewBox="64 64 896 896" focusable="false"><path d="M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z" /></svg>'};var En={name:"check",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z" /></svg>'},Sn={name:"clock-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z" /></svg>'};var Vn={name:"copy",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z" /></svg>'};var Hn={name:"delete",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z" /></svg>'};var zm={name:"dashboard",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z" /></svg>'};var xn={name:"double-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z" /></svg>'},On={name:"double-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z" /></svg>'};var Tn={name:"down",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z" /></svg>'};var Ln={name:"close-circle",theme:"fill",icon:'<svg fill-rule="evenodd" viewBox="64 64 896 896" focusable="false"><path d="M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z" /></svg>'};var Dn={name:"ellipsis",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z" /></svg>'};var In={name:"edit",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z" /></svg>'};var An={name:"exclamation-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z" /></svg>'};var kn={name:"eye",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z" /></svg>'};var Bn={name:"file",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z" /></svg>'};var Rn={name:"file",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z" /></svg>'};var Nn={name:"filter",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z" /></svg>'};var ym={name:"form",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z" /><path d="M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z" /></svg>'};var Fn={name:"info-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z" /></svg>'};var Pn={name:"exclamation-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z" /></svg>'};var jn={name:"info-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z" /></svg>'};var Un={name:"left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z" /></svg>'};var Wn={name:"loading",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z" /></svg>'};var bm={name:"menu-fold",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z" /></svg>'};var wm={name:"menu-unfold",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z" /></svg>'};var qn={name:"paper-clip",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z" /></svg>'};var $n={name:"question-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z" /></svg>'};var Gn={name:"rotate-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><defs><style /></defs><path d="M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z" /><path d="M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z" /></svg>'};var Yn={name:"right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z" /></svg>'};var Xn={name:"search",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z" /></svg>'};var t6={name:"star",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z" /></svg>'};var Kn={name:"swap",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z" /></svg>'},Qn={name:"swap-right",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z" /></svg>'};var Zn={name:"up",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z" /></svg>'};var Jn={name:"rotate-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><defs><style /></defs><path d="M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z" /><path d="M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z" /></svg>'};var es={name:"vertical-align-top",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z" /></svg>'};var ts={name:"zoom-in",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z" /></svg>'};var is={name:"zoom-out",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z" /></svg>'},ns={name:"upload",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z" /></svg>'};var _a=["pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"];function Em(i){return _a.indexOf(i)!==-1}var f2=2,ss=.16,za=.05,ya=.05,ba=.15,ls=5,hs=4,wa=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function os({r:i,g:t,b:e}){let n=B1(i,t,e);return{h:n.h*360,s:n.s,v:n.v}}function v2({r:i,g:t,b:e}){return`#${R1(i,t,e,!1)}`}function Ma(i,t,e){let n=e/100;return{r:(t.r-i.r)*n+i.r,g:(t.g-i.g)*n+i.g,b:(t.b-i.b)*n+i.b}}function cs(i,t,e){let n;return Math.round(i.h)>=60&&Math.round(i.h)<=240?n=e?Math.round(i.h)-f2*t:Math.round(i.h)+f2*t:n=e?Math.round(i.h)+f2*t:Math.round(i.h)-f2*t,n<0?n+=360:n>=360&&(n-=360),n}function rs(i,t,e){if(i.h===0&&i.s===0)return i.s;let n;return e?n=i.s-ss*t:t===hs?n=i.s+ss:n=i.s+za*t,n>1&&(n=1),e&&t===ls&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function as(i,t,e){let n;return e?n=i.v+ya*t:n=i.v-ba*t,n>1&&(n=1),Number(n.toFixed(2))}function i6(i,t={}){let e=[],n=Ee(i);for(let s=ls;s>0;s-=1){let o=os(n),c=v2(Ee({h:cs(o,s,!0),s:rs(o,s,!0),v:as(o,s,!0)}));e.push(c)}e.push(v2(n));for(let s=1;s<=hs;s+=1){let o=os(n),c=v2(Ee({h:cs(o,s),s:rs(o,s),v:as(o,s)}));e.push(c)}return t.theme==="dark"?wa.map(({index:s,opacity:o})=>v2(Ma(Ee(t.backgroundColor||"#141414"),Ee(e[s]),o*100))):e}function us(i){return i!=null&&`${i}`!="false"}function n6(i){return Array.isArray(i)?i:[i]}function $(i){return i==null?"":typeof i=="string"?i:`${i}px`}function ds(i){return i instanceof B?i.nativeElement:i}function Dm(i,t){if(!i||!t||i.length!==t.length)return!1;let e=i.length;for(let n=0;n<e;n++)if(i[n]!==t[n])return!1;return!0}function Im(i){return typeof i<"u"&&i!==null}function Am(i){return typeof i>"u"||i===null}function km(i){return us(i)}function vs(i){return t2(i,0)}function ms(i){return $(i)}function Bm(i){i.stopPropagation(),i.preventDefault()}function Rm(i){if(!i.getClientRects().length)return{top:0,left:0};let t=i.getBoundingClientRect(),e=i.ownerDocument.defaultView;return{top:t.top+e.pageYOffset,left:t.left+e.pageXOffset}}function Nm(i,t,e){return(e-i)/(t-i)*100}function Fm(i){let t=i.toString(),e=t.indexOf(".");return e>=0?t.length-e-1:0}function Pm(i,t,e){return isNaN(i)||i<t?t:i>e?e:i}var Sa=typeof window<"u",jm=Sa&&window.mozInnerScreenX!=null;function ps(){let i=new y;return Promise.resolve().then(()=>i.next()),i.pipe($4(1))}function o6(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Va="rc-util-key";function gs({mark:i}={}){return i?i.startsWith("data-")?i:`data-${i}`:Va}function c6(i){return i.attachTo?i.attachTo:document.querySelector("head")||document.body}function fs(i,t={}){if(!o6())return null;let e=document.createElement("style");t.cspNonce&&(e.nonce=t.cspNonce),e.innerHTML=i;let n=c6(t),{firstChild:s}=n;return t.prepend&&n.prepend?n.prepend(e):t.prepend&&s?n.insertBefore(e,s):n.appendChild(e),e}var s6=new Map;function Ha(i,t={}){let e=c6(t);return Array.from(s6.get(e)?.children||[]).find(n=>n.tagName==="STYLE"&&n.getAttribute(gs(t))===i)}function _s(i,t,e={}){let n=c6(e);if(!s6.has(n)){let c=fs("",e),{parentNode:r}=c;s6.set(n,r),r.removeChild(c)}let s=Ha(t,e);if(s)return e.cspNonce&&s.nonce!==e.cspNonce&&(s.nonce=e.cspNonce),s.innerHTML!==i&&(s.innerHTML=i),s;let o=fs(i,e);return o?.setAttribute(gs(e),t),o}function Um(i,t,e){return{[`${i}-status-success`]:t==="success",[`${i}-status-warning`]:t==="warning",[`${i}-status-error`]:t==="error",[`${i}-status-validating`]:t==="validating",[`${i}-has-feedback`]:e}}var xa=new X("nz-config");var Oa=`-ant-${Date.now()}-${Math.random()}`;function Ta(i,t){let e={},n=(c,r)=>{let a=c.clone();return a=r?.(a)||a,a.toRgbString()},s=(c,r)=>{let a=new r2(c),l=i6(a.toRgbString());e[`${r}-color`]=n(a),e[`${r}-color-disabled`]=l[1],e[`${r}-color-hover`]=l[4],e[`${r}-color-active`]=l[7],e[`${r}-color-outline`]=a.clone().setAlpha(.2).toRgbString(),e[`${r}-color-deprecated-bg`]=l[1],e[`${r}-color-deprecated-border`]=l[3]};if(t.primaryColor){s(t.primaryColor,"primary");let c=new r2(t.primaryColor),r=i6(c.toRgbString());r.forEach((l,h)=>{e[`primary-${h+1}`]=l}),e["primary-color-deprecated-l-35"]=n(c,l=>l.lighten(35)),e["primary-color-deprecated-l-20"]=n(c,l=>l.lighten(20)),e["primary-color-deprecated-t-20"]=n(c,l=>l.tint(20)),e["primary-color-deprecated-t-50"]=n(c,l=>l.tint(50)),e["primary-color-deprecated-f-12"]=n(c,l=>l.setAlpha(l.getAlpha()*.12));let a=new r2(r[0]);e["primary-color-active-deprecated-f-30"]=n(a,l=>l.setAlpha(l.getAlpha()*.3)),e["primary-color-active-deprecated-d-02"]=n(a,l=>l.darken(2))}return t.successColor&&s(t.successColor,"success"),t.warningColor&&s(t.warningColor,"warning"),t.errorColor&&s(t.errorColor,"error"),t.infoColor&&s(t.infoColor,"info"),`
  :root {
    ${Object.keys(e).map(c=>`--${i}-${c}: ${e[c]};`).join(`
`)}
  }
  `.trim()}function zs(i,t,e){let n=Ta(i,t);o6()?_s(n,`${Oa}-dynamic-theme`,{cspNonce:e}):$t("NzConfigService: SSR do not support dynamic theme with css variables.")}var ys=function(i){return i!==void 0},bs="ant",ws=(()=>{class i{constructor(){this.configUpdated$=new y,this.config=V(xa,{optional:!0})||{},this.cspNonce=V(Q4,{optional:!0}),this.config.theme&&zs(this.getConfig().prefixCls?.prefixCls||bs,this.config.theme,this.cspNonce)}getConfig(){return this.config}getConfigForComponent(e){return this.config[e]}getConfigChangeEventForComponent(e){return this.configUpdated$.pipe(Ie(n=>n===e),G4(void 0))}set(e,n){this.config[e]=j(j({},this.config[e]),n),e==="theme"&&this.config.theme&&zs(this.getConfig().prefixCls?.prefixCls||bs,this.config.theme,this.cspNonce),this.configUpdated$.next(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Jm(){return function(t,e,n){let s=`$$__zorroConfigDecorator__${e}`;return Object.defineProperty(t,s,{configurable:!0,writable:!0,enumerable:!1}),{get(){let o=n?.get?n.get.bind(this)():this[s],c=(this.propertyAssignCounter?.[e]||0)>1,r=this.nzConfigService.getConfigForComponent(this._nzModuleName)?.[e];return c&&ys(o)?o:ys(r)?r:o},set(o){this.propertyAssignCounter=this.propertyAssignCounter||{},this.propertyAssignCounter[e]=(this.propertyAssignCounter[e]||0)+1,n?.set?n.set.bind(this)(o):this[s]=o},configurable:!0,enumerable:!0}}}var a6;try{a6=typeof Intl<"u"&&Intl.v8BreakIterator}catch{a6=!1}var pe=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?n2(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||a6)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(n){return new(n||i)(p(X4))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Gt;function Da(){if(Gt==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Gt=!0}))}finally{Gt=Gt||!1}return Gt}function cp(i){return Da()?i:!!i.capture}var N1;function Ms(){if(N1==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return N1=!1,N1;if("scrollBehavior"in document.documentElement.style)N1=!0;else{let i=Element.prototype.scrollTo;i?N1=!/\{\s*\[native code\]\s*\}/.test(i.toString()):N1=!1}}return N1}var r6;function Ia(){if(r6==null){let i=typeof document<"u"?document.head:null;r6=!!(i&&(i.createShadowRoot||i.attachShadow))}return r6}function rp(i){if(Ia()){let t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function m2(i){return i.composedPath?i.composedPath()[0]:i.target}function l6(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Aa=[mn,pn,zn,yn,gn,_n,bn,wn,En,Sn,Mn,Ln,Cn,Vn,Hn,xn,On,Tn,In,Dn,An,Pn,kn,Bn,Rn,Nn,Fn,jn,Un,Wn,qn,$n,Yn,Gn,Jn,t6,Xn,t6,ns,es,Zn,Kn,Qn,ts,is],Es=new X("nz_icons"),yp=new X("nz_icon_default_twotone_color"),Cs="#1890ff",Ss=(()=>{class i extends e6{get _disableDynamicLoading(){return!this.platform.isBrowser}ngOnDestroy(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}normalizeSvgElement(e){e.getAttribute("viewBox")||this._renderer.setAttribute(e,"viewBox","0 0 1024 1024"),(!e.getAttribute("width")||!e.getAttribute("height"))&&(this._renderer.setAttribute(e,"width","1em"),this._renderer.setAttribute(e,"height","1em")),e.getAttribute("fill")||this._renderer.setAttribute(e,"fill","currentColor")}fetchFromIconfont(e){let{scriptUrl:n}=e;if(this._document&&!this.iconfontCache.has(n)){let s=this._renderer.createElement("script");this._renderer.setAttribute(s,"src",n),this._renderer.setAttribute(s,"data-namespace",n.replace(/^(https?|http):/g,"")),this._renderer.appendChild(this._document.body,s),this.iconfontCache.add(n)}}createIconfontIcon(e){return this._createSVGElementFromString(`<svg><use xlink:href="${e}"></svg>`)}constructor(e,n,s,o){super(e,V(s2,{optional:!0}),V(oe),n,[...Aa,...V(Es,{optional:!0})||[]]),this.nzConfigService=s,this.platform=o,this.configUpdated$=new y,this.iconfontCache=new Set,this.subscription=null,this.onConfigChange(),this.configDefaultTwotoneColor(),this.configDefaultTheme()}onConfigChange(){this.subscription=this.nzConfigService.getConfigChangeEventForComponent("icon").subscribe(()=>{this.configDefaultTwotoneColor(),this.configDefaultTheme(),this.configUpdated$.next()})}configDefaultTheme(){let e=this.getConfig();this.defaultTheme=e.nzTheme||"outline"}configDefaultTwotoneColor(){let n=this.getConfig().nzTwotoneColor||Cs,s=Cs;n&&(n.startsWith("#")?s=n:$t("Twotone color must be a hex color!")),this.twoToneColor={primaryColor:s}}getConfig(){return this.nzConfigService.getConfigForComponent("icon")||{}}static{this.\u0275fac=function(n){return new(n||i)(p(ht),p(o2),p(ws),p(pe))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Vs=new X("nz_icons_patch"),Hs=(()=>{class i{constructor(e){this.rootIconService=e,this.patched=!1,this.extraIcons=V(Vs,{self:!0})}doPatch(){this.patched||(this.extraIcons.forEach(e=>this.rootIconService.addIcon(e)),this.patched=!0)}static{this.\u0275fac=function(n){return new(n||i)(p(Ss))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac})}}return i})(),p2=(()=>{class i extends dn{set nzSpin(e){this.spin=e}set nzType(e){this.type=e}set nzTheme(e){this.theme=e}set nzTwotoneColor(e){this.twoToneColor=e}set nzIconfont(e){this.iconfont=e}constructor(e,n,s,o,c){super(o,s,c),this.ngZone=e,this.changeDetectorRef=n,this.iconService=o,this.renderer=c,this.cacheClassName=null,this.nzRotate=0,this.spin=!1,this.destroy$=new y;let r=V(Hs,{optional:!0});r&&r.doPatch(),this.el=s.nativeElement}ngOnChanges(e){let{nzType:n,nzTwotoneColor:s,nzSpin:o,nzTheme:c,nzRotate:r}=e;n||s||o||c?this.changeIcon2():r?this.handleRotate(this.el.firstChild):this._setSVGElement(this.iconService.createIconfontIcon(`#${this.iconfont}`))}ngOnInit(){this.renderer.setAttribute(this.el,"class",`anticon ${this.el.className}`.trim())}ngAfterContentChecked(){if(!this.type){let e=this.el.children,n=e.length;if(!this.type&&e.length)for(;n--;){let s=e[n];s.tagName.toLowerCase()==="svg"&&this.iconService.normalizeSvgElement(s)}}}ngOnDestroy(){this.destroy$.next()}changeIcon2(){this.setClassName(),this.ngZone.runOutsideAngular(()=>{g1(this._changeIcon()).pipe(x(this.destroy$)).subscribe({next:e=>{this.ngZone.run(()=>{this.changeDetectorRef.detectChanges(),e&&(this.setSVGData(e),this.handleSpin(e),this.handleRotate(e))})},error:$t})})}handleSpin(e){this.spin||this.type==="loading"?this.renderer.addClass(e,"anticon-spin"):this.renderer.removeClass(e,"anticon-spin")}handleRotate(e){this.nzRotate?this.renderer.setAttribute(e,"style",`transform: rotate(${this.nzRotate}deg)`):this.renderer.removeAttribute(e,"style")}setClassName(){this.cacheClassName&&this.renderer.removeClass(this.el,this.cacheClassName),this.cacheClassName=`anticon-${this.type}`,this.renderer.addClass(this.el,this.cacheClassName)}setSVGData(e){this.renderer.setAttribute(e,"data-icon",this.type),this.renderer.setAttribute(e,"aria-hidden","true")}static{this.\u0275fac=function(n){return new(n||i)(g(fe),g(je),g(B),g(Ss),g(xe))}}static{this.\u0275dir=U({type:i,selectors:[["","nz-icon",""]],hostVars:2,hostBindings:function(n,s){n&2&&Q("anticon",!0)},inputs:{nzSpin:[2,"nzSpin","nzSpin",L],nzRotate:[2,"nzRotate","nzRotate",t2],nzType:"nzType",nzTheme:"nzTheme",nzTwotoneColor:"nzTwotoneColor",nzIconfont:"nzIconfont"},exportAs:["nzIcon"],standalone:!0,features:[me,r1,K]})}}return i})(),ka=i=>R3([{provide:Es,useValue:i}]),Ba=i=>[Hs,{provide:Vs,useValue:i}],g2=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[ka(e)]}}static forChild(e){return{ngModule:i,providers:[Ba(e)]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=R({})}}return i})();var Na=new X("cdk-dir-doc",{providedIn:"root",factory:Fa});function Fa(){return V(oe)}var Pa=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function ja(i){let t=i?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?Pa.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Te=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new G,e){let n=e.body?e.body.dir:null,s=e.documentElement?e.documentElement.dir:null;this.value=ja(n||s||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(n){return new(n||i)(p(Na,8))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Yt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=R({})}}return i})();var Ua=20,Ts=(()=>{class i{constructor(e,n,s){this._ngZone=e,this._platform=n,this._scrolled=new y,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=Ua){return this._platform.isBrowser?new q4(n=>{this._globalSubscription||this._addGlobalListener();let s=e>0?this._scrolled.pipe(O1(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ze()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){let s=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(Ie(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(e){let n=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,e)&&n.push(o)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let s=ds(n),o=e.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return ri(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(n){return new(n||i)(p(fe),p(pe),p(oe,8))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Wa=20,u6=(()=>{class i{constructor(e,n,s){this._platform=e,this._change=new y,this._changeListener=o=>{this._change.next(o)},this._document=s,n.runOutsideAngular(()=>{if(e.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:n,height:s}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+s,right:e.left+n,height:s,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,n=this._getWindow(),s=e.documentElement,o=s.getBoundingClientRect(),c=-o.top||e.body.scrollTop||n.scrollY||s.scrollTop||0,r=-o.left||e.body.scrollLeft||n.scrollX||s.scrollLeft||0;return{top:c,left:r}}change(e=Wa){return e>0?this._change.pipe(O1(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(n){return new(n||i)(p(pe),p(fe),p(oe,8))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Os=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=R({})}}return i})(),d6=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=R({imports:[Yt,Os,Yt,Os]})}}return i})();var Xt=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},f6=class extends Xt{constructor(t,e,n,s,o){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=s,this.projectableNodes=o}},Kt=class extends Xt{constructor(t,e,n,s){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=s}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},v6=class extends Xt{constructor(t){super(),this.element=t instanceof B?t.nativeElement:t}},m6=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof f6)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Kt)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof v6)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var _2=class extends m6{constructor(t,e,n,s,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=s,this.attachDomPortal=c=>{this._document;let r=c.element;r.parentNode;let a=this._document.createComment("dom-portal");r.parentNode.insertBefore(a,r),this.outletElement.appendChild(r),this._attachedPortal=c,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(r,a)})},this._document=o}attachComponentPortal(t){let n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),s;return t.viewContainerRef?(s=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>s.destroy())):(s=n.create(t.injector||this._defaultInjector||Ft.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=t,s}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(s=>this.outletElement.appendChild(s)),n.detectChanges(),this.setDisposeFn(()=>{let s=e.indexOf(n);s!==-1&&e.remove(s)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var Ls=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=R({})}}return i})();function Ds(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}var Is=Ms(),p6=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=$(-this._previousScrollPosition.left),t.style.top=$(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,n=t.style,s=e.style,o=n.scrollBehavior||"",c=s.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Is&&(n.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Is&&(n.scrollBehavior=o,s.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}};var g6=class{constructor(t,e,n,s){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Ie(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},z2=class{enable(){}disable(){}attach(){}};function _6(i,t){return t.some(e=>{let n=i.bottom<e.top,s=i.top>e.bottom,o=i.right<e.left,c=i.left>e.right;return n||s||o||c})}function As(i,t){return t.some(e=>{let n=i.top<e.top,s=i.bottom>e.bottom,o=i.left<e.left,c=i.right>e.right;return n||s||o||c})}var z6=class{constructor(t,e,n,s){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=s,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:s}=this._viewportRuler.getViewportSize();_6(e,[{width:n,height:s,bottom:s,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Ga=(()=>{class i{constructor(e,n,s,o){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=s,this.noop=()=>new z2,this.close=c=>new g6(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new p6(this._viewportRuler,this._document),this.reposition=c=>new z6(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=o}static{this.\u0275fac=function(n){return new(n||i)(p(Ts),p(u6),p(fe),p(oe))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),y2=class{constructor(t){if(this.scrollStrategy=new z2,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let n of e)t[n]!==void 0&&(this[n]=t[n])}}},W=class{constructor(t,e,n,s,o){this.offsetX=n,this.offsetY=s,this.panelClass=o,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}};var y6=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var Ps=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(n){return new(n||i)(p(oe))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ya=(()=>{class i extends Ps{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=s=>{let o=this._attachedOverlays;for(let c=o.length-1;c>-1;c--)if(o[c]._keydownEvents.observers.length>0){let r=o[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>r.next(s)):r.next(s);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(n){return new(n||i)(p(oe),p(fe,8))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Xa=(()=>{class i extends Ps{constructor(e,n,s){super(e),this._platform=n,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=m2(o)},this._clickListener=o=>{let c=m2(o),r=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;let a=this._attachedOverlays.slice();for(let l=a.length-1;l>-1;l--){let h=a[l];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(ks(h.overlayElement,c)||ks(h.overlayElement,r))break;let u=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(o)):u.next(o)}}}add(e){if(super.add(e),!this._isAttached){let n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(n){return new(n||i)(p(oe),p(pe),p(fe,8))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function ks(i,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,n=t;for(;n;){if(n===i)return!0;n=e&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var js=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||l6()){let s=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let n=this._document.createElement("div");n.classList.add(e),l6()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static{this.\u0275fac=function(n){return new(n||i)(p(oe),p(pe))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),b6=class{constructor(t,e,n,s,o,c,r,a,l,h=!1,u){this._portalOutlet=t,this._host=e,this._pane=n,this._config=s,this._ngZone=o,this._keyboardDispatcher=c,this._document=r,this._location=a,this._outsideClickDispatcher=l,this._animationsDisabled=h,this._injector=u,this._backdropElement=null,this._backdropClick=new y,this._attachments=new y,this._detachments=new y,this._locationChanges=p1.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new y,this._outsidePointerEvents=new y,this._renders=new y,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy,this._afterRenderRef=l1(()=>vi(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=mi(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=j(j({},this._config),t),this._updateElementSize()}setDirection(t){this._config=ne(j({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=$(this._config.width),t.height=$(this._config.height),t.minWidth=$(this._config.minWidth),t.minHeight=$(this._config.minHeight),t.maxWidth=$(this._config.maxWidth),t.maxHeight=$(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){let s=n6(e||[]).filter(o=>!!o);s.length&&(n?t.classList.add(...s):t.classList.remove(...s))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(x(Rt(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},Bs="cdk-overlay-connected-position-bounding-box",Ka=/([A-Za-z%]+)$/,w6=class{get positions(){return this._preferredPositions}constructor(t,e,n,s,o){this._viewportRuler=e,this._document=n,this._platform=s,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new y,this._resizeSubscription=p1.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(Bs),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,n=this._viewportRect,s=this._containerRect,o=[],c;for(let r of this._preferredPositions){let a=this._getOriginPoint(t,s,r),l=this._getOverlayPoint(a,e,r),h=this._getOverlayFit(l,e,n,r);if(h.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(r,a);return}if(this._canFitWithFlexibleDimensions(h,l,n)){o.push({position:r,origin:a,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(a,r)});continue}(!c||c.overlayFit.visibleArea<h.visibleArea)&&(c={overlayFit:h,overlayPoint:l,originPoint:a,position:r,overlayRect:e})}if(o.length){let r=null,a=-1;for(let l of o){let h=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);h>a&&(a=h,r=l)}this._isPushed=!1,this._applyPosition(r.position,r.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(c.position,c.originPoint);return}this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&F1(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Bs),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let s;if(n.originX=="center")s=t.left+t.width/2;else{let c=this._isRtl()?t.right:t.left,r=this._isRtl()?t.left:t.right;s=n.originX=="start"?c:r}e.left<0&&(s-=e.left);let o;return n.originY=="center"?o=t.top+t.height/2:o=n.originY=="top"?t.top:t.bottom,e.top<0&&(o-=e.top),{x:s,y:o}}_getOverlayPoint(t,e,n){let s;n.overlayX=="center"?s=-e.width/2:n.overlayX==="start"?s=this._isRtl()?-e.width:0:s=this._isRtl()?0:-e.width;let o;return n.overlayY=="center"?o=-e.height/2:o=n.overlayY=="top"?0:-e.height,{x:t.x+s,y:t.y+o}}_getOverlayFit(t,e,n,s){let o=Ns(e),{x:c,y:r}=t,a=this._getOffset(s,"x"),l=this._getOffset(s,"y");a&&(c+=a),l&&(r+=l);let h=0-c,u=c+o.width-n.width,d=0-r,f=r+o.height-n.height,m=this._subtractOverflows(o.width,h,u),w=this._subtractOverflows(o.height,d,f),J=m*w;return{visibleArea:J,isCompletelyWithinViewport:o.width*o.height===J,fitsInViewportVertically:w===o.height,fitsInViewportHorizontally:m==o.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){let s=n.bottom-e.y,o=n.right-e.x,c=Rs(this._overlayRef.getConfig().minHeight),r=Rs(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportVertically||c!=null&&c<=s,l=t.fitsInViewportHorizontally||r!=null&&r<=o;return a&&l}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let s=Ns(e),o=this._viewportRect,c=Math.max(t.x+s.width-o.width,0),r=Math.max(t.y+s.height-o.height,0),a=Math.max(o.top-n.top-t.y,0),l=Math.max(o.left-n.left-t.x,0),h=0,u=0;return s.width<=o.width?h=l||-c:h=t.x<this._viewportMargin?o.left-n.left-t.x:0,s.height<=o.height?u=a||-r:u=t.y<this._viewportMargin?o.top-n.top-t.y:0,this._previousPushAmount={x:h,y:u},{x:t.x+h,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!Qa(this._lastScrollVisibility,n)){let s=new y6(t,n);this._positionChanges.next(s)}this._lastScrollVisibility=n}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,s=t.overlayY;t.overlayX==="center"?n="center":this._isRtl()?n=t.overlayX==="start"?"right":"left":n=t.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${n} ${s}`}_calculateBoundingBoxRect(t,e){let n=this._viewportRect,s=this._isRtl(),o,c,r;if(e.overlayY==="top")c=t.y,o=n.height-c+this._viewportMargin;else if(e.overlayY==="bottom")r=n.height-t.y+this._viewportMargin*2,o=n.height-r+this._viewportMargin;else{let f=Math.min(n.bottom-t.y+n.top,t.y),m=this._lastBoundingBoxSize.height;o=f*2,c=t.y-f,o>m&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.y-m/2)}let a=e.overlayX==="start"&&!s||e.overlayX==="end"&&s,l=e.overlayX==="end"&&!s||e.overlayX==="start"&&s,h,u,d;if(l)d=n.width-t.x+this._viewportMargin*2,h=t.x-this._viewportMargin;else if(a)u=t.x,h=n.right-t.x;else{let f=Math.min(n.right-t.x+n.left,t.x),m=this._lastBoundingBoxSize.width;h=f*2,u=t.x-f,h>m&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-m/2)}return{top:c,left:u,bottom:r,right:d,width:h,height:o}}_setBoundingBoxStyles(t,e){let n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;s.height=$(n.height),s.top=$(n.top),s.bottom=$(n.bottom),s.width=$(n.width),s.left=$(n.left),s.right=$(n.right),e.overlayX==="center"?s.alignItems="center":s.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?s.justifyContent="center":s.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(s.maxHeight=$(o)),c&&(s.maxWidth=$(c))}this._lastBoundingBoxSize=n,F1(this._boundingBox.style,s)}_resetBoundingBoxStyles(){F1(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){F1(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let n={},s=this._hasExactPosition(),o=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(s){let h=this._viewportRuler.getViewportScrollPosition();F1(n,this._getExactOverlayY(e,t,h)),F1(n,this._getExactOverlayX(e,t,h))}else n.position="static";let r="",a=this._getOffset(e,"x"),l=this._getOffset(e,"y");a&&(r+=`translateX(${a}px) `),l&&(r+=`translateY(${l}px)`),n.transform=r.trim(),c.maxHeight&&(s?n.maxHeight=$(c.maxHeight):o&&(n.maxHeight="")),c.maxWidth&&(s?n.maxWidth=$(c.maxWidth):o&&(n.maxWidth="")),F1(this._pane.style,n)}_getExactOverlayY(t,e,n){let s={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),t.overlayY==="bottom"){let c=this._document.documentElement.clientHeight;s.bottom=`${c-(o.y+this._overlayRect.height)}px`}else s.top=$(o.y);return s}_getExactOverlayX(t,e,n){let s={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n));let c;if(this._isRtl()?c=t.overlayX==="end"?"left":"right":c=t.overlayX==="end"?"right":"left",c==="right"){let r=this._document.documentElement.clientWidth;s.right=`${r-(o.x+this._overlayRect.width)}px`}else s.left=$(o.x);return s}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:As(t,n),isOriginOutsideView:_6(t,n),isOverlayClipped:As(e,n),isOverlayOutsideView:_6(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,s)=>n-Math.max(s,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&n6(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof B)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}};function F1(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function Rs(i){if(typeof i!="number"&&i!=null){let[t,e]=i.split(Ka);return!e||e==="px"?parseFloat(t):null}return i||null}function Ns(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function Qa(i,t){return i===t?!0:i.isOriginClipped===t.isOriginClipped&&i.isOriginOutsideView===t.isOriginOutsideView&&i.isOverlayClipped===t.isOverlayClipped&&i.isOverlayOutsideView===t.isOverlayOutsideView}var Fs="cdk-global-overlay-wrapper",M6=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Fs),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:s,height:o,maxWidth:c,maxHeight:r}=n,a=(s==="100%"||s==="100vw")&&(!c||c==="100%"||c==="100vw"),l=(o==="100%"||o==="100vh")&&(!r||r==="100%"||r==="100vh"),h=this._xPosition,u=this._xOffset,d=this._overlayRef.getConfig().direction==="rtl",f="",m="",w="";a?w="flex-start":h==="center"?(w="center",d?m=u:f=u):d?h==="left"||h==="end"?(w="flex-end",f=u):(h==="right"||h==="start")&&(w="flex-start",m=u):h==="left"||h==="start"?(w="flex-start",f=u):(h==="right"||h==="end")&&(w="flex-end",m=u),t.position=this._cssPosition,t.marginLeft=a?"0":f,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=a?"0":m,e.justifyContent=w,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(Fs),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},Za=(()=>{class i{constructor(e,n,s,o){this._viewportRuler=e,this._document=n,this._platform=s,this._overlayContainer=o}global(){return new M6}flexibleConnectedTo(e){return new w6(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(n){return new(n||i)(p(u6),p(oe),p(pe),p(js))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ja=0,b2=(()=>{class i{constructor(e,n,s,o,c,r,a,l,h,u,d,f){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=c,this._injector=r,this._ngZone=a,this._document=l,this._directionality=h,this._location=u,this._outsideClickDispatcher=d,this._animationsModuleType=f}create(e){let n=this._createHostElement(),s=this._createPaneElement(n),o=this._createPortalOutlet(s),c=new y2(e);return c.direction=c.direction||this._directionality.value,new b6(o,n,s,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(di))}position(){return this._positionBuilder}_createPaneElement(e){let n=this._document.createElement("div");return n.id=`cdk-overlay-${Ja++}`,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(gi)),new _2(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(n){return new(n||i)(p(Ga),p(js),p(N3),p(Za),p(Ya),p(Ft),p(fe),p(oe),p(Te),p(_i),p(Xa),p(K4,8))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),el=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Us=new X("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=V(b2);return()=>i.scrollStrategies.reposition()}}),y1=(()=>{class i{constructor(e){this.elementRef=e}static{this.\u0275fac=function(n){return new(n||i)(g(B))}}static{this.\u0275dir=U({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}}return i})(),w2=(()=>{class i{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}constructor(e,n,s,o,c){this._overlay=e,this._dir=c,this._backdropSubscription=p1.EMPTY,this._attachSubscription=p1.EMPTY,this._detachSubscription=p1.EMPTY,this._positionSubscription=p1.EMPTY,this._disposeOnNavigation=!1,this._ngZone=V(fe),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new G,this.positionChange=new G,this.attach=new G,this.detach=new G,this.overlayKeydown=new G,this.overlayOutsideClick=new G,this._templatePortal=new Kt(n,s),this._scrollStrategyFactory=o,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=el);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===27&&!this.disableClose&&!Ds(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{let s=this._getOriginElement(),o=m2(n);(!s||s!==o&&!s.contains(o))&&this.overlayOutsideClick.next(n)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new y2({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(n.width=this.width),(this.height||this.height===0)&&(n.height=this.height),(this.minWidth||this.minWidth===0)&&(n.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){let n=this.positions.map(s=>({originX:s.originX,originY:s.originY,overlayX:s.overlayX,overlayY:s.overlayY,offsetX:s.offsetX||this.offsetX,offsetY:s.offsetY||this.offsetY,panelClass:s.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof y1?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof y1?this.origin.elementRef.nativeElement:this.origin instanceof B?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(hi(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)(g(b2),g(Ae),g(ut),g(Us),g(Te,8))}}static{this.\u0275dir=U({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",L],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",L],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",L],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",L],push:[2,"cdkConnectedOverlayPush","push",L],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",L]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[me,K]})}}return i})();function tl(i){return()=>i.scrollStrategies.reposition()}var il={provide:Us,deps:[b2],useFactory:tl},Ws=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=R({providers:[b2,il],imports:[Yt,Ls,d6,d6]})}}return i})();var C6=(()=>{class i{constructor(){this.animationType=V(K4,{optional:!0}),this.nzNoAnimation=!1}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=U({type:i,selectors:[["","nzNoAnimation",""]],hostVars:2,hostBindings:function(n,s){n&2&&Q("nz-animate-disabled",s.nzNoAnimation||s.animationType==="NoopAnimations")},inputs:{nzNoAnimation:[2,"nzNoAnimation","nzNoAnimation",L]},exportAs:["nzNoAnimation"],standalone:!0,features:[me]})}}return i})();var $s=new Set,P1,Gs=(()=>{class i{constructor(e,n){this._platform=e,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):sl}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&nl(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(n){return new(n||i)(p(pe),p(Q4,8))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function nl(i,t){if(!$s.has(i))try{P1||(P1=document.createElement("style"),t&&P1.setAttribute("nonce",t),P1.setAttribute("type","text/css"),document.head.appendChild(P1)),P1.sheet&&(P1.sheet.insertRule(`@media ${i} {body{ }}`,0),$s.add(i))}catch(e){console.error(e)}}function sl(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var E6=()=>{},cl=(()=>{class i{constructor(e,n){this.ngZone=e,this.rendererFactory2=n,this.resizeSource$=new y,this.listeners=0,this.disposeHandle=E6,this.handler=()=>{this.ngZone.run(()=>{this.resizeSource$.next()})},this.renderer=this.rendererFactory2.createRenderer(null,null)}ngOnDestroy(){this.handler=E6}subscribe(){return this.registerListener(),this.resizeSource$.pipe(O1(16),Y4(()=>this.unregisterListener()))}unsubscribe(){this.unregisterListener()}registerListener(){this.listeners===0&&this.ngZone.runOutsideAngular(()=>{this.disposeHandle=this.renderer.listen("window","resize",this.handler)}),this.listeners+=1}unregisterListener(){this.listeners-=1,this.listeners===0&&(this.disposeHandle(),this.disposeHandle=E6)}static{this.\u0275fac=function(n){return new(n||i)(p(fe),p(ht))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ys=function(i){return i.xxl="xxl",i.xl="xl",i.lg="lg",i.md="md",i.sm="sm",i.xs="xs",i}(Ys||{}),rl={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},Xs={xs:"(max-width: 479.98px)",sm:"(max-width: 575.98px)",md:"(max-width: 767.98px)",lg:"(max-width: 991.98px)",xl:"(max-width: 1199.98px)",xxl:"(max-width: 1599.98px)"},Ks=(()=>{class i{constructor(e,n){this.resizeService=e,this.mediaMatcher=n,this.destroy$=new y,this.resizeService.subscribe().pipe(x(this.destroy$)).subscribe(()=>{})}ngOnDestroy(){this.destroy$.next()}subscribe(e,n){if(n){let s=()=>this.matchMedia(e,!0);return this.resizeService.subscribe().pipe(He(s),L1(s()),T1((o,c)=>o[0]===c[0]),He(o=>o[1]))}else{let s=()=>this.matchMedia(e);return this.resizeService.subscribe().pipe(He(s),L1(s()),T1())}}matchMedia(e,n){let s=Ys.md,o={};return Object.keys(e).map(c=>{let r=c,a=this.mediaMatcher.matchMedia(rl[r]).matches;o[c]=a,a&&(s=r)}),n?[s,o]:s}static{this.\u0275fac=function(n){return new(n||i)(p(cl),p(Gs))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),M2=(()=>{class i extends y{ngOnDestroy(){this.next(),this.complete()}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Nt(i)))(s||i)}})()}static{this.\u0275prov=S({token:i,factory:i.\u0275fac})}}return i})();var A={top:new W({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topCenter:new W({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topLeft:new W({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),topRight:new W({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"}),right:new W({originX:"end",originY:"center"},{overlayX:"start",overlayY:"center"}),rightTop:new W({originX:"end",originY:"top"},{overlayX:"start",overlayY:"top"}),rightBottom:new W({originX:"end",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),bottom:new W({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomCenter:new W({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomLeft:new W({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),bottomRight:new W({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"}),left:new W({originX:"start",originY:"center"},{overlayX:"end",overlayY:"center"}),leftTop:new W({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"}),leftBottom:new W({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"})},Dg=[A.top,A.right,A.bottom,A.left],Ig=[A.bottomLeft,A.bottomRight,A.topLeft,A.topRight,A.topCenter,A.bottomCenter],Ag=[new W({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),new W({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"})],kg=[A.bottomLeft,new W({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"top"})];function S6(i){for(let t in A)if(i.connectionPair.originX===A[t].originX&&i.connectionPair.originY===A[t].originY&&i.connectionPair.overlayX===A[t].overlayX&&i.connectionPair.overlayY===A[t].overlayY)return t}var C2={bottomLeft:new W({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"},void 0,2),topLeft:new W({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},void 0,-2),bottomRight:new W({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"},void 0,2),topRight:new W({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"},void 0,-2)},Bg=[C2.bottomLeft,C2.topLeft,C2.bottomRight,C2.topRight],Rg=(()=>{class i{constructor(e,n){this.cdkConnectedOverlay=e,this.nzDestroyService=n,this.nzArrowPointAtCenter=!1,this.cdkConnectedOverlay.backdropClass="nz-overlay-transparent-backdrop",this.cdkConnectedOverlay.positionChange.pipe(x(this.nzDestroyService)).subscribe(s=>{this.nzArrowPointAtCenter&&this.updateArrowPosition(s)})}updateArrowPosition(e){let n=this.getOriginRect(),s=S6(e),o=0,c=0;s==="topLeft"||s==="bottomLeft"?o=n.width/2-14:s==="topRight"||s==="bottomRight"?o=-(n.width/2-14):s==="leftTop"||s==="rightTop"?c=n.height/2-10:(s==="leftBottom"||s==="rightBottom")&&(c=-(n.height/2-10)),(this.cdkConnectedOverlay.offsetX!==o||this.cdkConnectedOverlay.offsetY!==c)&&(this.cdkConnectedOverlay.offsetY=c,this.cdkConnectedOverlay.offsetX=o,this.cdkConnectedOverlay.overlayRef.updatePosition())}getFlexibleConnectedPositionStrategyOrigin(){return this.cdkConnectedOverlay.origin instanceof y1?this.cdkConnectedOverlay.origin.elementRef:this.cdkConnectedOverlay.origin}getOriginRect(){let e=this.getFlexibleConnectedPositionStrategyOrigin();if(e instanceof B)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,s=e.height||0;return{top:e.y,bottom:e.y+s,left:e.x,right:e.x+n,height:s,width:n}}static{this.\u0275fac=function(n){return new(n||i)(g(w2),g(M2))}}static{this.\u0275dir=U({type:i,selectors:[["","cdkConnectedOverlay","","nzConnectedOverlay",""]],inputs:{nzArrowPointAtCenter:[2,"nzArrowPointAtCenter","nzArrowPointAtCenter",L]},exportAs:["nzConnectedOverlay"],features:[Pe([M2]),me]})}}return i})(),Ng=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=R({})}}return i})();var re=(()=>{class i{static{this.SLOW="0.3s"}static{this.BASE="0.2s"}static{this.FAST="0.1s"}}return i})(),he=(()=>{class i{static{this.EASE_BASE_OUT="cubic-bezier(0.7, 0.3, 0.1, 1)"}static{this.EASE_BASE_IN="cubic-bezier(0.9, 0, 0.3, 0.7)"}static{this.EASE_OUT="cubic-bezier(0.215, 0.61, 0.355, 1)"}static{this.EASE_IN="cubic-bezier(0.55, 0.055, 0.675, 0.19)"}static{this.EASE_IN_OUT="cubic-bezier(0.645, 0.045, 0.355, 1)"}static{this.EASE_OUT_BACK="cubic-bezier(0.12, 0.4, 0.29, 1.46)"}static{this.EASE_IN_BACK="cubic-bezier(0.71, -0.46, 0.88, 0.6)"}static{this.EASE_IN_OUT_BACK="cubic-bezier(0.71, -0.46, 0.29, 1.46)"}static{this.EASE_OUT_CIRC="cubic-bezier(0.08, 0.82, 0.17, 1)"}static{this.EASE_IN_CIRC="cubic-bezier(0.6, 0.04, 0.98, 0.34)"}static{this.EASE_IN_OUT_CIRC="cubic-bezier(0.78, 0.14, 0.15, 0.86)"}static{this.EASE_OUT_QUINT="cubic-bezier(0.23, 1, 0.32, 1)"}static{this.EASE_IN_QUINT="cubic-bezier(0.755, 0.05, 0.855, 0.06)"}static{this.EASE_IN_OUT_QUINT="cubic-bezier(0.86, 0, 0.07, 1)"}}return i})(),Zs=we("collapseMotion",[Me("expanded",z({height:"*"})),Me("collapsed",z({height:0,overflow:"hidden"})),Me("hidden",z({height:0,overflow:"hidden",borderTopWidth:"0"})),D("expanded => collapsed",O(`150ms ${he.EASE_IN_OUT}`)),D("expanded => hidden",O(`150ms ${he.EASE_IN_OUT}`)),D("collapsed => expanded",O(`150ms ${he.EASE_IN_OUT}`)),D("hidden => expanded",O(`150ms ${he.EASE_IN_OUT}`))]),jg=we("treeCollapseMotion",[D("* => *",[$3("nz-tree-node:leave,nz-tree-builtin-node:leave",[z({overflow:"hidden"}),G3(0,[O(`150ms ${he.EASE_IN_OUT}`,z({height:0,opacity:0,"padding-bottom":0}))])],{optional:!0}),$3("nz-tree-node:enter,nz-tree-builtin-node:enter",[z({overflow:"hidden",height:0,opacity:0,"padding-bottom":0}),G3(0,[O(`150ms ${he.EASE_IN_OUT}`,z({overflow:"hidden",height:"*",opacity:"*","padding-bottom":"*"}))])],{optional:!0})])]),Ug=we("drawerMaskMotion",[D(":enter",[z({opacity:0}),O(`${re.SLOW}`,z({opacity:1}))]),D(":leave",[z({opacity:1}),O(`${re.SLOW}`,z({opacity:0}))])]),Wg=we("fadeMotion",[D("* => enter",[z({opacity:0}),O(`${re.BASE}`,z({opacity:1}))]),D("* => leave, :leave",[z({opacity:1}),O(`${re.BASE}`,z({opacity:0}))])]),qg=we("helpMotion",[D(":enter",[z({opacity:0,transform:"translateY(-5px)"}),O(`${re.SLOW} ${he.EASE_IN_OUT}`,z({opacity:1,transform:"translateY(0)"}))]),D(":leave",[z({opacity:1,transform:"translateY(0)"}),O(`${re.SLOW} ${he.EASE_IN_OUT}`,z({opacity:0,transform:"translateY(-5px)"}))])]),$g=we("moveUpMotion",[D("* => enter",[z({transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0}),O(`${re.BASE}`,z({transformOrigin:"0 0",transform:"translateY(0%)",opacity:1}))]),D("* => leave",[z({transformOrigin:"0 0",transform:"translateY(0%)",opacity:1}),O(`${re.BASE}`,z({transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0}))])]),Gg=we("notificationMotion",[Me("enterRight",z({opacity:1,transform:"translateX(0)"})),D("* => enterRight",[z({opacity:0,transform:"translateX(5%)"}),O("100ms linear")]),Me("enterLeft",z({opacity:1,transform:"translateX(0)"})),D("* => enterLeft",[z({opacity:0,transform:"translateX(-5%)"}),O("100ms linear")]),Me("enterTop",z({opacity:1,transform:"translateY(0)"})),D("* => enterTop",[z({opacity:0,transform:"translateY(-5%)"}),O("100ms linear")]),Me("enterBottom",z({opacity:1,transform:"translateY(0)"})),D("* => enterBottom",[z({opacity:0,transform:"translateY(5%)"}),O("100ms linear")]),Me("leave",z({opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"})),D("* => leave",[z({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"}),O("100ms linear")])]),al=`${re.BASE} ${he.EASE_OUT_QUINT}`,ll=`${re.BASE} ${he.EASE_IN_QUINT}`,Js=we("slideMotion",[Me("void",z({opacity:0,transform:"scaleY(0.8)"})),Me("enter",z({opacity:1,transform:"scaleY(1)"})),D("void => *",[O(al)]),D("* => void",[O(ll)])]),Yg=we("slideAlertMotion",[D(":leave",[z({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"}),O(`${re.SLOW} ${he.EASE_IN_OUT_CIRC}`,z({opacity:0,transform:"scaleY(0)",transformOrigin:"0% 0%"}))])]),Xg=we("tabSwitchMotion",[Me("leave",z({display:"none"})),D("* => enter",[z({display:"block",opacity:0}),O(re.SLOW)]),D("* => leave, :leave",[z({position:"absolute",top:0,left:0,width:"100%"}),O(re.SLOW,z({opacity:0})),z({display:"none"})])]),Kg=we("thumbMotion",[Me("from",z({transform:"translateX({{ transform }}px)",width:"{{ width }}px"}),{params:{transform:0,width:0}}),Me("to",z({transform:"translateX({{ transform }}px)",width:"{{ width }}px"}),{params:{transform:100,width:0}}),D("from => to",O(`300ms ${he.EASE_IN_OUT}`))]),eo=we("zoomBigMotion",[D("void => active",[z({opacity:0,transform:"scale(0.8)"}),O(`${re.BASE} ${he.EASE_OUT_CIRC}`,z({opacity:1,transform:"scale(1)"}))]),D("active => void",[z({opacity:1,transform:"scale(1)"}),O(`${re.BASE} ${he.EASE_IN_OUT_CIRC}`,z({opacity:0,transform:"scale(0.8)"}))])]),Qg=we("zoomBadgeMotion",[D(":enter",[z({opacity:0,transform:"scale(0) translate(50%, -50%)"}),O(`${re.SLOW} ${he.EASE_OUT_BACK}`,z({opacity:1,transform:"scale(1) translate(50%, -50%)"}))]),D(":leave",[z({opacity:1,transform:"scale(1) translate(50%, -50%)"}),O(`${re.SLOW} ${he.EASE_IN_BACK}`,z({opacity:0,transform:"scale(0) translate(50%, -50%)"}))])]);var H6=(()=>{class i{static ngTemplateContextGuard(e,n){return!0}recreateView(){this.viewContainer.clear();let e=this.nzStringTemplateOutlet instanceof Ae,n=e?this.nzStringTemplateOutlet:this.templateRef;this.embeddedViewRef=this.viewContainer.createEmbeddedView(n,e?this.nzStringTemplateOutletContext:this.context)}updateContext(){let n=this.nzStringTemplateOutlet instanceof Ae?this.nzStringTemplateOutletContext:this.context,s=this.embeddedViewRef.context;if(n)for(let o of Object.keys(n))s[o]=n[o]}constructor(e,n){this.viewContainer=e,this.templateRef=n,this.embeddedViewRef=null,this.context=new V6,this.nzStringTemplateOutletContext=null,this.nzStringTemplateOutlet=null}ngOnChanges(e){let{nzStringTemplateOutletContext:n,nzStringTemplateOutlet:s}=e,o=()=>{let r=!1;if(s)if(s.firstChange)r=!0;else{let h=s.previousValue instanceof Ae,u=s.currentValue instanceof Ae;r=h||u}return n&&(h=>{let u=Object.keys(h.previousValue||{}),d=Object.keys(h.currentValue||{});if(u.length===d.length){for(let f of d)if(u.indexOf(f)===-1)return!0;return!1}else return!0})(n)||r};s&&(this.context.$implicit=s.currentValue),o()?this.recreateView():this.updateContext()}static{this.\u0275fac=function(n){return new(n||i)(g(ut),g(Ae))}}static{this.\u0275dir=U({type:i,selectors:[["","nzStringTemplateOutlet",""]],inputs:{nzStringTemplateOutletContext:"nzStringTemplateOutletContext",nzStringTemplateOutlet:"nzStringTemplateOutlet"},exportAs:["nzStringTemplateOutlet"],standalone:!0,features:[K]})}}return i})(),V6=class{},x6=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=R({})}}return i})();var ul=["nz-menu-item",""],io=["*"],dl=["nz-submenu-inline-child",""];function fl(i,t){}var vl=["nz-submenu-none-inline-child",""];function ml(i,t){}var pl=["nz-submenu-title",""];function gl(i,t){if(i&1&&qe(0,"span",0),i&2){let e=ie();se("nzType",e.nzIcon)}}function _l(i,t){if(i&1&&(F3(0),Be(1,"span",4),U3(2),Re(),P3()),i&2){let e=ie();ve(2),W3(e.nzTitle)}}function zl(i,t){i&1&&qe(0,"span",5)}function yl(i,t){i&1&&qe(0,"span",6)}function bl(i,t){if(i&1&&(Be(0,"span",2),le(1,zl,1,0,"span",5)(2,yl,1,0,"span",6),Re()),i&2){let e,n=ie();ve(),ke((e=n.dir)==="rtl"?1:2)}}function wl(i,t){i&1&&qe(0,"span",3)}var Ml=["nz-submenu",""],Cl=[[["","title",""]],"*"],El=["[title]","*"];function Sl(i,t){i&1&&Oe(0)}function Vl(i,t){if(i&1&&qe(0,"div",3),i&2){let e=ie(),n=k1(6);se("mode",e.mode)("nzOpen",e.nzOpen)("@.disabled",!!(e.noAnimation!=null&&e.noAnimation.nzNoAnimation))("nzNoAnimation",e.noAnimation==null?null:e.noAnimation.nzNoAnimation)("menuClass",e.nzMenuClassName)("templateOutlet",n)}}function Hl(i,t){if(i&1){let e=dt();Be(0,"div",6),$e("subMenuMouseState",function(s){D1(e);let o=ie(2);return I1(o.setMouseEnterState(s))}),Re()}if(i&2){let e=ie(2),n=k1(6);se("theme",e.theme)("mode",e.mode)("nzOpen",e.nzOpen)("position",e.position)("nzDisabled",e.nzDisabled)("isMenuInsideDropDown",e.isMenuInsideDropDown)("templateOutlet",n)("menuClass",e.nzMenuClassName)("@.disabled",!!(e.noAnimation!=null&&e.noAnimation.nzNoAnimation))("nzNoAnimation",e.noAnimation==null?null:e.noAnimation.nzNoAnimation)}}function xl(i,t){if(i&1){let e=dt();le(0,Hl,1,10,"ng-template",5),$e("positionChange",function(s){D1(e);let o=ie();return I1(o.onPositionChange(s))})}if(i&2){let e=ie(),n=k1(1);se("cdkConnectedOverlayPositions",e.overlayPositions)("cdkConnectedOverlayOrigin",n)("cdkConnectedOverlayWidth",e.triggerWidth)("cdkConnectedOverlayOpen",e.nzOpen)("cdkConnectedOverlayTransformOriginOn",".ant-menu-submenu")}}function Ol(i,t){i&1&&Oe(0,1)}var Tl=["titleElement"],Ll=["nz-menu-group",""],Dl=["*",[["","title",""]]],Il=["*","[title]"];function Al(i,t){if(i&1&&(F3(0),U3(1),P3()),i&2){let e=ie();ve(),W3(e.nzTitle)}}function kl(i,t){i&1&&Oe(0,1)}var d1=new X("NzIsInDropDownMenuToken"),no=new X("NzMenuServiceLocalToken"),j1=(()=>{class i{constructor(){this.descendantMenuItemClick$=new y,this.childMenuItemClick$=new y,this.theme$=new We("light"),this.mode$=new We("vertical"),this.inlineIndent$=new We(24),this.isChildSubMenuOpen$=new We(!1)}onDescendantMenuItemClick(e){this.descendantMenuItemClick$.next(e)}onChildMenuItemClick(e){this.childMenuItemClick$.next(e)}setMode(e){this.mode$.next(e)}setTheme(e){this.theme$.next(e)}setInlineIndent(e){this.inlineIndent$.next(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac})}}return i})(),O6=(()=>{class i{onChildMenuItemClick(e){this.childMenuItemClick$.next(e)}setOpenStateWithoutDebounce(e){this.isCurrentSubMenuOpen$.next(e)}setMouseEnterTitleOrOverlayState(e){this.isMouseEnterTitleOrOverlay$.next(e)}constructor(e){this.nzMenuService=e,this.mode$=this.nzMenuService.mode$.pipe(He(c=>c==="inline"?"inline":c==="vertical"||this.nzHostSubmenuService?"vertical":"horizontal")),this.level=1,this.isMenuInsideDropDown=V(d1),this.isCurrentSubMenuOpen$=new We(!1),this.isChildSubMenuOpen$=new We(!1),this.isMouseEnterTitleOrOverlay$=new y,this.childMenuItemClick$=new y,this.destroy$=new y,this.nzHostSubmenuService=V(i,{optional:!0,skipSelf:!0}),this.nzHostSubmenuService&&(this.level=this.nzHostSubmenuService.level+1);let n=this.childMenuItemClick$.pipe(oi(()=>this.mode$),Ie(c=>c!=="inline"||this.isMenuInsideDropDown),G4(!1)),s=Rt(this.isMouseEnterTitleOrOverlay$,n);Bt([this.isChildSubMenuOpen$,s]).pipe(He(([c,r])=>c||r),O1(150),T1(),x(this.destroy$)).pipe(T1()).subscribe(c=>{this.setOpenStateWithoutDebounce(c),this.nzHostSubmenuService?this.nzHostSubmenuService.isChildSubMenuOpen$.next(c):this.nzMenuService.isChildSubMenuOpen$.next(c)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(n){return new(n||i)(p(j1))}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac})}}return i})(),so=(()=>{class i{clickMenuItem(e){this.nzDisabled?(e.preventDefault(),e.stopPropagation()):(this.nzMenuService.onDescendantMenuItemClick(this),this.nzSubmenuService?this.nzSubmenuService.onChildMenuItemClick(this):this.nzMenuService.onChildMenuItemClick(this))}setSelectedState(e){this.nzSelected=e,this.selected$.next(e)}updateRouterActive(){!this.listOfRouterLink||!this.router||!this.router.navigated||!this.nzMatchRouter||Promise.resolve().then(()=>{let e=this.hasActiveLinks();this.nzSelected!==e&&(this.nzSelected=e,this.setSelectedState(this.nzSelected),this.cdr.markForCheck())})}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.routerLink&&e(this.routerLink)||this.listOfRouterLink.some(e)}isLinkActive(e){return n=>e.isActive(n.urlTree||"",{paths:this.nzMatchRouterExact?"exact":"subset",queryParams:this.nzMatchRouterExact?"exact":"subset",fragment:"ignored",matrixParams:"ignored"})}constructor(e,n){this.nzMenuService=e,this.cdr=n,this.destroy$=new y,this.nzSubmenuService=V(O6,{optional:!0}),this.directionality=V(Te),this.routerLink=V(Y3,{optional:!0}),this.router=V(wi,{optional:!0}),this.isMenuInsideDropDown=V(d1),this.level=this.nzSubmenuService?this.nzSubmenuService.level+1:1,this.selected$=new y,this.inlinePaddingLeft=null,this.dir="ltr",this.nzDisabled=!1,this.nzSelected=!1,this.nzDanger=!1,this.nzMatchRouterExact=!1,this.nzMatchRouter=!1,this.router&&this.router.events.pipe(x(this.destroy$),Ie(s=>s instanceof bi)).subscribe(()=>{this.updateRouterActive()})}ngOnInit(){Bt([this.nzMenuService.mode$,this.nzMenuService.inlineIndent$]).pipe(x(this.destroy$)).subscribe(([e,n])=>{this.inlinePaddingLeft=e==="inline"?this.level*n:null}),this.dir=this.directionality.value,this.directionality.change?.pipe(x(this.destroy$)).subscribe(e=>{this.dir=e})}ngAfterContentInit(){this.listOfRouterLink.changes.pipe(x(this.destroy$)).subscribe(()=>this.updateRouterActive()),this.updateRouterActive()}ngOnChanges(e){e.nzSelected&&this.setSelectedState(this.nzSelected)}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static{this.\u0275fac=function(n){return new(n||i)(g(j1),g(je))}}static{this.\u0275cmp=ye({type:i,selectors:[["","nz-menu-item",""]],contentQueries:function(n,s,o){if(n&1&&a1(o,Y3,5),n&2){let c;Ne(c=Fe())&&(s.listOfRouterLink=c)}},hostVars:20,hostBindings:function(n,s){n&1&&$e("click",function(c){return s.clickMenuItem(c)}),n&2&&(A1("padding-left",s.dir==="rtl"?null:s.nzPaddingLeft||s.inlinePaddingLeft,"px")("padding-right",s.dir==="rtl"?s.nzPaddingLeft||s.inlinePaddingLeft:null,"px"),Q("ant-dropdown-menu-item",s.isMenuInsideDropDown)("ant-dropdown-menu-item-selected",s.isMenuInsideDropDown&&s.nzSelected)("ant-dropdown-menu-item-danger",s.isMenuInsideDropDown&&s.nzDanger)("ant-dropdown-menu-item-disabled",s.isMenuInsideDropDown&&s.nzDisabled)("ant-menu-item",!s.isMenuInsideDropDown)("ant-menu-item-selected",!s.isMenuInsideDropDown&&s.nzSelected)("ant-menu-item-danger",!s.isMenuInsideDropDown&&s.nzDanger)("ant-menu-item-disabled",!s.isMenuInsideDropDown&&s.nzDisabled))},inputs:{nzPaddingLeft:[2,"nzPaddingLeft","nzPaddingLeft",vs],nzDisabled:[2,"nzDisabled","nzDisabled",L],nzSelected:[2,"nzSelected","nzSelected",L],nzDanger:[2,"nzDanger","nzDanger",L],nzMatchRouterExact:[2,"nzMatchRouterExact","nzMatchRouterExact",L],nzMatchRouter:[2,"nzMatchRouter","nzMatchRouter",L]},exportAs:["nzMenuItem"],standalone:!0,features:[me,K,be],attrs:ul,ngContentSelectors:io,decls:2,vars:0,consts:[[1,"ant-menu-title-content"]],template:function(n,s){n&1&&(Ge(),Be(0,"span",0),Oe(1),Re())},encapsulation:2,changeDetection:0})}}return i})(),Bl=(()=>{class i{constructor(e,n,s){this.elementRef=e,this.renderer=n,this.directionality=s,this.templateOutlet=null,this.menuClass="",this.mode="vertical",this.nzOpen=!1,this.listOfCacheClassName=[],this.expandState="collapsed",this.dir="ltr",this.destroy$=new y}calcMotionState(){this.nzOpen?this.expandState="expanded":this.expandState="collapsed"}ngOnInit(){this.calcMotionState(),this.dir=this.directionality.value,this.directionality.change?.pipe(x(this.destroy$)).subscribe(e=>{this.dir=e})}ngOnChanges(e){let{mode:n,nzOpen:s,menuClass:o}=e;(n||s)&&this.calcMotionState(),o&&(this.listOfCacheClassName.length&&this.listOfCacheClassName.filter(c=>!!c).forEach(c=>{this.renderer.removeClass(this.elementRef.nativeElement,c)}),this.menuClass&&(this.listOfCacheClassName=this.menuClass.split(" "),this.listOfCacheClassName.filter(c=>!!c).forEach(c=>{this.renderer.addClass(this.elementRef.nativeElement,c)})))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(n){return new(n||i)(g(B),g(xe),g(Te))}}static{this.\u0275cmp=ye({type:i,selectors:[["","nz-submenu-inline-child",""]],hostAttrs:[1,"ant-menu","ant-menu-inline","ant-menu-sub"],hostVars:3,hostBindings:function(n,s){n&2&&(j3("@collapseMotion",s.expandState),Q("ant-menu-rtl",s.dir==="rtl"))},inputs:{templateOutlet:"templateOutlet",menuClass:"menuClass",mode:"mode",nzOpen:"nzOpen"},exportAs:["nzSubmenuInlineChild"],standalone:!0,features:[K,be],attrs:dl,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(n,s){n&1&&le(0,fl,0,0,"ng-template",0),n&2&&se("ngTemplateOutlet",s.templateOutlet)},dependencies:[jt],encapsulation:2,data:{animation:[Zs]},changeDetection:0})}}return i})(),Rl=(()=>{class i{constructor(e){this.directionality=e,this.menuClass="",this.theme="light",this.templateOutlet=null,this.isMenuInsideDropDown=!1,this.mode="vertical",this.position="right",this.nzDisabled=!1,this.nzOpen=!1,this.subMenuMouseState=new G,this.expandState="collapsed",this.dir="ltr",this.destroy$=new y}setMouseState(e){this.nzDisabled||this.subMenuMouseState.next(e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}calcMotionState(){this.nzOpen?this.mode==="horizontal"?this.expandState="bottom":this.mode==="vertical"&&(this.expandState="active"):this.expandState="collapsed"}ngOnInit(){this.calcMotionState(),this.dir=this.directionality.value,this.directionality.change?.pipe(x(this.destroy$)).subscribe(e=>{this.dir=e})}ngOnChanges(e){let{mode:n,nzOpen:s}=e;(n||s)&&this.calcMotionState()}static{this.\u0275fac=function(n){return new(n||i)(g(Te))}}static{this.\u0275cmp=ye({type:i,selectors:[["","nz-submenu-none-inline-child",""]],hostAttrs:[1,"ant-menu-submenu","ant-menu-submenu-popup"],hostVars:14,hostBindings:function(n,s){n&1&&$e("mouseenter",function(){return s.setMouseState(!0)})("mouseleave",function(){return s.setMouseState(!1)}),n&2&&(j3("@slideMotion",s.expandState)("@zoomBigMotion",s.expandState),Q("ant-menu-light",s.theme==="light")("ant-menu-dark",s.theme==="dark")("ant-menu-submenu-placement-bottom",s.mode==="horizontal")("ant-menu-submenu-placement-right",s.mode==="vertical"&&s.position==="right")("ant-menu-submenu-placement-left",s.mode==="vertical"&&s.position==="left")("ant-menu-submenu-rtl",s.dir==="rtl"))},inputs:{menuClass:"menuClass",theme:"theme",templateOutlet:"templateOutlet",isMenuInsideDropDown:"isMenuInsideDropDown",mode:"mode",position:"position",nzDisabled:"nzDisabled",nzOpen:"nzOpen"},outputs:{subMenuMouseState:"subMenuMouseState"},exportAs:["nzSubmenuNoneInlineChild"],standalone:!0,features:[K,be],attrs:vl,decls:2,vars:16,consts:[[3,"ngClass"],[3,"ngTemplateOutlet"]],template:function(n,s){n&1&&(Be(0,"div",0),le(1,ml,0,0,"ng-template",1),Re()),n&2&&(Q("ant-dropdown-menu",s.isMenuInsideDropDown)("ant-menu",!s.isMenuInsideDropDown)("ant-dropdown-menu-vertical",s.isMenuInsideDropDown)("ant-menu-vertical",!s.isMenuInsideDropDown)("ant-dropdown-menu-sub",s.isMenuInsideDropDown)("ant-menu-sub",!s.isMenuInsideDropDown)("ant-menu-rtl",s.dir==="rtl"),se("ngClass",s.menuClass),ve(),se("ngTemplateOutlet",s.templateOutlet))},dependencies:[zi,jt],encapsulation:2,data:{animation:[eo,Js]},changeDetection:0})}}return i})(),oo=(()=>{class i{constructor(e,n){this.cdr=e,this.directionality=n,this.nzIcon=null,this.nzTitle=null,this.isMenuInsideDropDown=!1,this.nzDisabled=!1,this.paddingLeft=null,this.mode="vertical",this.toggleSubMenu=new G,this.subMenuMouseState=new G,this.dir="ltr",this.destroy$=new y}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(x(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setMouseState(e){this.nzDisabled||this.subMenuMouseState.next(e)}clickTitle(){this.mode==="inline"&&!this.nzDisabled&&this.toggleSubMenu.emit()}static{this.\u0275fac=function(n){return new(n||i)(g(je),g(Te))}}static{this.\u0275cmp=ye({type:i,selectors:[["","nz-submenu-title",""]],hostVars:8,hostBindings:function(n,s){n&1&&$e("click",function(){return s.clickTitle()})("mouseenter",function(){return s.setMouseState(!0)})("mouseleave",function(){return s.setMouseState(!1)}),n&2&&(A1("padding-left",s.dir==="rtl"?null:s.paddingLeft,"px")("padding-right",s.dir==="rtl"?s.paddingLeft:null,"px"),Q("ant-dropdown-menu-submenu-title",s.isMenuInsideDropDown)("ant-menu-submenu-title",!s.isMenuInsideDropDown))},inputs:{nzIcon:"nzIcon",nzTitle:"nzTitle",isMenuInsideDropDown:"isMenuInsideDropDown",nzDisabled:"nzDisabled",paddingLeft:"paddingLeft",mode:"mode"},outputs:{toggleSubMenu:"toggleSubMenu",subMenuMouseState:"subMenuMouseState"},exportAs:["nzSubmenuTitle"],standalone:!0,features:[be],attrs:pl,ngContentSelectors:io,decls:5,vars:3,consts:[["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet"],[1,"ant-dropdown-menu-submenu-expand-icon"],[1,"ant-menu-submenu-arrow"],[1,"ant-menu-title-content"],["nz-icon","","nzType","left",1,"ant-dropdown-menu-submenu-arrow-icon"],["nz-icon","","nzType","right",1,"ant-dropdown-menu-submenu-arrow-icon"]],template:function(n,s){n&1&&(Ge(),le(0,gl,1,1,"span",0)(1,_l,3,1,"ng-container",1),Oe(2),le(3,bl,3,1,"span",2)(4,wl,1,0,"span",3)),n&2&&(ke(s.nzIcon?0:-1),ve(),se("nzStringTemplateOutlet",s.nzTitle),ve(2),ke(s.isMenuInsideDropDown?3:4))},dependencies:[g2,p2,x6,H6],encapsulation:2,changeDetection:0})}}return i})(),to=[A.rightTop,A.right,A.rightBottom,A.leftTop,A.left,A.leftBottom],Nl=[A.bottomLeft,A.bottomRight,A.topRight,A.topLeft],co=(()=>{class i{setOpenStateWithoutDebounce(e){this.nzSubmenuService.setOpenStateWithoutDebounce(e)}toggleSubMenu(){this.setOpenStateWithoutDebounce(!this.nzOpen)}setMouseEnterState(e){this.isActive=e,this.mode!=="inline"&&this.nzSubmenuService.setMouseEnterTitleOrOverlayState(e)}setTriggerWidth(){this.mode==="horizontal"&&this.platform.isBrowser&&this.cdkOverlayOrigin&&this.nzPlacement==="bottomLeft"&&(this.triggerWidth=this.cdkOverlayOrigin.nativeElement.getBoundingClientRect().width)}onPositionChange(e){let n=S6(e);n==="rightTop"||n==="rightBottom"||n==="right"?this.position="right":(n==="leftTop"||n==="leftBottom"||n==="left")&&(this.position="left")}constructor(e,n,s,o){this.nzMenuService=e,this.cdr=n,this.nzSubmenuService=s,this.platform=o,this.nzMenuClassName="",this.nzPaddingLeft=null,this.nzTitle=null,this.nzIcon=null,this.nzOpen=!1,this.nzDisabled=!1,this.nzPlacement="bottomLeft",this.nzOpenChange=new G,this.cdkOverlayOrigin=null,this.listOfNzSubMenuComponent=null,this.listOfNzMenuItemDirective=null,this.level=this.nzSubmenuService.level,this.destroy$=new y,this.position="right",this.triggerWidth=null,this.theme="light",this.mode="vertical",this.inlinePaddingLeft=null,this.overlayPositions=to,this.isSelected=!1,this.isActive=!1,this.dir="ltr",this.isMenuInsideDropDown=V(d1),this.noAnimation=V(C6,{optional:!0,host:!0}),this.directionality=V(Te)}ngOnInit(){this.nzMenuService.theme$.pipe(x(this.destroy$)).subscribe(e=>{this.theme=e,this.cdr.markForCheck()}),this.nzSubmenuService.mode$.pipe(x(this.destroy$)).subscribe(e=>{this.mode=e,e==="horizontal"?this.overlayPositions=[A[this.nzPlacement],...Nl]:e==="vertical"&&(this.overlayPositions=to),this.cdr.markForCheck()}),Bt([this.nzSubmenuService.mode$,this.nzMenuService.inlineIndent$]).pipe(x(this.destroy$)).subscribe(([e,n])=>{this.inlinePaddingLeft=e==="inline"?this.level*n:null,this.cdr.markForCheck()}),this.nzSubmenuService.isCurrentSubMenuOpen$.pipe(x(this.destroy$)).subscribe(e=>{this.isActive=e,e!==this.nzOpen&&(this.setTriggerWidth(),this.nzOpen=e,this.nzOpenChange.emit(this.nzOpen),this.cdr.markForCheck())}),this.dir=this.directionality.value,this.directionality.change?.pipe(x(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.markForCheck()})}ngAfterContentInit(){this.setTriggerWidth();let e=this.listOfNzMenuItemDirective,n=e.changes,s=Rt(n,...e.map(o=>o.selected$));n.pipe(L1(e),k3(()=>s),L1(!0),He(()=>e.some(o=>o.nzSelected)),x(this.destroy$)).subscribe(o=>{this.isSelected=o,this.cdr.markForCheck()})}ngOnChanges(e){let{nzOpen:n}=e;n&&(this.nzSubmenuService.setOpenStateWithoutDebounce(this.nzOpen),this.setTriggerWidth())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(n){return new(n||i)(g(j1),g(je),g(O6),g(pe))}}static{this.\u0275cmp=ye({type:i,selectors:[["","nz-submenu",""]],contentQueries:function(n,s,o){if(n&1&&(a1(o,i,5),a1(o,so,5)),n&2){let c;Ne(c=Fe())&&(s.listOfNzSubMenuComponent=c),Ne(c=Fe())&&(s.listOfNzMenuItemDirective=c)}},viewQuery:function(n,s){if(n&1&&J4(y1,7,B),n&2){let o;Ne(o=Fe())&&(s.cdkOverlayOrigin=o.first)}},hostVars:34,hostBindings:function(n,s){n&2&&Q("ant-dropdown-menu-submenu",s.isMenuInsideDropDown)("ant-dropdown-menu-submenu-disabled",s.isMenuInsideDropDown&&s.nzDisabled)("ant-dropdown-menu-submenu-open",s.isMenuInsideDropDown&&s.nzOpen)("ant-dropdown-menu-submenu-selected",s.isMenuInsideDropDown&&s.isSelected)("ant-dropdown-menu-submenu-vertical",s.isMenuInsideDropDown&&s.mode==="vertical")("ant-dropdown-menu-submenu-horizontal",s.isMenuInsideDropDown&&s.mode==="horizontal")("ant-dropdown-menu-submenu-inline",s.isMenuInsideDropDown&&s.mode==="inline")("ant-dropdown-menu-submenu-active",s.isMenuInsideDropDown&&s.isActive)("ant-menu-submenu",!s.isMenuInsideDropDown)("ant-menu-submenu-disabled",!s.isMenuInsideDropDown&&s.nzDisabled)("ant-menu-submenu-open",!s.isMenuInsideDropDown&&s.nzOpen)("ant-menu-submenu-selected",!s.isMenuInsideDropDown&&s.isSelected)("ant-menu-submenu-vertical",!s.isMenuInsideDropDown&&s.mode==="vertical")("ant-menu-submenu-horizontal",!s.isMenuInsideDropDown&&s.mode==="horizontal")("ant-menu-submenu-inline",!s.isMenuInsideDropDown&&s.mode==="inline")("ant-menu-submenu-active",!s.isMenuInsideDropDown&&s.isActive)("ant-menu-submenu-rtl",s.dir==="rtl")},inputs:{nzMenuClassName:"nzMenuClassName",nzPaddingLeft:"nzPaddingLeft",nzTitle:"nzTitle",nzIcon:"nzIcon",nzOpen:[2,"nzOpen","nzOpen",L],nzDisabled:[2,"nzDisabled","nzDisabled",L],nzPlacement:"nzPlacement"},outputs:{nzOpenChange:"nzOpenChange"},exportAs:["nzSubmenu"],standalone:!0,features:[Pe([O6]),me,K,be],attrs:Ml,ngContentSelectors:El,decls:7,vars:8,consts:[["origin","cdkOverlayOrigin"],["subMenuTemplate",""],["nz-submenu-title","","cdkOverlayOrigin","",3,"subMenuMouseState","toggleSubMenu","nzIcon","nzTitle","mode","nzDisabled","isMenuInsideDropDown","paddingLeft"],["nz-submenu-inline-child","",3,"mode","nzOpen","nzNoAnimation","menuClass","templateOutlet"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayPositions","cdkConnectedOverlayOrigin","cdkConnectedOverlayWidth","cdkConnectedOverlayOpen","cdkConnectedOverlayTransformOriginOn"],["cdkConnectedOverlay","",3,"positionChange","cdkConnectedOverlayPositions","cdkConnectedOverlayOrigin","cdkConnectedOverlayWidth","cdkConnectedOverlayOpen","cdkConnectedOverlayTransformOriginOn"],["nz-submenu-none-inline-child","",3,"subMenuMouseState","theme","mode","nzOpen","position","nzDisabled","isMenuInsideDropDown","templateOutlet","menuClass","nzNoAnimation"]],template:function(n,s){if(n&1){let o=dt();Ge(Cl),Be(0,"div",2,0),$e("subMenuMouseState",function(r){return D1(o),I1(s.setMouseEnterState(r))})("toggleSubMenu",function(){return D1(o),I1(s.toggleSubMenu())}),le(2,Sl,1,0),Re(),le(3,Vl,1,6,"div",3)(4,xl,1,5,null,4)(5,Ol,1,0,"ng-template",null,1,Pt)}n&2&&(se("nzIcon",s.nzIcon)("nzTitle",s.nzTitle)("mode",s.mode)("nzDisabled",s.nzDisabled)("isMenuInsideDropDown",s.isMenuInsideDropDown)("paddingLeft",s.nzPaddingLeft||s.inlinePaddingLeft),ve(2),ke(s.nzTitle?-1:2),ve(),ke(s.mode==="inline"?3:4))},dependencies:[oo,Bl,C6,Rl,Ws,w2,y1],encapsulation:2,changeDetection:0})}}return i})();function Fl(){let i=V(j1,{skipSelf:!0,optional:!0}),t=V(no);return i??t}function Pl(){return V(d1,{skipSelf:!0,optional:!0})??!1}var ro=(()=>{class i{setInlineCollapsed(e){this.nzInlineCollapsed=e,this.inlineCollapsed$.next(e)}updateInlineCollapse(){this.listOfNzMenuItemDirective&&(this.nzInlineCollapsed?(this.listOfOpenedNzSubMenuComponent=this.listOfNzSubMenuComponent.filter(e=>e.nzOpen),this.listOfNzSubMenuComponent.forEach(e=>e.setOpenStateWithoutDebounce(!1))):(this.listOfOpenedNzSubMenuComponent.forEach(e=>e.setOpenStateWithoutDebounce(!0)),this.listOfOpenedNzSubMenuComponent=[]))}constructor(e,n){this.nzMenuService=e,this.cdr=n,this.isMenuInsideDropDown=V(d1),this.nzInlineIndent=24,this.nzTheme="light",this.nzMode="vertical",this.nzInlineCollapsed=!1,this.nzSelectable=!this.isMenuInsideDropDown,this.nzClick=new G,this.actualMode="vertical",this.dir="ltr",this.inlineCollapsed$=new We(this.nzInlineCollapsed),this.mode$=new We(this.nzMode),this.destroy$=new y,this.listOfOpenedNzSubMenuComponent=[],this.directionality=V(Te)}ngOnInit(){Bt([this.inlineCollapsed$,this.mode$]).pipe(x(this.destroy$)).subscribe(([e,n])=>{this.actualMode=e?"vertical":n,this.nzMenuService.setMode(this.actualMode),this.cdr.markForCheck()}),this.nzMenuService.descendantMenuItemClick$.pipe(x(this.destroy$)).subscribe(e=>{this.nzClick.emit(e),this.nzSelectable&&!e.nzMatchRouter&&this.listOfNzMenuItemDirective.forEach(n=>n.setSelectedState(n===e))}),this.dir=this.directionality.value,this.directionality.change?.pipe(x(this.destroy$)).subscribe(e=>{this.dir=e,this.nzMenuService.setMode(this.actualMode),this.cdr.markForCheck()})}ngAfterContentInit(){this.inlineCollapsed$.pipe(x(this.destroy$)).subscribe(()=>{this.updateInlineCollapse(),this.cdr.markForCheck()})}ngOnChanges(e){let{nzInlineCollapsed:n,nzInlineIndent:s,nzTheme:o,nzMode:c}=e;n&&this.inlineCollapsed$.next(this.nzInlineCollapsed),s&&this.nzMenuService.setInlineIndent(this.nzInlineIndent),o&&this.nzMenuService.setTheme(this.nzTheme),c&&(this.mode$.next(this.nzMode),!e.nzMode.isFirstChange()&&this.listOfNzSubMenuComponent&&this.listOfNzSubMenuComponent.forEach(r=>r.setOpenStateWithoutDebounce(!1)))}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static{this.\u0275fac=function(n){return new(n||i)(g(j1),g(je))}}static{this.\u0275dir=U({type:i,selectors:[["","nz-menu",""]],contentQueries:function(n,s,o){if(n&1&&(a1(o,so,5),a1(o,co,5)),n&2){let c;Ne(c=Fe())&&(s.listOfNzMenuItemDirective=c),Ne(c=Fe())&&(s.listOfNzSubMenuComponent=c)}},hostVars:34,hostBindings:function(n,s){n&2&&Q("ant-dropdown-menu",s.isMenuInsideDropDown)("ant-dropdown-menu-root",s.isMenuInsideDropDown)("ant-dropdown-menu-light",s.isMenuInsideDropDown&&s.nzTheme==="light")("ant-dropdown-menu-dark",s.isMenuInsideDropDown&&s.nzTheme==="dark")("ant-dropdown-menu-vertical",s.isMenuInsideDropDown&&s.actualMode==="vertical")("ant-dropdown-menu-horizontal",s.isMenuInsideDropDown&&s.actualMode==="horizontal")("ant-dropdown-menu-inline",s.isMenuInsideDropDown&&s.actualMode==="inline")("ant-dropdown-menu-inline-collapsed",s.isMenuInsideDropDown&&s.nzInlineCollapsed)("ant-menu",!s.isMenuInsideDropDown)("ant-menu-root",!s.isMenuInsideDropDown)("ant-menu-light",!s.isMenuInsideDropDown&&s.nzTheme==="light")("ant-menu-dark",!s.isMenuInsideDropDown&&s.nzTheme==="dark")("ant-menu-vertical",!s.isMenuInsideDropDown&&s.actualMode==="vertical")("ant-menu-horizontal",!s.isMenuInsideDropDown&&s.actualMode==="horizontal")("ant-menu-inline",!s.isMenuInsideDropDown&&s.actualMode==="inline")("ant-menu-inline-collapsed",!s.isMenuInsideDropDown&&s.nzInlineCollapsed)("ant-menu-rtl",s.dir==="rtl")},inputs:{nzInlineIndent:"nzInlineIndent",nzTheme:"nzTheme",nzMode:"nzMode",nzInlineCollapsed:[2,"nzInlineCollapsed","nzInlineCollapsed",L],nzSelectable:[2,"nzSelectable","nzSelectable",L]},outputs:{nzClick:"nzClick"},exportAs:["nzMenu"],standalone:!0,features:[Pe([{provide:no,useClass:j1},{provide:j1,useFactory:Fl},{provide:d1,useFactory:Pl}]),me,K]})}}return i})();function jl(){return V(d1,{optional:!0,skipSelf:!0})??!1}var Ul=(()=>{class i{constructor(e,n){this.elementRef=e,this.renderer=n,this.isMenuInsideDropDown=V(d1);let s=this.isMenuInsideDropDown?"ant-dropdown-menu-item-group":"ant-menu-item-group";this.renderer.addClass(e.nativeElement,s)}ngAfterViewInit(){let e=this.titleElement.nativeElement.nextElementSibling;if(e){let n=this.isMenuInsideDropDown?"ant-dropdown-menu-item-group-list":"ant-menu-item-group-list";this.renderer.addClass(e,n)}}static{this.\u0275fac=function(n){return new(n||i)(g(B),g(xe))}}static{this.\u0275cmp=ye({type:i,selectors:[["","nz-menu-group",""]],viewQuery:function(n,s){if(n&1&&J4(Tl,5),n&2){let o;Ne(o=Fe())&&(s.titleElement=o.first)}},inputs:{nzTitle:"nzTitle"},exportAs:["nzMenuGroup"],standalone:!0,features:[Pe([{provide:d1,useFactory:jl}]),be],attrs:Ll,ngContentSelectors:Il,decls:5,vars:6,consts:[["titleElement",""],[4,"nzStringTemplateOutlet"]],template:function(n,s){n&1&&(Ge(Dl),Be(0,"div",null,0),le(2,Al,2,1,"ng-container",1)(3,kl,1,0),Re(),Oe(4)),n&2&&(Q("ant-menu-item-group-title",!s.isMenuInsideDropDown)("ant-dropdown-menu-item-group-title",s.isMenuInsideDropDown),ve(2),se("nzStringTemplateOutlet",s.nzTitle),ve(),ke(s.nzTitle?-1:3))},dependencies:[x6,H6],encapsulation:2,changeDetection:0})}}return i})();var V_=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=R({imports:[co,Ul,oo]})}}return i})();var E2=["*"],Wl=["nz-sider-trigger",""];function ql(i,t){}function $l(i,t){if(i&1&&le(0,ql,0,0,"ng-template",2),i&2){let e=ie(),n=k1(5);se("ngTemplateOutlet",e.nzZeroTrigger||n)}}function Gl(i,t){}function Yl(i,t){if(i&1&&le(0,Gl,0,0,"ng-template",2),i&2){let e=ie(),n=k1(3);se("ngTemplateOutlet",e.nzTrigger||n)}}function Xl(i,t){if(i&1&&qe(0,"span",3),i&2){let e=ie(2);se("nzType",e.nzCollapsed?"left":"right")}}function Kl(i,t){if(i&1&&qe(0,"span",3),i&2){let e=ie(2);se("nzType",e.nzCollapsed?"right":"left")}}function Ql(i,t){if(i&1&&le(0,Xl,1,1,"span",3)(1,Kl,1,1,"span",3),i&2){let e=ie();ke(e.nzReverseArrow?0:1)}}function Zl(i,t){i&1&&qe(0,"span",4)}function Jl(i,t){if(i&1){let e=dt();Be(0,"div",2),$e("click",function(){D1(e);let s=ie();return I1(s.setCollapsed(!s.nzCollapsed))}),Re()}if(i&2){let e=ie();se("matchBreakPoint",e.matchBreakPoint)("nzCollapsedWidth",e.nzCollapsedWidth)("nzCollapsed",e.nzCollapsed)("nzBreakpoint",e.nzBreakpoint)("nzReverseArrow",e.nzReverseArrow)("nzTrigger",e.nzTrigger)("nzZeroTrigger",e.nzZeroTrigger)("siderWidth",e.widthSetting)}}var q_=(()=>{class i{constructor(e,n){this.elementRef=e,this.renderer=n,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-content")}static{this.\u0275fac=function(n){return new(n||i)(g(B),g(xe))}}static{this.\u0275cmp=ye({type:i,selectors:[["nz-content"]],exportAs:["nzContent"],standalone:!0,features:[be],ngContentSelectors:E2,decls:1,vars:0,template:function(n,s){n&1&&(Ge(),Oe(0))},encapsulation:2,changeDetection:0})}}return i})();var $_=(()=>{class i{constructor(e,n){this.elementRef=e,this.renderer=n,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-header")}static{this.\u0275fac=function(n){return new(n||i)(g(B),g(xe))}}static{this.\u0275cmp=ye({type:i,selectors:[["nz-header"]],exportAs:["nzHeader"],standalone:!0,features:[be],ngContentSelectors:E2,decls:1,vars:0,template:function(n,s){n&1&&(Ge(),Oe(0))},encapsulation:2,changeDetection:0})}}return i})(),ao=(()=>{class i{constructor(){this.nzCollapsed=!1,this.nzReverseArrow=!1,this.nzZeroTrigger=null,this.nzTrigger=void 0,this.matchBreakPoint=!1,this.nzCollapsedWidth=null,this.siderWidth=null,this.nzBreakpoint=null,this.isZeroTrigger=!1,this.isNormalTrigger=!1}updateTriggerType(){this.isZeroTrigger=this.nzCollapsedWidth===0&&(this.nzBreakpoint&&this.matchBreakPoint||!this.nzBreakpoint),this.isNormalTrigger=this.nzCollapsedWidth!==0}ngOnInit(){this.updateTriggerType()}ngOnChanges(){this.updateTriggerType()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ye({type:i,selectors:[["","nz-sider-trigger",""]],hostVars:10,hostBindings:function(n,s){n&2&&(A1("width",s.isNormalTrigger?s.siderWidth:null),Q("ant-layout-sider-trigger",s.isNormalTrigger)("ant-layout-sider-zero-width-trigger",s.isZeroTrigger)("ant-layout-sider-zero-width-trigger-right",s.isZeroTrigger&&s.nzReverseArrow)("ant-layout-sider-zero-width-trigger-left",s.isZeroTrigger&&!s.nzReverseArrow))},inputs:{nzCollapsed:"nzCollapsed",nzReverseArrow:"nzReverseArrow",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",matchBreakPoint:"matchBreakPoint",nzCollapsedWidth:"nzCollapsedWidth",siderWidth:"siderWidth",nzBreakpoint:"nzBreakpoint"},exportAs:["nzSiderTrigger"],standalone:!0,features:[K,be],attrs:Wl,decls:6,vars:2,consts:[["defaultTrigger",""],["defaultZeroTrigger",""],[3,"ngTemplateOutlet"],["nz-icon","",3,"nzType"],["nz-icon","","nzType","bars"]],template:function(n,s){n&1&&le(0,$l,1,1,null,2)(1,Yl,1,1,null,2)(2,Ql,2,1,"ng-template",null,0,Pt)(4,Zl,1,0,"ng-template",null,1,Pt),n&2&&(ke(s.isZeroTrigger?0:-1),ve(),ke(s.isNormalTrigger?1:-1))},dependencies:[jt,g2,p2],encapsulation:2,changeDetection:0})}}return i})(),lo=(()=>{class i{updateStyleMap(){this.widthSetting=this.nzCollapsed?`${this.nzCollapsedWidth}px`:ms(this.nzWidth),this.flexSetting=`0 0 ${this.widthSetting}`,this.cdr.markForCheck()}updateMenuInlineCollapsed(){this.nzMenuDirective&&this.nzMenuDirective.nzMode==="inline"&&this.nzCollapsedWidth!==0&&this.nzMenuDirective.setInlineCollapsed(this.nzCollapsed)}setCollapsed(e){e!==this.nzCollapsed&&(this.nzCollapsed=e,this.nzCollapsedChange.emit(e),this.updateMenuInlineCollapsed(),this.updateStyleMap(),this.cdr.markForCheck())}constructor(e,n,s){this.platform=e,this.cdr=n,this.breakpointService=s,this.destroy$=new y,this.nzMenuDirective=null,this.nzCollapsedChange=new G,this.nzWidth=200,this.nzTheme="dark",this.nzCollapsedWidth=80,this.nzBreakpoint=null,this.nzZeroTrigger=null,this.nzTrigger=void 0,this.nzReverseArrow=!1,this.nzCollapsible=!1,this.nzCollapsed=!1,this.matchBreakPoint=!1,this.flexSetting=null,this.widthSetting=null}ngOnInit(){this.updateStyleMap(),this.platform.isBrowser&&this.breakpointService.subscribe(Xs,!0).pipe(x(this.destroy$)).subscribe(e=>{let n=this.nzBreakpoint;n&&ps().subscribe(()=>{this.matchBreakPoint=!e[n],this.setCollapsed(this.matchBreakPoint),this.cdr.markForCheck()})})}ngOnChanges(e){let{nzCollapsed:n,nzCollapsedWidth:s,nzWidth:o}=e;(n||s||o)&&this.updateStyleMap(),n&&this.updateMenuInlineCollapsed()}ngAfterContentInit(){this.updateMenuInlineCollapsed()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static{this.\u0275fac=function(n){return new(n||i)(g(pe),g(je),g(Ks))}}static{this.\u0275cmp=ye({type:i,selectors:[["nz-sider"]],contentQueries:function(n,s,o){if(n&1&&a1(o,ro,5),n&2){let c;Ne(c=Fe())&&(s.nzMenuDirective=c.first)}},hostAttrs:[1,"ant-layout-sider"],hostVars:18,hostBindings:function(n,s){n&2&&(A1("flex",s.flexSetting)("max-width",s.widthSetting)("min-width",s.widthSetting)("width",s.widthSetting),Q("ant-layout-sider-zero-width",s.nzCollapsed&&s.nzCollapsedWidth===0)("ant-layout-sider-light",s.nzTheme==="light")("ant-layout-sider-dark",s.nzTheme==="dark")("ant-layout-sider-collapsed",s.nzCollapsed)("ant-layout-sider-has-trigger",s.nzCollapsible&&s.nzTrigger!==null))},inputs:{nzWidth:"nzWidth",nzTheme:"nzTheme",nzCollapsedWidth:"nzCollapsedWidth",nzBreakpoint:"nzBreakpoint",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",nzReverseArrow:[2,"nzReverseArrow","nzReverseArrow",L],nzCollapsible:[2,"nzCollapsible","nzCollapsible",L],nzCollapsed:[2,"nzCollapsed","nzCollapsed",L]},outputs:{nzCollapsedChange:"nzCollapsedChange"},exportAs:["nzSider"],standalone:!0,features:[me,K,be],ngContentSelectors:E2,decls:3,vars:1,consts:[[1,"ant-layout-sider-children"],["nz-sider-trigger","",3,"matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth"],["nz-sider-trigger","",3,"click","matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth"]],template:function(n,s){n&1&&(Ge(),Be(0,"div",0),Oe(1),Re(),le(2,Jl,1,8,"div",1)),n&2&&(ve(2),ke(s.nzCollapsible&&s.nzTrigger!==null?2:-1))},dependencies:[ao],encapsulation:2,changeDetection:0})}}return i})(),G_=(()=>{class i{constructor(e){this.directionality=e,this.dir="ltr",this.destroy$=new y}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(x(this.destroy$)).subscribe(e=>{this.dir=e})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(n){return new(n||i)(g(Te))}}static{this.\u0275cmp=ye({type:i,selectors:[["nz-layout"]],contentQueries:function(n,s,o){if(n&1&&a1(o,lo,4),n&2){let c;Ne(c=Fe())&&(s.listOfNzSiderComponent=c)}},hostAttrs:[1,"ant-layout"],hostVars:4,hostBindings:function(n,s){n&2&&Q("ant-layout-rtl",s.dir==="rtl")("ant-layout-has-sider",s.listOfNzSiderComponent.length>0)},exportAs:["nzLayout"],standalone:!0,features:[be],ngContentSelectors:E2,decls:1,vars:0,template:function(n,s){n&1&&(Ge(),Oe(0))},encapsulation:2,changeDetection:0})}}return i})(),Y_=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=R({imports:[lo,ao]})}}return i})();var S2={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var v=function(i,t){if(!i)throw q1(t)},q1=function(i){return new Error("Firebase Database ("+S2.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};var uo=function(i){let t=[],e=0;for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},e9=function(i){let t=[],e=0,n=0;for(;e<i.length;){let s=i[e++];if(s<128)t[n++]=String.fromCharCode(s);else if(s>191&&s<224){let o=i[e++];t[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){let o=i[e++],c=i[e++],r=i[e++],a=((s&7)<<18|(o&63)<<12|(c&63)<<6|r&63)-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(a&1023))}else{let o=i[e++],c=i[e++];t[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return t.join("")},H2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<i.length;s+=3){let o=i[s],c=s+1<i.length,r=c?i[s+1]:0,a=s+2<i.length,l=a?i[s+2]:0,h=o>>2,u=(o&3)<<4|r>>4,d=(r&15)<<2|l>>6,f=l&63;a||(f=64,c||(d=64)),n.push(e[h],e[u],e[d],e[f])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(uo(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):e9(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<i.length;){let o=e[i.charAt(s++)],r=s<i.length?e[i.charAt(s)]:0;++s;let l=s<i.length?e[i.charAt(s)]:64;++s;let u=s<i.length?e[i.charAt(s)]:64;if(++s,o==null||r==null||l==null||u==null)throw new T6;let d=o<<2|r>>4;if(n.push(d),l!==64){let f=r<<4&240|l>>2;if(n.push(f),u!==64){let m=l<<6&192|u;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},T6=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},D6=function(i){let t=uo(i);return H2.encodeByteArray(t,!0)},Qt=function(i){return D6(i).replace(/\./g,"")},L6=function(i){try{return H2.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function fo(i){return vo(void 0,i)}function vo(i,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let e=t;return new Date(e.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return t}for(let e in t)!t.hasOwnProperty(e)||!t9(e)||(i[e]=vo(i[e],t[e]));return i}function t9(i){return i!=="__proto__"}function i9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var n9=()=>i9().__FIREBASE_DEFAULTS__,s9=()=>{if(typeof process>"u"||typeof process.env>"u")return;let i=process.env.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},o9=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=i&&L6(i[1]);return t&&JSON.parse(t)},mo=()=>{try{return n9()||s9()||o9()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},c9=i=>{var t,e;return(e=(t=mo())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[i]},po=i=>{let t=c9(i);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},I6=()=>{var i;return(i=mo())===null||i===void 0?void 0:i.config};var U1=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}};function go(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},n=t||"demo-project",s=i.iat||0,o=i.sub||i.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let c=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Qt(JSON.stringify(e)),Qt(JSON.stringify(c)),""].join(".")}function r9(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(r9())}function _o(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Je(){return S2.NODE_CLIENT===!0||S2.NODE_ADMIN===!0}function zo(){try{return typeof indexedDB=="object"}catch{return!1}}function yo(){return new Promise((i,t)=>{try{let e=!0,n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{var o;t(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(e){t(e)}})}var a9="FirebaseError",W1=class i extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=a9,Object.setPrototypeOf(this,i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}},Zt=class{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){let n=e[0]||{},s=`${this.service}/${t}`,o=this.errors[t],c=o?l9(o,n):"Error",r=`${this.serviceName}: ${c} (${s}).`;return new W1(s,r,n)}};function l9(i,t){return i.replace(h9,(e,n)=>{let s=t[n];return s!=null?String(s):`<${n}?>`})}var h9=/\{\$([^}]+)}/g;function vt(i){return JSON.parse(i)}function Z(i){return JSON.stringify(i)}var bo=function(i){let t={},e={},n={},s="";try{let o=i.split(".");t=vt(L6(o[0])||""),e=vt(L6(o[1])||""),s=o[2],n=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:n,signature:s}};var wo=function(i){let t=bo(i),e=t.claims;return!!e&&typeof e=="object"&&e.hasOwnProperty("iat")},Mo=function(i){let t=bo(i).claims;return typeof t=="object"&&t.admin===!0};function e1(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function $1(i,t){if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}function k6(i){for(let t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function Jt(i,t,e){let n={};for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=t.call(e,i[s],s,i));return n}function x2(i,t){if(i===t)return!0;let e=Object.keys(i),n=Object.keys(t);for(let s of e){if(!n.includes(s))return!1;let o=i[s],c=t[s];if(ho(o)&&ho(c)){if(!x2(o,c))return!1}else if(o!==c)return!1}for(let s of n)if(!e.includes(s))return!1;return!0}function ho(i){return i!==null&&typeof i=="object"}function Co(i){let t=[];for(let[e,n]of Object.entries(i))Array.isArray(n)?n.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}var V2=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);let n=this.W_;if(typeof t=="string")for(let u=0;u<16;u++)n[u]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let u=0;u<16;u++)n[u]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let u=16;u<80;u++){let d=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=(d<<1|d>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],c=this.chain_[2],r=this.chain_[3],a=this.chain_[4],l,h;for(let u=0;u<80;u++){u<40?u<20?(l=r^o&(c^r),h=1518500249):(l=o^c^r,h=1859775393):u<60?(l=o&c|r&(o|c),h=2400959708):(l=o^c^r,h=3395469782);let d=(s<<5|s>>>27)+l+a+h+n[u]&4294967295;a=r,r=c,c=(o<<30|o>>>2)&4294967295,o=s,s=d}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+r&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(t,e){if(t==null)return;e===void 0&&(e=t.length);let n=e-this.blockSize,s=0,o=this.buf_,c=this.inbuf_;for(;s<e;){if(c===0)for(;s<=n;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(o[c]=t.charCodeAt(s),++c,++s,c===this.blockSize){this.compress_(o),c=0;break}}else for(;s<e;)if(o[c]=t[s],++c,++s,c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=e}digest(){let t=[],e=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=e&255,e/=256;this.compress_(this.buf_);let n=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)t[n]=this.chain_[s]>>o&255,++n;return t}};function B6(i,t){return`${i} failed: ${t} argument `}var Eo=function(i){let t=[],e=0;for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);if(s>=55296&&s<=56319){let o=s-55296;n++,v(n<i.length,"Surrogate pair missing trail surrogate.");let c=i.charCodeAt(n)-56320;s=65536+(o<<10)+c}s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):s<65536?(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},e4=function(i){let t=0;for(let e=0;e<i.length;e++){let n=i.charCodeAt(e);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,e++):t+=3}return t};var K_=4*60*60*1e3;function G1(i){return i&&i._delegate?i._delegate:i}S2.NODE_CLIENT=!0;var f1=class{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Y1="[DEFAULT]";var O2=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let n=new U1;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{let s=this.getOrInitializeService({instanceIdentifier:e});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let n=this.normalizeInstanceIdentifier(t?.identifier),s=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(d9(t))try{this.getOrInitializeService({instanceIdentifier:Y1})}catch{}for(let[e,n]of this.instancesDeferred.entries()){let s=this.normalizeInstanceIdentifier(e);try{let o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(t=Y1){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return de(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Y1){return this.instances.has(t)}getOptions(t=Y1){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let s=this.getOrInitializeService({instanceIdentifier:n,options:e});for(let[o,c]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(o);n===r&&c.resolve(s)}return s}onInit(t,e){var n;let s=this.normalizeInstanceIdentifier(e),o=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;o.add(t),this.onInitCallbacks.set(s,o);let c=this.instances.get(s);return c&&t(c,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){let n=this.onInitCallbacks.get(e);if(n)for(let s of n)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:u9(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Y1){return this.component?this.component.multipleInstances?t:Y1:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function u9(i){return i===Y1?void 0:i}function d9(i){return i.instantiationMode==="EAGER"}var t4=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new O2(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var f9=[],F=function(i){return i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT",i}(F||{}),v9={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},m9=F.INFO,p9={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},g9=(i,t,...e)=>{if(t<i.logLevel)return;let n=new Date().toISOString(),s=p9[t];if(s)console[s](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},mt=class{constructor(t){this.name=t,this._logLevel=m9,this._logHandler=g9,this._userLogHandler=null,f9.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in F))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?v9[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...t),this._logHandler(this,F.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...t),this._logHandler(this,F.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,F.INFO,...t),this._logHandler(this,F.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,F.WARN,...t),this._logHandler(this,F.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...t),this._logHandler(this,F.ERROR,...t)}};var _9=(i,t)=>t.some(e=>i instanceof e),So,Vo;function z9(){return So||(So=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function y9(){return Vo||(Vo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ho=new WeakMap,N6=new WeakMap,xo=new WeakMap,R6=new WeakMap,P6=new WeakMap;function b9(i){let t=new Promise((e,n)=>{let s=()=>{i.removeEventListener("success",o),i.removeEventListener("error",c)},o=()=>{e(t1(i.result)),s()},c=()=>{n(i.error),s()};i.addEventListener("success",o),i.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&Ho.set(e,i)}).catch(()=>{}),P6.set(t,i),t}function w9(i){if(N6.has(i))return;let t=new Promise((e,n)=>{let s=()=>{i.removeEventListener("complete",o),i.removeEventListener("error",c),i.removeEventListener("abort",c)},o=()=>{e(),s()},c=()=>{n(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",o),i.addEventListener("error",c),i.addEventListener("abort",c)});N6.set(i,t)}var F6={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return N6.get(i);if(t==="objectStoreNames")return i.objectStoreNames||xo.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return t1(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function Oo(i){F6=i(F6)}function M9(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let n=i.call(T2(this),t,...e);return xo.set(n,t.sort?t.sort():[t]),t1(n)}:y9().includes(i)?function(...t){return i.apply(T2(this),t),t1(Ho.get(this))}:function(...t){return t1(i.apply(T2(this),t))}}function C9(i){return typeof i=="function"?M9(i):(i instanceof IDBTransaction&&w9(i),_9(i,z9())?new Proxy(i,F6):i)}function t1(i){if(i instanceof IDBRequest)return b9(i);if(R6.has(i))return R6.get(i);let t=C9(i);return t!==i&&(R6.set(i,t),P6.set(t,i)),t}var T2=i=>P6.get(i);function Lo(i,t,{blocked:e,upgrade:n,blocking:s,terminated:o}={}){let c=indexedDB.open(i,t),r=t1(c);return n&&c.addEventListener("upgradeneeded",a=>{n(t1(c.result),a.oldVersion,a.newVersion,t1(c.transaction),a)}),e&&c.addEventListener("blocked",a=>e(a.oldVersion,a.newVersion,a)),r.then(a=>{o&&a.addEventListener("close",()=>o()),s&&a.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),r}var E9=["get","getKey","getAll","getAllKeys","count"],S9=["put","add","delete","clear"],j6=new Map;function To(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(j6.get(t))return j6.get(t);let e=t.replace(/FromIndex$/,""),n=t!==e,s=S9.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(s||E9.includes(e)))return;let o=function(c,...r){return de(this,null,function*(){let a=this.transaction(c,s?"readwrite":"readonly"),l=a.store;return n&&(l=l.index(r.shift())),(yield Promise.all([l[e](...r),s&&a.done]))[0]})};return j6.set(t,o),o}Oo(i=>ne(j({},i),{get:(t,e,n)=>To(t,e)||i.get(t,e,n),has:(t,e)=>!!To(t,e)||i.has(t,e)}));var W6=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(V9(e)){let n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}};function V9(i){let t=i.getComponent();return t?.type==="VERSION"}var q6="@firebase/app",Do="0.10.13";var v1=new mt("@firebase/app"),H9="@firebase/app-compat",x9="@firebase/analytics-compat",O9="@firebase/analytics",T9="@firebase/app-check-compat",L9="@firebase/app-check",D9="@firebase/auth",I9="@firebase/auth-compat",A9="@firebase/database",k9="@firebase/data-connect",B9="@firebase/database-compat",R9="@firebase/functions",N9="@firebase/functions-compat",F9="@firebase/installations",P9="@firebase/installations-compat",j9="@firebase/messaging",U9="@firebase/messaging-compat",W9="@firebase/performance",q9="@firebase/performance-compat",$9="@firebase/remote-config",G9="@firebase/remote-config-compat",Y9="@firebase/storage",X9="@firebase/storage-compat",K9="@firebase/firestore",Q9="@firebase/vertexai-preview",Z9="@firebase/firestore-compat",J9="firebase",eh="10.14.1";var $6="[DEFAULT]",th={[q6]:"fire-core",[H9]:"fire-core-compat",[O9]:"fire-analytics",[x9]:"fire-analytics-compat",[L9]:"fire-app-check",[T9]:"fire-app-check-compat",[D9]:"fire-auth",[I9]:"fire-auth-compat",[A9]:"fire-rtdb",[k9]:"fire-data-connect",[B9]:"fire-rtdb-compat",[R9]:"fire-fn",[N9]:"fire-fn-compat",[F9]:"fire-iid",[P9]:"fire-iid-compat",[j9]:"fire-fcm",[U9]:"fire-fcm-compat",[W9]:"fire-perf",[q9]:"fire-perf-compat",[$9]:"fire-rc",[G9]:"fire-rc-compat",[Y9]:"fire-gcs",[X9]:"fire-gcs-compat",[K9]:"fire-fst",[Z9]:"fire-fst-compat",[Q9]:"fire-vertex","fire-js":"fire-js",[J9]:"fire-js-all"};var L2=new Map,ih=new Map,G6=new Map;function Io(i,t){try{i.container.addComponent(t)}catch(e){v1.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function i4(i){let t=i.name;if(G6.has(t))return v1.debug(`There were multiple attempts to register component ${t}.`),!1;G6.set(t,i);for(let e of L2.values())Io(e,i);for(let e of ih.values())Io(e,i);return!0}function Ro(i,t){let e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}var nh={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},b1=new Zt("app","Firebase",nh);var Y6=class{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new f1("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw b1.create("app-deleted",{appName:this._name})}};var No=eh;function Q6(i,t={}){let e=i;typeof t!="object"&&(t={name:t});let n=Object.assign({name:$6,automaticDataCollectionEnabled:!1},t),s=n.name;if(typeof s!="string"||!s)throw b1.create("bad-app-name",{appName:String(s)});if(e||(e=I6()),!e)throw b1.create("no-options");let o=L2.get(s);if(o){if(x2(e,o.options)&&x2(n,o.config))return o;throw b1.create("duplicate-app",{appName:s})}let c=new t4(s);for(let a of G6.values())c.addComponent(a);let r=new Y6(e,n,c);return L2.set(s,r),r}function Fo(i=$6){let t=L2.get(i);if(!t&&i===$6&&I6())return Q6();if(!t)throw b1.create("no-app",{appName:i});return t}function w1(i,t,e){var n;let s=(n=th[i])!==null&&n!==void 0?n:i;e&&(s+=`-${e}`);let o=s.match(/\s|\//),c=t.match(/\s|\//);if(o||c){let r=[`Unable to register library "${s}" with version "${t}":`];o&&r.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&r.push("and"),c&&r.push(`version name "${t}" contains illegal characters (whitespace or "/")`),v1.warn(r.join(" "));return}i4(new f1(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}var sh="firebase-heartbeat-database",oh=1,n4="firebase-heartbeat-store",U6=null;function Po(){return U6||(U6=Lo(sh,oh,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(n4)}catch(e){console.warn(e)}}}}).catch(i=>{throw b1.create("idb-open",{originalErrorMessage:i.message})})),U6}function ch(i){return de(this,null,function*(){try{let e=(yield Po()).transaction(n4),n=yield e.objectStore(n4).get(jo(i));return yield e.done,n}catch(t){if(t instanceof W1)v1.warn(t.message);else{let e=b1.create("idb-get",{originalErrorMessage:t?.message});v1.warn(e.message)}}})}function Ao(i,t){return de(this,null,function*(){try{let n=(yield Po()).transaction(n4,"readwrite");yield n.objectStore(n4).put(t,jo(i)),yield n.done}catch(e){if(e instanceof W1)v1.warn(e.message);else{let n=b1.create("idb-set",{originalErrorMessage:e?.message});v1.warn(n.message)}}})}function jo(i){return`${i.name}!${i.options.appId}`}var rh=1024,ah=30*24*60*60*1e3,X6=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new K6(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}triggerHeartbeat(){return de(this,null,function*(){var t,e;try{let s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ko();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{let r=new Date(c.date).valueOf();return Date.now()-r<=ah}),this._storage.overwrite(this._heartbeatsCache))}catch(n){v1.warn(n)}})}getHeartbeatsHeader(){return de(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=ko(),{heartbeatsToSend:n,unsentEntries:s}=lh(this._heartbeatsCache.heartbeats),o=Qt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return v1.warn(e),""}})}};function ko(){return new Date().toISOString().substring(0,10)}function lh(i,t=rh){let e=[],n=i.slice();for(let s of i){let o=e.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),Bo(e)>t){o.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),Bo(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}var K6=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return de(this,null,function*(){return zo()?yo().then(()=>!0).catch(()=>!1):!1})}read(){return de(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield ch(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return de(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let s=yield this.read();return Ao(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return de(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let s=yield this.read();return Ao(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return})}};function Bo(i){return Qt(JSON.stringify({version:2,heartbeats:i})).length}function hh(i){i4(new f1("platform-logger",t=>new W6(t),"PRIVATE")),i4(new f1("heartbeat",t=>new X6(t),"PRIVATE")),w1(q6,Do,i),w1(q6,Do,"esm2017"),w1("fire-js","")}hh("");var uh="firebase",dh="10.14.1";w1(uh,dh,"app");var fh={production:!1,firebaseConfig:{apiKey:"AIzaSyAiM6pzSvmwctGs7XjY0oT691XH2q3qce8",authDomain:"baoyan-11f97.firebaseapp.com",databaseURL:"https://baoyan-11f97-default-rtdb.firebaseio.com",projectId:"baoyan-11f97",storageBucket:"baoyan-11f97.appspot.com",messagingSenderId:"358671499158",appId:"1:358671499158:web:e1cae231176fbe4cae67b7",measurementId:"G-YWDWR4GZDH"}},Uo=Q6(fh.firebaseConfig);var s5=F7(Cr(),1);var K2="5",o5="v",c5="s",r5="r",a5="f",l5=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,h5="ls",u5="p",N8="ac",d5="websocket",f5="long_polling";var F8=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Z(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:vt(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var P8=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return e1(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var v5=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){let t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new F8(t)}}catch{}return new P8},st=v5("localStorage"),j8=v5("sessionStorage");var Mt=new mt("@firebase/database"),yu=function(){let i=1;return function(){return i++}}(),m5=function(i){let t=Eo(i),e=new V2;e.update(t);let n=e.digest();return H2.encodeByteArray(n)},L4=function(...i){let t="";for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?t+=L4.apply(null,n):typeof n=="object"?t+=Z(n):t+=n,t+=" "}return t},ot=null,Er=!0,bu=function(i,t){v(!t||i===!0||i===!1,"Can't turn on custom loggers persistently."),i===!0?(Mt.logLevel=F.VERBOSE,ot=Mt.log.bind(Mt),t&&j8.set("logging_enabled",!0)):typeof i=="function"?ot=i:(ot=null,j8.remove("logging_enabled"))},ue=function(...i){if(Er===!0&&(Er=!1,ot===null&&j8.get("logging_enabled")===!0&&bu(!0)),ot){let t=L4.apply(null,i);ot(t)}},D4=function(i){return function(...t){ue(i,...t)}},U8=function(...i){let t="FIREBASE INTERNAL ERROR: "+L4(...i);Mt.error(t)},m1=function(...i){let t=`FIREBASE FATAL ERROR: ${L4(...i)}`;throw Mt.error(t),new Error(t)},De=function(...i){let t="FIREBASE WARNING: "+L4(...i);Mt.warn(t)},wu=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&De("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},p5=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},Mu=function(i){if(Je()||document.readyState==="complete")i();else{let t=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Et="[MIN_NAME]",ct="[MAX_NAME]",Lt=function(i,t){if(i===t)return 0;if(i===Et||t===ct)return-1;if(t===Et||i===ct)return 1;{let e=Sr(i),n=Sr(t);return e!==null?n!==null?e-n===0?i.length-t.length:e-n:-1:n!==null?1:i<t?-1:1}},Cu=function(i,t){return i===t?0:i<t?-1:1},v4=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+Z(t))},D0=function(i){if(typeof i!="object"||i===null)return Z(i);let t=[];for(let n in i)t.push(n);t.sort();let e="{";for(let n=0;n<t.length;n++)n!==0&&(e+=","),e+=Z(t[n]),e+=":",e+=D0(i[t[n]]);return e+="}",e},g5=function(i,t){let e=i.length;if(e<=t)return[i];let n=[];for(let s=0;s<e;s+=t)s+t>e?n.push(i.substring(s,e)):n.push(i.substring(s,s+t));return n};function Se(i,t){for(let e in i)i.hasOwnProperty(e)&&t(e,i[e])}var _5=function(i){v(!p5(i),"Invalid JSON number");let t=11,e=52,n=(1<<t-1)-1,s,o,c,r,a;i===0?(o=0,c=0,s=1/i===-1/0?1:0):(s=i<0,i=Math.abs(i),i>=Math.pow(2,1-n)?(r=Math.min(Math.floor(Math.log(i)/Math.LN2),n),o=r+n,c=Math.round(i*Math.pow(2,e-r)-Math.pow(2,e))):(o=0,c=Math.round(i/Math.pow(2,1-n-e))));let l=[];for(a=e;a;a-=1)l.push(c%2?1:0),c=Math.floor(c/2);for(a=t;a;a-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(s?1:0),l.reverse();let h=l.join(""),u="";for(a=0;a<64;a+=8){let d=parseInt(h.substr(a,8),2).toString(16);d.length===1&&(d="0"+d),u=u+d}return u.toLowerCase()},Eu=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Su=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Vu(i,t){let e="Unknown Error";i==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?e="Client doesn't have permission to access the desired data.":i==="unavailable"&&(e="The service is unavailable");let n=new Error(i+" at "+t._path.toString()+": "+e);return n.code=i.toUpperCase(),n}var Hu=new RegExp("^-?(0*)\\d{1,10}$"),xu=-2147483648,Ou=2147483647,Sr=function(i){if(Hu.test(i)){let t=Number(i);if(t>=xu&&t<=Ou)return t}return null},I4=function(i){try{i()}catch(t){setTimeout(()=>{let e=t.stack||"";throw De("Exception was thrown by user callback.",e),t},Math.floor(0))}},Tu=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},z4=function(i,t){let e=setTimeout(i,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var Q2=class{constructor(t,e,n,s,o=!1,c="",r=!1,a=!1){this.secure=e,this.namespace=n,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=r,this.isUsingEmulator=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=st.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&st.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}};function Lu(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function z5(i,t,e){v(typeof t=="string","typeof type must == string"),v(typeof e=="object","typeof params must == object");let n;if(t===d5)n=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===f5)n=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Lu(i)&&(e.ns=i.namespace);let s=[];return Se(e,(o,c)=>{s.push(o+"="+c)}),n+s.join("&")}var W8=class{constructor(){this.counters_={}}incrementCounter(t,e=1){e1(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return fo(this.counters_)}};var L8={},D8={};function I0(i){let t=i.toString();return L8[t]||(L8[t]=new W8),L8[t]}function Du(i,t){let e=i.toString();return D8[e]||(D8[e]=t()),D8[e]}var A0="";function Iu(i){A0=i}var Au=16384,ku=45e3,C4=null;typeof MozWebSocket<"u"?C4=MozWebSocket:typeof WebSocket<"u"&&(C4=WebSocket);function Bu(i){C4=i}var m4=(()=>{class i{constructor(e,n,s,o,c,r,a){this.connId=e,this.applicationId=s,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=D4(this.connId),this.stats_=I0(n),this.connURL=i.connectionURL_(n,r,a,o,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,o,c){let r={};return r[o5]=K2,!Je()&&typeof location<"u"&&location.hostname&&l5.test(location.hostname)&&(r[r5]=a5),n&&(r[c5]=n),s&&(r[h5]=s),o&&(r[N8]=o),c&&(r[u5]=c),z5(e,d5,r)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,st.set("previous_websocket_failure",!0);try{let s;if(Je()){let o=this.nodeAdmin?"AdminNode":"Node";s={headers:{"User-Agent":`Firebase/${K2}/${A0}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);let c=process.env,r=this.connURL.indexOf("wss://")===0?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;r&&(s.proxy={origin:r})}this.mySock=new C4(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");let o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");let o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&C4!==null&&!i.forceDisallow_}static previouslyFailed(){return st.isInMemoryStorage||st.get("previous_websocket_failure")===!0}markConnectionHealthy(){st.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let n=this.frames.join("");this.frames=null;let s=vt(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(v(this.frames===null,"We already have a frame buffer"),e.length<=6){let n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{let s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();let n=Z(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let s=g5(n,Au);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ku))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})(),Vr="@firebase/database",Hr="1.0.8";var q8=class{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(n=>this.appCheck=n)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,n)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){De(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var $8=class{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(ue("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,n)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',De(t)}},y4=(()=>{class i{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}i.OWNER="owner";return i})(),G8=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<n.length;++s)n[s]&&I4(()=>{this.onMessage_(n[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var xr="start",Ru="close",Nu="pLPCommand",Fu="pRTLPCB",y5="id",b5="pw",w5="ser",Pu="cb",ju="seg",Uu="ts",Wu="d",qu="dframe",M5=1870,C5=30,$u=M5-C5,Gu=25e3,Yu=3e4,Y8=class i{constructor(t,e,n,s,o,c,r){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=s,this.authToken=o,this.transportSessionId=c,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=D4(t),this.stats_=I0(e),this.urlFn=a=>(this.appCheckToken&&(a[N8]=this.appCheckToken),z5(e,f5,a))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new G8(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Yu)),Mu(()=>{if(this.isClosed_)return;this.scriptTagHolder=new X8((...o)=>{let[c,r,a,l,h]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===xr)this.id=r,this.password=a;else if(c===Ru)r?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(r,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...o)=>{let[c,r]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,r)},()=>{this.onClosed_()},this.urlFn);let n={};n[xr]="t",n[w5]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[Pu]=this.scriptTagHolder.uniqueCallbackIdentifier),n[o5]=K2,this.transportSessionId&&(n[c5]=this.transportSessionId),this.lastSessionId&&(n[h5]=this.lastSessionId),this.applicationId&&(n[u5]=this.applicationId),this.appCheckToken&&(n[N8]=this.appCheckToken),typeof location<"u"&&location.hostname&&l5.test(location.hostname)&&(n[r5]=a5);let s=this.urlFn(n);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){i.forceAllow_=!0}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){return Je()?!1:i.forceAllow_?!0:!i.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Eu()&&!Su()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=Z(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let n=D6(e),s=g5(n,$u);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(Je())return;this.myDisconnFrame=document.createElement("iframe");let n={};n[qu]="t",n[y5]=t,n[b5]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=Z(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},X8=class i{constructor(t,e,n,s){if(this.onDisconnect=n,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Je())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=yu(),window[Nu+this.uniqueCallbackIdentifier]=t,window[Fu+this.uniqueCallbackIdentifier]=e,this.myIFrame=i.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";</script>');let c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(r){ue("frame writing exception"),r.stack&&ue(r.stack),ue(r)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||ue("No IE domain setting required")}catch{let n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[y5]=this.myID,t[b5]=this.myPW,t[w5]=this.currentSerial;let e=this.urlFn(t),n="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+C5+n.length<=M5;){let c=this.pendingSegs.shift();n=n+"&"+ju+s+"="+c.seg+"&"+Uu+s+"="+c.ts+"&"+Wu+s+"="+c.d,s++}return e=e+n,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},s=setTimeout(n,Math.floor(Gu)),o=()=>{clearTimeout(s),n()};this.addTag(t,o)}addTag(t,e){Je()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){let s=n.readyState;(!s||s==="loaded"||s==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{ue("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}};var Xu=(()=>{class i{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Y8,m4]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let n=m4&&m4.isAvailable(),s=n&&!m4.previouslyFailed();if(e.webSocketOnly&&(n||De("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[m4];else{let o=this.transports_=[];for(let c of i.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}i.globalTransportInitialized_=!1;return i})(),Ku=6e4,Qu=5e3,Zu=10*1024,Ju=100*1024,I8="t",Or="d",ed="s",Tr="r",td="e",Lr="o",Dr="a",Ir="n",Ar="p",id="h",K8=class{constructor(t,e,n,s,o,c,r,a,l,h){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=c,this.onReady_=r,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=D4("c:"+this.id+":"),this.transportManager_=new Xu(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,n)},Math.floor(0));let s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=z4(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ju?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Zu?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){let e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(I8 in t){let e=t[I8];e===Dr?this.upgradeIfSecondaryHealthy_():e===Tr?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===Lr&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=v4("t",t),n=v4("d",t);if(e==="c")this.onSecondaryControl_(n);else if(e==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ar,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Dr,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ir,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=v4("t",t),n=v4("d",t);e==="c"?this.onControl_(n):e==="d"&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=v4(I8,t);if(Or in t){let n=t[Or];if(e===id){let s=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(e===Ir){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===ed?this.onConnectionShutdown_(n):e===Tr?this.onReset_(n):e===td?U8("Server Error: "+n):e===Lr?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):U8("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,n=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),K2!==n&&De("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),z4(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Ku))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):z4(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Qu))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ar,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(st.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Z2=class{put(t,e,n,s){}merge(t,e,n,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}};var J2=class{constructor(t){this.allowedEvents_=t,this.listeners_={},v(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let n=[...this.listeners_[t]];for(let s=0;s<n.length;s++)n[s].callback.apply(n[s].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});let s=this.getInitialEvent(t);s&&e.apply(n,s)}off(t,e,n){this.validateEventType_(t);let s=this.listeners_[t]||[];for(let o=0;o<s.length;o++)if(s[o].callback===e&&(!n||n===s[o].context)){s.splice(o,1);return}}validateEventType_(t){v(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}};var e3=class i extends J2{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!A6()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new i}getInitialEvent(t){return v(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var kr=32,Br=768,I=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function H(){return new I("")}function C(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function V1(i){return i.pieces_.length-i.pieceNum_}function P(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new I(i.pieces_,t)}function E5(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function nd(i){let t="";for(let e=i.pieceNum_;e<i.pieces_.length;e++)i.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[e])));return t||"/"}function S5(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function V5(i){if(i.pieceNum_>=i.pieces_.length)return null;let t=[];for(let e=i.pieceNum_;e<i.pieces_.length-1;e++)t.push(i.pieces_[e]);return new I(t,0)}function te(i,t){let e=[];for(let n=i.pieceNum_;n<i.pieces_.length;n++)e.push(i.pieces_[n]);if(t instanceof I)for(let n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{let n=t.split("/");for(let s=0;s<n.length;s++)n[s].length>0&&e.push(n[s])}return new I(e,0)}function E(i){return i.pieceNum_>=i.pieces_.length}function ze(i,t){let e=C(i),n=C(t);if(e===null)return t;if(e===n)return ze(P(i),P(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function k0(i,t){if(V1(i)!==V1(t))return!1;for(let e=i.pieceNum_,n=t.pieceNum_;e<=i.pieces_.length;e++,n++)if(i.pieces_[e]!==t.pieces_[n])return!1;return!0}function Ke(i,t){let e=i.pieceNum_,n=t.pieceNum_;if(V1(i)>V1(t))return!1;for(;e<i.pieces_.length;){if(i.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0}var Q8=class{constructor(t,e){this.errorPrefix_=e,this.parts_=S5(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=e4(this.parts_[n]);H5(this)}};function sd(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=e4(t),H5(i)}function od(i){let t=i.parts_.pop();i.byteLength_-=e4(t),i.parts_.length>0&&(i.byteLength_-=1)}function H5(i){if(i.byteLength_>Br)throw new Error(i.errorPrefix_+"has a key path longer than "+Br+" bytes ("+i.byteLength_+").");if(i.parts_.length>kr)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kr+") or object contains a cycle "+nt(i))}function nt(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}var Z8=class i extends J2{constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let n=!document[t];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new i}getInitialEvent(t){return v(t==="visible","Unknown event type: "+t),[this.visible_]}};var p4=1e3,cd=60*5*1e3,Rr=30*1e3,rd=1.3,ad=3e4,ld="server_kill",Nr=3,B0=(()=>{class i extends Z2{constructor(e,n,s,o,c,r,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=r,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=i.nextPersistentConnectionId_++,this.log_=D4("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=p4,this.maxReconnectDelay_=cd,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Je())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Z8.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&e3.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){let o=++this.requestNumber_,c={r:o,a:e,b:n};this.log_(Z(c)),v(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),s&&(this.requestCBHash_[o]=s)}get(e){this.initConnection_();let n=new U1,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:r=>{let a=r.d;r.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),n.promise}listen(e,n,s,o){this.initConnection_();let c=e._queryIdentifier,r=e._path.toString();this.log_("Listen called for "+r+" "+c),this.listens.has(r)||this.listens.set(r,new Map),v(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),v(!this.listens.get(r).has(c),"listen() called twice for same path/queryId.");let a={onComplete:o,hashFn:n,query:e,tag:s};this.listens.get(r).set(c,a),this.connected_&&this.sendListen_(a)}sendGet_(e){let n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){let n=e.query,s=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+s+" for "+o);let c={p:s},r="q";e.tag&&(c.q=n._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(r,c,a=>{let l=a.d,h=a.s;i.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(o))===e&&(this.log_("listen response",a),h!=="ok"&&this.removeListen_(s,o),e.onComplete&&e.onComplete(h,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&e1(e,"w")){let s=$1(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){let o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',c=n._path.toString();De(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Mo(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Rr)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,n=wo(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,o=>{let c=o.s,r=o.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){let s=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),v(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,e._queryObject,n)}sendUnlisten_(e,n,s,o){this.log_("Unlisten on "+e+" for "+n);let c={p:e},r="n";o&&(c.q=s,c.t=o),this.sendRequest(r,c)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,o){let c={p:n,d:s};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,r=>{o&&setTimeout(()=>{o(r.s,r.d)},Math.floor(0))})}put(e,n,s,o){this.putInternal("p",e,n,s,o)}merge(e,n,s,o){this.putInternal("m",e,n,s,o)}putInternal(e,n,s,o,c){this.initConnection_();let r={p:n,d:s};c!==void 0&&(r.h=c),this.outstandingPuts_.push({action:e,request:r,onComplete:o}),this.outstandingPutCount_++;let a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){let n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,c=>{this.log_(n+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(e){if(this.connected_){let n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){let c=s.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Z(e));let n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):U8("Unrecognized action received from server: "+Z(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){v(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=p4,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=p4,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ad&&(this.reconnectDelay_=p4),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*rd)}this.onConnectStatus_(!1)}establishConnection_(){return de(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+i.nextConnectionId_++,c=this.lastSessionId,r=!1,a=null,l=function(){a?a.close():(r=!0,s())},h=function(d){v(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:h};let u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[d,f]=yield Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);r?ue("getToken() completed but was canceled"):(ue("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new K8(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{De(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(ld)},c))}catch(d){this.log_("Failed to get token: "+d),r||(this.repoInfo_.nodeAdmin&&De(d),l())}}})}interrupt(e){ue("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ue("Resuming connection for reason: "+e),delete this.interruptReasons_[e],k6(this.interruptReasons_)&&(this.reconnectDelay_=p4,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(c=>D0(c)).join("$"):s="default";let o=this.removeListen_(e,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){let s=new I(e).toString(),o;if(this.listens.has(s)){let c=this.listens.get(s);o=c.get(n),c.delete(n),c.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(e,n){ue("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Nr&&(this.reconnectDelay_=Rr,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ue("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Nr&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},n="js";Je()&&(this.repoInfo_.nodeAdmin?n="admin_node":n="node"),e["sdk."+n+"."+A0.replace(/\./g,"-")]=1,A6()?e["framework.cordova"]=1:_o()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=e3.getInstance().currentlyOnline();return k6(this.interruptReasons_)&&e}}i.nextPersistentConnectionId_=0,i.nextConnectionId_=0;return i})(),M=class i{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new i(t,e)}};var St=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let n=new M(Et,t),s=new M(Et,e);return this.compare(n,s)!==0}minPost(){return M.MIN}};var X2,t3=class extends St{static get __EMPTY_NODE(){return X2}static set __EMPTY_NODE(t){X2=t}compare(t,e){return Lt(t.name,e.name)}isDefinedOn(t){throw q1("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return M.MIN}maxPost(){return new M(ct,X2)}makePost(t,e){return v(typeof t=="string","KeyIndex indexValue must always be a string."),new M(t,X2)}toString(){return".key"}},Ct=new t3;var bt=class{constructor(t,e,n,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=e?n(t.key,e):1,s&&(c*=-1),c<0)this.isReverse_?t=t.left:t=t.right;else if(c===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Xe=(()=>{class i{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??i.RED,this.left=o??Ue.EMPTY_NODE,this.right=c??Ue.EMPTY_NODE}copy(e,n,s,o,c){return new i(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this,c=s(e,o.key);return c<0?o=o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ue.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,o;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Ue.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})(),J8=class{copy(t,e,n,s,o){return this}insert(t,e,n){return new Xe(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ue=class i{constructor(t,e=i.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new i(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Xe.BLACK,null,null))}remove(t){return new i(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Xe.BLACK,null,null))}get(t){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),e===0)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,s=null;for(;!n.isEmpty();)if(e=this.comparator_(t,n.key),e===0){if(n.left.isEmpty())return s?s.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else e<0?n=n.left:e>0&&(s=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new bt(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new bt(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new bt(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new bt(this.root_,null,this.comparator_,!0,t)}};Ue.EMPTY_NODE=new J8;function hd(i,t){return Lt(i.name,t.name)}function R0(i,t){return Lt(i,t)}var e0;function ud(i){e0=i}var x5=function(i){return typeof i=="number"?"number:"+_5(i):"string:"+i},O5=function(i){if(i.isLeafNode()){let t=i.val();v(typeof t=="string"||typeof t=="number"||typeof t=="object"&&e1(t,".sv"),"Priority must be a string or number.")}else v(i===e0||i.isEmpty(),"priority of unexpected type.");v(i===e0||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Fr,Vt=(()=>{class i{constructor(e,n=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,v(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),O5(this.priorityNode_)}static set __childrenNodeConstructor(e){Fr=e}static get __childrenNodeConstructor(){return Fr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new i(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return E(e)?this:C(e)===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){let s=C(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(v(s!==".priority"||V1(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(P(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+x5(this.priorityNode_.val())+":");let n=typeof this.value_;e+=n+":",n==="number"?e+=_5(this.value_):e+=this.value_,this.lazyHash_=m5(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===i.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof i.__childrenNodeConstructor?-1:(v(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let n=typeof e.value_,s=typeof this.value_,o=i.VALUE_TYPE_ORDER.indexOf(n),c=i.VALUE_TYPE_ORDER.indexOf(s);return v(o>=0,"Unknown leaf type: "+n),v(c>=0,"Unknown leaf type: "+s),o===c?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}i.VALUE_TYPE_ORDER=["object","boolean","number","string"];return i})(),T5,L5;function dd(i){T5=i}function fd(i){L5=i}var t0=class extends St{compare(t,e){let n=t.node.getPriority(),s=e.node.getPriority(),o=n.compareTo(s);return o===0?Lt(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return M.MIN}maxPost(){return new M(ct,new Vt("[PRIORITY-POST]",L5))}makePost(t,e){let n=T5(t);return new M(e,new Vt("[PRIORITY-POST]",n))}toString(){return".priority"}},Y=new t0;var vd=Math.log(2),i0=class{constructor(t){let e=o=>parseInt(Math.log(o)/vd,10),n=o=>parseInt(Array(o+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;let s=n(this.count);this.bits_=t+1&s}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},i3=function(i,t,e,n){i.sort(t);let s=function(a,l){let h=l-a,u,d;if(h===0)return null;if(h===1)return u=i[a],d=e?e(u):u,new Xe(d,u.node,Xe.BLACK,null,null);{let f=parseInt(h/2,10)+a,m=s(a,f),w=s(f+1,l);return u=i[f],d=e?e(u):u,new Xe(d,u.node,Xe.BLACK,m,w)}},o=function(a){let l=null,h=null,u=i.length,d=function(m,w){let J=u-m,lt=u;u-=m;let W4=s(J+1,lt),A3=i[J],N7=e?e(A3):A3;f(new Xe(N7,A3.node,w,null,W4))},f=function(m){l?(l.left=m,l=m):(h=m,l=m)};for(let m=0;m<a.count;++m){let w=a.nextBitIsOne(),J=Math.pow(2,a.count-(m+1));w?d(J,Xe.BLACK):(d(J,Xe.BLACK),d(J,Xe.RED))}return h},c=new i0(i.length),r=o(c);return new Ue(n||t,r)};var A8,yt={},Ht=class i{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return v(yt&&Y,"ChildrenNode.ts has not been loaded"),A8=A8||new i({".priority":yt},{".priority":Y}),A8}get(t){let e=$1(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ue?e:null}hasIndex(t){return e1(this.indexSet_,t.toString())}addIndex(t,e){v(t!==Ct,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let n=[],s=!1,o=e.getIterator(M.Wrap),c=o.getNext();for(;c;)s=s||t.isDefinedOn(c.node),n.push(c),c=o.getNext();let r;s?r=i3(n,t.getCompare()):r=yt;let a=t.toString(),l=Object.assign({},this.indexSet_);l[a]=t;let h=Object.assign({},this.indexes_);return h[a]=r,new i(h,l)}addToIndexes(t,e){let n=Jt(this.indexes_,(s,o)=>{let c=$1(this.indexSet_,o);if(v(c,"Missing index implementation for "+o),s===yt)if(c.isDefinedOn(t.node)){let r=[],a=e.getIterator(M.Wrap),l=a.getNext();for(;l;)l.name!==t.name&&r.push(l),l=a.getNext();return r.push(t),i3(r,c.getCompare())}else return yt;else{let r=e.get(t.name),a=s;return r&&(a=a.remove(new M(t.name,r))),a.insert(t,t.node)}});return new i(n,this.indexSet_)}removeFromIndexes(t,e){let n=Jt(this.indexes_,s=>{if(s===yt)return s;{let o=e.get(t.name);return o?s.remove(new M(t.name,o)):s}});return new i(n,this.indexSet_)}};var g4,b=(()=>{class i{constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&O5(this.priorityNode_),this.children_.isEmpty()&&v(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return g4||(g4=new i(new Ue(R0),null,Ht.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||g4}updatePriority(e){return this.children_.isEmpty()?this:new i(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let n=this.children_.get(e);return n===null?g4:n}}getChild(e){let n=C(e);return n===null?this:this.getImmediateChild(n).getChild(P(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(v(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{let s=new M(e,n),o,c;n.isEmpty()?(o=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(e,n),c=this.indexMap_.addToIndexes(s,this.children_));let r=o.isEmpty()?g4:this.priorityNode_;return new i(o,r,c)}}updateChild(e,n){let s=C(e);if(s===null)return n;{v(C(e)!==".priority"||V1(e)===1,".priority must be the last token in a path");let o=this.getImmediateChild(s).updateChild(P(e),n);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let n={},s=0,o=0,c=!0;if(this.forEachChild(Y,(r,a)=>{n[r]=a.val(e),s++,c&&i.INTEGER_REGEXP_.test(r)?o=Math.max(o,Number(r)):c=!1}),!e&&c&&o<2*s){let r=[];for(let a in n)r[a]=n[a];return r}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+x5(this.getPriority().val())+":"),this.forEachChild(Y,(n,s)=>{let o=s.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":m5(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){let o=this.resolveIndex_(s);if(o){let c=o.getPredecessorKey(new M(e,n));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let n=this.resolveIndex_(e);if(n){let s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){let n=this.getFirstChildName(e);return n?new M(n,this.children_.get(n)):null}getLastChildName(e){let n=this.resolveIndex_(e);if(n){let s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){let n=this.getLastChildName(e);return n?new M(n,this.children_.get(n)):null}forEachChild(e,n){let s=this.resolveIndex_(e);return s?s.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){let s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,o=>o);{let o=this.children_.getIteratorFrom(e.name,M.Wrap),c=o.peek();for(;c!=null&&n.compare(c,e)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){let s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,o=>o);{let o=this.children_.getReverseIteratorFrom(e.name,M.Wrap),c=o.peek();for(;c!=null&&n.compare(c,e)>0;)o.getNext(),c=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===A4?-1:0}withIndex(e){if(e===Ct||this.indexMap_.hasIndex(e))return this;{let n=this.indexMap_.addIndex(e,this.children_);return new i(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ct||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){let s=this.getIterator(Y),o=n.getIterator(Y),c=s.getNext(),r=o.getNext();for(;c&&r;){if(c.name!==r.name||!c.node.equals(r.node))return!1;c=s.getNext(),r=o.getNext()}return c===null&&r===null}else return!1;else return!1}}resolveIndex_(e){return e===Ct?null:this.indexMap_.get(e.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})(),n0=class extends b{constructor(){super(new Ue(R0),b.EMPTY_NODE,Ht.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return b.EMPTY_NODE}isEmpty(){return!1}},A4=new n0;Object.defineProperties(M,{MIN:{value:new M(Et,b.EMPTY_NODE)},MAX:{value:new M(ct,A4)}});t3.__EMPTY_NODE=b.EMPTY_NODE;Vt.__childrenNodeConstructor=b;ud(A4);fd(A4);var md=!0;function ae(i,t=null){if(i===null)return b.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),v(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){let e=i;return new Vt(e,ae(t))}if(!(i instanceof Array)&&md){let e=[],n=!1;if(Se(i,(c,r)=>{if(c.substring(0,1)!=="."){let a=ae(r);a.isEmpty()||(n=n||!a.getPriority().isEmpty(),e.push(new M(c,a)))}}),e.length===0)return b.EMPTY_NODE;let o=i3(e,hd,c=>c.name,R0);if(n){let c=i3(e,Y.getCompare());return new b(o,ae(t),new Ht({".priority":c},{".priority":Y}))}else return new b(o,ae(t),Ht.Default)}else{let e=b.EMPTY_NODE;return Se(i,(n,s)=>{if(e1(i,n)&&n.substring(0,1)!=="."){let o=ae(s);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(n,o))}}),e.updatePriority(ae(t))}}dd(ae);var s0=class extends St{constructor(t){super(),this.indexPath_=t,v(!E(t)&&C(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let n=this.extractChild(t.node),s=this.extractChild(e.node),o=n.compareTo(s);return o===0?Lt(t.name,e.name):o}makePost(t,e){let n=ae(t),s=b.EMPTY_NODE.updateChild(this.indexPath_,n);return new M(e,s)}maxPost(){let t=b.EMPTY_NODE.updateChild(this.indexPath_,A4);return new M(ct,t)}toString(){return S5(this.indexPath_,0).join("/")}};var o0=class extends St{compare(t,e){let n=t.node.compareTo(e.node);return n===0?Lt(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return M.MIN}maxPost(){return M.MAX}makePost(t,e){let n=ae(t);return new M(e,n)}toString(){return".value"}},pd=new o0;function D5(i){return{type:"value",snapshotNode:i}}function xt(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function E4(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function S4(i,t,e){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:e}}function gd(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}var V4=class{constructor(t){this.index_=t}updateChild(t,e,n,s,o,c){v(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let r=t.getImmediateChild(e);return r.getChild(s).equals(n.getChild(s))&&r.isEmpty()===n.isEmpty()||(c!=null&&(n.isEmpty()?t.hasChild(e)?c.trackChildChange(E4(e,r)):v(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):r.isEmpty()?c.trackChildChange(xt(e,n)):c.trackChildChange(S4(e,n,r))),t.isLeafNode()&&n.isEmpty())?t:t.updateImmediateChild(e,n).withIndex(this.index_)}updateFullNode(t,e,n){return n!=null&&(t.isLeafNode()||t.forEachChild(Y,(s,o)=>{e.hasChild(s)||n.trackChildChange(E4(s,o))}),e.isLeafNode()||e.forEachChild(Y,(s,o)=>{if(t.hasChild(s)){let c=t.getImmediateChild(s);c.equals(o)||n.trackChildChange(S4(s,o,c))}else n.trackChildChange(xt(s,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?b.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var n3=class i{constructor(t){this.indexedFilter_=new V4(t.getIndex()),this.index_=t.getIndex(),this.startPost_=i.getStartPost_(t),this.endPost_=i.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,n=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&n}updateChild(t,e,n,s,o,c){return this.matches(new M(e,n))||(n=b.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,s,o,c)}updateFullNode(t,e,n){e.isLeafNode()&&(e=b.EMPTY_NODE);let s=e.withIndex(this.index_);s=s.updatePriority(b.EMPTY_NODE);let o=this;return e.forEachChild(Y,(c,r)=>{o.matches(new M(c,r))||(s=s.updateImmediateChild(c,b.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}};var c0=class{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let n=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=e=>{let n=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new n3(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,n,s,o,c){return this.rangedFilter_.matches(new M(e,n))||(n=b.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,s,o,c):this.fullLimitUpdateChild_(t,e,n,o,c)}updateFullNode(t,e,n){let s;if(e.isLeafNode()||e.isEmpty())s=b.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){s=b.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){let r=o.getNext();if(this.withinDirectionalStart(r))if(this.withinDirectionalEnd(r))s=s.updateImmediateChild(r.name,r.node),c++;else break;else continue}}else{s=e.withIndex(this.index_),s=s.updatePriority(b.EMPTY_NODE);let o;this.reverse_?o=s.getReverseIterator(this.index_):o=s.getIterator(this.index_);let c=0;for(;o.hasNext();){let r=o.getNext();c<this.limit_&&this.withinDirectionalStart(r)&&this.withinDirectionalEnd(r)?c++:s=s.updateImmediateChild(r.name,b.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,n,s,o){let c;if(this.reverse_){let u=this.index_.getCompare();c=(d,f)=>u(f,d)}else c=this.index_.getCompare();let r=t;v(r.numChildren()===this.limit_,"");let a=new M(e,n),l=this.reverse_?r.getFirstChild(this.index_):r.getLastChild(this.index_),h=this.rangedFilter_.matches(a);if(r.hasChild(e)){let u=r.getImmediateChild(e),d=s.getChildAfterChild(this.index_,l,this.reverse_);for(;d!=null&&(d.name===e||r.hasChild(d.name));)d=s.getChildAfterChild(this.index_,d,this.reverse_);let f=d==null?1:c(d,a);if(h&&!n.isEmpty()&&f>=0)return o?.trackChildChange(S4(e,n,u)),r.updateImmediateChild(e,n);{o?.trackChildChange(E4(e,u));let w=r.updateImmediateChild(e,b.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(o?.trackChildChange(xt(d.name,d.node)),w.updateImmediateChild(d.name,d.node)):w}}else return n.isEmpty()?t:h&&c(l,a)>=0?(o!=null&&(o.trackChildChange(E4(l.name,l.node)),o.trackChildChange(xt(e,n))),r.updateImmediateChild(e,n).updateImmediateChild(l.name,b.EMPTY_NODE)):t}};var r0=class i{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Y}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return v(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return v(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Et}hasEnd(){return this.endSet_}getIndexEndValue(){return v(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return v(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ct}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return v(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Y}copy(){let t=new i;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function _d(i){return i.loadsAllData()?new V4(i.getIndex()):i.hasLimit()?new c0(i):new n3(i)}function zd(i,t){let e=i.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}function Pr(i){let t={};if(i.isDefault())return t;let e;if(i.index_===Y?e="$priority":i.index_===pd?e="$value":i.index_===Ct?e="$key":(v(i.index_ instanceof s0,"Unrecognized index type!"),e=i.index_.toString()),t.orderBy=Z(e),i.startSet_){let n=i.startAfterSet_?"startAfter":"startAt";t[n]=Z(i.indexStartValue_),i.startNameSet_&&(t[n]+=","+Z(i.indexStartName_))}if(i.endSet_){let n=i.endBeforeSet_?"endBefore":"endAt";t[n]=Z(i.indexEndValue_),i.endNameSet_&&(t[n]+=","+Z(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function jr(i){let t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let e=i.viewFrom_;e===""&&(i.isViewFromLeft()?e="l":e="r"),t.vf=e}return i.index_!==Y&&(t.i=i.index_.toString()),t}var a0=class i extends Z2{constructor(t,e,n,s){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=s,this.log_=D4("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(v(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,n,s){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let c=i.getListenId_(t,n),r={};this.listens_[c]=r;let a=Pr(t._queryParams);this.restRequest_(o+".json",a,(l,h)=>{let u=h;if(l===404&&(u=null,l=null),l===null&&this.onDataUpdate_(o,u,!1,n),$1(this.listens_,c)===r){let d;l?l===401?d="permission_denied":d="rest_error:"+l:d="ok",s(d,null)}})}unlisten(t,e){let n=i.getListenId_(t,e);delete this.listens_[n]}get(t){let e=Pr(t._queryParams),n=t._path.toString(),s=new U1;return this.restRequest_(n+".json",e,(o,c)=>{let r=c;o===404&&(r=null,o=null),o===null?(this.onDataUpdate_(n,r,!1,null),s.resolve(r)):s.reject(new Error(r))}),s.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(e.auth=s.accessToken),o&&o.token&&(e.ac=o.token);let c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Co(e);this.log_("Sending REST request for "+c);let r=new XMLHttpRequest;r.onreadystatechange=()=>{if(n&&r.readyState===4){this.log_("REST Response for "+c+" received. status:",r.status,"response:",r.responseText);let a=null;if(r.status>=200&&r.status<300){try{a=vt(r.responseText)}catch{De("Failed to parse JSON response for "+c+": "+r.responseText)}n(null,a)}else r.status!==401&&r.status!==404&&De("Got unsuccessful REST response for "+c+" Status: "+r.status),n(r.status);n=null}},r.open("GET",c,!0),r.send()})}};var l0=class{constructor(){this.rootNode_=b.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}};function s3(){return{value:null,children:new Map}}function I5(i,t,e){if(E(t))i.value=e,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,e);else{let n=C(t);i.children.has(n)||i.children.set(n,s3());let s=i.children.get(n);t=P(t),I5(s,t,e)}}function h0(i,t,e){i.value!==null?e(t,i.value):yd(i,(n,s)=>{let o=new I(t.toString()+"/"+n);h0(s,o,e)})}function yd(i,t){i.children.forEach((e,n)=>{t(n,e)})}var u0=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Se(this.last_,(n,s)=>{e[n]=e[n]-s}),this.last_=t,e}};var Ur=10*1e3,bd=30*1e3,wd=5*60*1e3,d0=class{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new u0(t);let n=Ur+(bd-Ur)*Math.random();z4(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let t=this.statsListener_.get(),e={},n=!1;Se(t,(s,o)=>{o>0&&e1(this.statsToReport_,s)&&(e[s]=o,n=!0)}),n&&this.server_.reportStats(e),z4(this.reportStats_.bind(this),Math.floor(Math.random()*2*wd))}};var s1=function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i}(s1||{});function A5(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function N0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function F0(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}var f0=class i{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=s1.ACK_USER_WRITE,this.source=A5()}operationForChild(t){if(E(this.path)){if(this.affectedTree.value!=null)return v(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new I(t));return new i(H(),e,this.revert)}}else return v(C(this.path)===t,"operationForChild called for unrelated child."),new i(P(this.path),this.affectedTree,this.revert)}};var o3=class i{constructor(t,e){this.source=t,this.path=e,this.type=s1.LISTEN_COMPLETE}operationForChild(t){return E(this.path)?new i(this.source,H()):new i(this.source,P(this.path))}};var Ot=class i{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=s1.OVERWRITE}operationForChild(t){return E(this.path)?new i(this.source,H(),this.snap.getImmediateChild(t)):new i(this.source,P(this.path),this.snap)}};var c3=class i{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=s1.MERGE}operationForChild(t){if(E(this.path)){let e=this.children.subtree(new I(t));return e.isEmpty()?null:e.value?new Ot(this.source,H(),e.value):new i(this.source,H(),e)}else return v(C(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new i(this.source,P(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var o1=class{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(E(t))return this.isFullyInitialized()&&!this.filtered_;let e=C(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var v0=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function Md(i,t,e,n){let s=[],o=[];return t.forEach(c=>{c.type==="child_changed"&&i.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(gd(c.childName,c.snapshotNode))}),_4(i,s,"child_removed",t,n,e),_4(i,s,"child_added",t,n,e),_4(i,s,"child_moved",o,n,e),_4(i,s,"child_changed",t,n,e),_4(i,s,"value",t,n,e),s}function _4(i,t,e,n,s,o){let c=n.filter(r=>r.type===e);c.sort((r,a)=>Ed(i,r,a)),c.forEach(r=>{let a=Cd(i,r,o);s.forEach(l=>{l.respondsTo(r.type)&&t.push(l.createEvent(a,i.query_))})})}function Cd(i,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function Ed(i,t,e){if(t.childName==null||e.childName==null)throw q1("Should only compare child_ events.");let n=new M(t.childName,t.snapshotNode),s=new M(e.childName,e.snapshotNode);return i.index_.compare(n,s)}function w3(i,t){return{eventCache:i,serverCache:t}}function b4(i,t,e,n){return w3(new o1(t,e,n),i.serverCache)}function k5(i,t,e,n){return w3(i.eventCache,new o1(t,e,n))}function r3(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function rt(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}var k8,Sd=()=>(k8||(k8=new Ue(Cu)),k8),Ve=class i{constructor(t,e=Sd()){this.value=t,this.children=e}static fromObject(t){let e=new i(null);return Se(t,(n,s)=>{e=e.set(new I(n),s)}),e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:H(),value:this.value};if(E(t))return null;{let n=C(t),s=this.children.get(n);if(s!==null){let o=s.findRootMostMatchingPathAndValue(P(t),e);return o!=null?{path:te(new I(n),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(E(t))return this;{let e=C(t),n=this.children.get(e);return n!==null?n.subtree(P(t)):new i(null)}}set(t,e){if(E(t))return new i(e,this.children);{let n=C(t),o=(this.children.get(n)||new i(null)).set(P(t),e),c=this.children.insert(n,o);return new i(this.value,c)}}remove(t){if(E(t))return this.children.isEmpty()?new i(null):new i(null,this.children);{let e=C(t),n=this.children.get(e);if(n){let s=n.remove(P(t)),o;return s.isEmpty()?o=this.children.remove(e):o=this.children.insert(e,s),this.value===null&&o.isEmpty()?new i(null):new i(this.value,o)}else return this}}get(t){if(E(t))return this.value;{let e=C(t),n=this.children.get(e);return n?n.get(P(t)):null}}setTree(t,e){if(E(t))return e;{let n=C(t),o=(this.children.get(n)||new i(null)).setTree(P(t),e),c;return o.isEmpty()?c=this.children.remove(n):c=this.children.insert(n,o),new i(this.value,c)}}fold(t){return this.fold_(H(),t)}fold_(t,e){let n={};return this.children.inorderTraversal((s,o)=>{n[s]=o.fold_(te(t,s),e)}),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,H(),e)}findOnPath_(t,e,n){let s=this.value?n(e,this.value):!1;if(s)return s;if(E(t))return null;{let o=C(t),c=this.children.get(o);return c?c.findOnPath_(P(t),te(e,o),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,H(),e)}foreachOnPath_(t,e,n){if(E(t))return this;{this.value&&n(e,this.value);let s=C(t),o=this.children.get(s);return o?o.foreachOnPath_(P(t),te(e,s),n):new i(null)}}foreach(t){this.foreach_(H(),t)}foreach_(t,e){this.children.inorderTraversal((n,s)=>{s.foreach_(te(t,n),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,n)=>{n.value&&t(e,n.value)})}};var Qe=class i{constructor(t){this.writeTree_=t}static empty(){return new i(new Ve(null))}};function w4(i,t,e){if(E(t))return new Qe(new Ve(e));{let n=i.writeTree_.findRootMostValueAndPath(t);if(n!=null){let s=n.path,o=n.value,c=ze(s,t);return o=o.updateChild(c,e),new Qe(i.writeTree_.set(s,o))}else{let s=new Ve(e),o=i.writeTree_.setTree(t,s);return new Qe(o)}}}function Wr(i,t,e){let n=i;return Se(e,(s,o)=>{n=w4(n,te(t,s),o)}),n}function qr(i,t){if(E(t))return Qe.empty();{let e=i.writeTree_.setTree(t,new Ve(null));return new Qe(e)}}function m0(i,t){return at(i,t)!=null}function at(i,t){let e=i.writeTree_.findRootMostValueAndPath(t);return e!=null?i.writeTree_.get(e.path).getChild(ze(e.path,t)):null}function $r(i){let t=[],e=i.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Y,(n,s)=>{t.push(new M(n,s))}):i.writeTree_.children.inorderTraversal((n,s)=>{s.value!=null&&t.push(new M(n,s.value))}),t}function E1(i,t){if(E(t))return i;{let e=at(i,t);return e!=null?new Qe(new Ve(e)):new Qe(i.writeTree_.subtree(t))}}function p0(i){return i.writeTree_.isEmpty()}function Tt(i,t){return B5(H(),i.writeTree_,t)}function B5(i,t,e){if(t.value!=null)return e.updateChild(i,t.value);{let n=null;return t.children.inorderTraversal((s,o)=>{s===".priority"?(v(o.value!==null,"Priority writes must always be leaf nodes"),n=o.value):e=B5(te(i,s),o,e)}),!e.getChild(i).isEmpty()&&n!==null&&(e=e.updateChild(te(i,".priority"),n)),e}}function M3(i,t){return P5(t,i)}function Vd(i,t,e,n,s){v(n>i.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),i.allWrites.push({path:t,snap:e,writeId:n,visible:s}),s&&(i.visibleWrites=w4(i.visibleWrites,t,e)),i.lastWriteId=n}function Hd(i,t){for(let e=0;e<i.allWrites.length;e++){let n=i.allWrites[e];if(n.writeId===t)return n}return null}function xd(i,t){let e=i.allWrites.findIndex(r=>r.writeId===t);v(e>=0,"removeWrite called with nonexistent writeId.");let n=i.allWrites[e];i.allWrites.splice(e,1);let s=n.visible,o=!1,c=i.allWrites.length-1;for(;s&&c>=0;){let r=i.allWrites[c];r.visible&&(c>=e&&Od(r,n.path)?s=!1:Ke(n.path,r.path)&&(o=!0)),c--}if(s){if(o)return Td(i),!0;if(n.snap)i.visibleWrites=qr(i.visibleWrites,n.path);else{let r=n.children;Se(r,a=>{i.visibleWrites=qr(i.visibleWrites,te(n.path,a))})}return!0}else return!1}function Od(i,t){if(i.snap)return Ke(i.path,t);for(let e in i.children)if(i.children.hasOwnProperty(e)&&Ke(te(i.path,e),t))return!0;return!1}function Td(i){i.visibleWrites=R5(i.allWrites,Ld,H()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function Ld(i){return i.visible}function R5(i,t,e){let n=Qe.empty();for(let s=0;s<i.length;++s){let o=i[s];if(t(o)){let c=o.path,r;if(o.snap)Ke(e,c)?(r=ze(e,c),n=w4(n,r,o.snap)):Ke(c,e)&&(r=ze(c,e),n=w4(n,H(),o.snap.getChild(r)));else if(o.children){if(Ke(e,c))r=ze(e,c),n=Wr(n,r,o.children);else if(Ke(c,e))if(r=ze(c,e),E(r))n=Wr(n,H(),o.children);else{let a=$1(o.children,C(r));if(a){let l=a.getChild(P(r));n=w4(n,H(),l)}}}else throw q1("WriteRecord should have .snap or .children")}}return n}function N5(i,t,e,n,s){if(!n&&!s){let o=at(i.visibleWrites,t);if(o!=null)return o;{let c=E1(i.visibleWrites,t);if(p0(c))return e;if(e==null&&!m0(c,H()))return null;{let r=e||b.EMPTY_NODE;return Tt(c,r)}}}else{let o=E1(i.visibleWrites,t);if(!s&&p0(o))return e;if(!s&&e==null&&!m0(o,H()))return null;{let c=function(l){return(l.visible||s)&&(!n||!~n.indexOf(l.writeId))&&(Ke(l.path,t)||Ke(t,l.path))},r=R5(i.allWrites,c,t),a=e||b.EMPTY_NODE;return Tt(r,a)}}}function Dd(i,t,e){let n=b.EMPTY_NODE,s=at(i.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(Y,(o,c)=>{n=n.updateImmediateChild(o,c)}),n;if(e){let o=E1(i.visibleWrites,t);return e.forEachChild(Y,(c,r)=>{let a=Tt(E1(o,new I(c)),r);n=n.updateImmediateChild(c,a)}),$r(o).forEach(c=>{n=n.updateImmediateChild(c.name,c.node)}),n}else{let o=E1(i.visibleWrites,t);return $r(o).forEach(c=>{n=n.updateImmediateChild(c.name,c.node)}),n}}function Id(i,t,e,n,s){v(n||s,"Either existingEventSnap or existingServerSnap must exist");let o=te(t,e);if(m0(i.visibleWrites,o))return null;{let c=E1(i.visibleWrites,o);return p0(c)?s.getChild(e):Tt(c,s.getChild(e))}}function Ad(i,t,e,n){let s=te(t,e),o=at(i.visibleWrites,s);if(o!=null)return o;if(n.isCompleteForChild(e)){let c=E1(i.visibleWrites,s);return Tt(c,n.getNode().getImmediateChild(e))}else return null}function kd(i,t){return at(i.visibleWrites,t)}function Bd(i,t,e,n,s,o,c){let r,a=E1(i.visibleWrites,t),l=at(a,H());if(l!=null)r=l;else if(e!=null)r=Tt(a,e);else return[];if(r=r.withIndex(c),!r.isEmpty()&&!r.isLeafNode()){let h=[],u=c.getCompare(),d=o?r.getReverseIteratorFrom(n,c):r.getIteratorFrom(n,c),f=d.getNext();for(;f&&h.length<s;)u(f,n)!==0&&h.push(f),f=d.getNext();return h}else return[]}function Rd(){return{visibleWrites:Qe.empty(),allWrites:[],lastWriteId:-1}}function a3(i,t,e,n){return N5(i.writeTree,i.treePath,t,e,n)}function P0(i,t){return Dd(i.writeTree,i.treePath,t)}function Gr(i,t,e,n){return Id(i.writeTree,i.treePath,t,e,n)}function l3(i,t){return kd(i.writeTree,te(i.treePath,t))}function Nd(i,t,e,n,s,o){return Bd(i.writeTree,i.treePath,t,e,n,s,o)}function j0(i,t,e){return Ad(i.writeTree,i.treePath,t,e)}function F5(i,t){return P5(te(i.treePath,t),i.writeTree)}function P5(i,t){return{treePath:i,writeTree:t}}var g0=class{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,n=t.childName;v(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),v(n!==".priority","Only non-priority child changes can be tracked.");let s=this.changeMap.get(n);if(s){let o=s.type;if(e==="child_added"&&o==="child_removed")this.changeMap.set(n,S4(n,t.snapshotNode,s.snapshotNode));else if(e==="child_removed"&&o==="child_added")this.changeMap.delete(n);else if(e==="child_removed"&&o==="child_changed")this.changeMap.set(n,E4(n,s.oldSnap));else if(e==="child_changed"&&o==="child_added")this.changeMap.set(n,xt(n,t.snapshotNode));else if(e==="child_changed"&&o==="child_changed")this.changeMap.set(n,S4(n,t.snapshotNode,s.oldSnap));else throw q1("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}};var _0=class{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}},j5=new _0,H4=class{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let n=this.optCompleteServerCache_!=null?new o1(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return j0(this.writes_,t,n)}}getChildAfterChild(t,e,n){let s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:rt(this.viewCache_),o=Nd(this.writes_,s,e,1,n,t);return o.length===0?null:o[0]}};function Fd(i){return{filter:i}}function Pd(i,t){v(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),v(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function jd(i,t,e,n,s){let o=new g0,c,r;if(e.type===s1.OVERWRITE){let l=e;l.source.fromUser?c=z0(i,t,l.path,l.snap,n,s,o):(v(l.source.fromServer,"Unknown source."),r=l.source.tagged||t.serverCache.isFiltered()&&!E(l.path),c=h3(i,t,l.path,l.snap,n,s,r,o))}else if(e.type===s1.MERGE){let l=e;l.source.fromUser?c=Wd(i,t,l.path,l.children,n,s,o):(v(l.source.fromServer,"Unknown source."),r=l.source.tagged||t.serverCache.isFiltered(),c=y0(i,t,l.path,l.children,n,s,r,o))}else if(e.type===s1.ACK_USER_WRITE){let l=e;l.revert?c=Gd(i,t,l.path,n,s,o):c=qd(i,t,l.path,l.affectedTree,n,s,o)}else if(e.type===s1.LISTEN_COMPLETE)c=$d(i,t,e.path,n,o);else throw q1("Unknown operation type: "+e.type);let a=o.getChanges();return Ud(t,c,a),{viewCache:c,changes:a}}function Ud(i,t,e){let n=t.eventCache;if(n.isFullyInitialized()){let s=n.getNode().isLeafNode()||n.getNode().isEmpty(),o=r3(i);(e.length>0||!i.eventCache.isFullyInitialized()||s&&!n.getNode().equals(o)||!n.getNode().getPriority().equals(o.getPriority()))&&e.push(D5(r3(t)))}}function U5(i,t,e,n,s,o){let c=t.eventCache;if(l3(n,e)!=null)return t;{let r,a;if(E(e))if(v(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=rt(t),h=l instanceof b?l:b.EMPTY_NODE,u=P0(n,h);r=i.filter.updateFullNode(t.eventCache.getNode(),u,o)}else{let l=a3(n,rt(t));r=i.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=C(e);if(l===".priority"){v(V1(e)===1,"Can't have a priority with additional path components");let h=c.getNode();a=t.serverCache.getNode();let u=Gr(n,e,h,a);u!=null?r=i.filter.updatePriority(h,u):r=c.getNode()}else{let h=P(e),u;if(c.isCompleteForChild(l)){a=t.serverCache.getNode();let d=Gr(n,e,c.getNode(),a);d!=null?u=c.getNode().getImmediateChild(l).updateChild(h,d):u=c.getNode().getImmediateChild(l)}else u=j0(n,l,t.serverCache);u!=null?r=i.filter.updateChild(c.getNode(),l,u,h,s,o):r=c.getNode()}}return b4(t,r,c.isFullyInitialized()||E(e),i.filter.filtersNodes())}}function h3(i,t,e,n,s,o,c,r){let a=t.serverCache,l,h=c?i.filter:i.filter.getIndexedFilter();if(E(e))l=h.updateFullNode(a.getNode(),n,null);else if(h.filtersNodes()&&!a.isFiltered()){let f=a.getNode().updateChild(e,n);l=h.updateFullNode(a.getNode(),f,null)}else{let f=C(e);if(!a.isCompleteForPath(e)&&V1(e)>1)return t;let m=P(e),J=a.getNode().getImmediateChild(f).updateChild(m,n);f===".priority"?l=h.updatePriority(a.getNode(),J):l=h.updateChild(a.getNode(),f,J,m,j5,null)}let u=k5(t,l,a.isFullyInitialized()||E(e),h.filtersNodes()),d=new H4(s,u,o);return U5(i,u,e,s,d,r)}function z0(i,t,e,n,s,o,c){let r=t.eventCache,a,l,h=new H4(s,t,o);if(E(e))l=i.filter.updateFullNode(t.eventCache.getNode(),n,c),a=b4(t,l,!0,i.filter.filtersNodes());else{let u=C(e);if(u===".priority")l=i.filter.updatePriority(t.eventCache.getNode(),n),a=b4(t,l,r.isFullyInitialized(),r.isFiltered());else{let d=P(e),f=r.getNode().getImmediateChild(u),m;if(E(d))m=n;else{let w=h.getCompleteChild(u);w!=null?E5(d)===".priority"&&w.getChild(V5(d)).isEmpty()?m=w:m=w.updateChild(d,n):m=b.EMPTY_NODE}if(f.equals(m))a=t;else{let w=i.filter.updateChild(r.getNode(),u,m,d,h,c);a=b4(t,w,r.isFullyInitialized(),i.filter.filtersNodes())}}}return a}function Yr(i,t){return i.eventCache.isCompleteForChild(t)}function Wd(i,t,e,n,s,o,c){let r=t;return n.foreach((a,l)=>{let h=te(e,a);Yr(t,C(h))&&(r=z0(i,r,h,l,s,o,c))}),n.foreach((a,l)=>{let h=te(e,a);Yr(t,C(h))||(r=z0(i,r,h,l,s,o,c))}),r}function Xr(i,t,e){return e.foreach((n,s)=>{t=t.updateChild(n,s)}),t}function y0(i,t,e,n,s,o,c,r){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let a=t,l;E(e)?l=n:l=new Ve(null).setTree(e,n);let h=t.serverCache.getNode();return l.children.inorderTraversal((u,d)=>{if(h.hasChild(u)){let f=t.serverCache.getNode().getImmediateChild(u),m=Xr(i,f,d);a=h3(i,a,new I(u),m,s,o,c,r)}}),l.children.inorderTraversal((u,d)=>{let f=!t.serverCache.isCompleteForChild(u)&&d.value===null;if(!h.hasChild(u)&&!f){let m=t.serverCache.getNode().getImmediateChild(u),w=Xr(i,m,d);a=h3(i,a,new I(u),w,s,o,c,r)}}),a}function qd(i,t,e,n,s,o,c){if(l3(s,e)!=null)return t;let r=t.serverCache.isFiltered(),a=t.serverCache;if(n.value!=null){if(E(e)&&a.isFullyInitialized()||a.isCompleteForPath(e))return h3(i,t,e,a.getNode().getChild(e),s,o,r,c);if(E(e)){let l=new Ve(null);return a.getNode().forEachChild(Ct,(h,u)=>{l=l.set(new I(h),u)}),y0(i,t,e,l,s,o,r,c)}else return t}else{let l=new Ve(null);return n.foreach((h,u)=>{let d=te(e,h);a.isCompleteForPath(d)&&(l=l.set(h,a.getNode().getChild(d)))}),y0(i,t,e,l,s,o,r,c)}}function $d(i,t,e,n,s){let o=t.serverCache,c=k5(t,o.getNode(),o.isFullyInitialized()||E(e),o.isFiltered());return U5(i,c,e,n,j5,s)}function Gd(i,t,e,n,s,o){let c;if(l3(n,e)!=null)return t;{let r=new H4(n,t,s),a=t.eventCache.getNode(),l;if(E(e)||C(e)===".priority"){let h;if(t.serverCache.isFullyInitialized())h=a3(n,rt(t));else{let u=t.serverCache.getNode();v(u instanceof b,"serverChildren would be complete if leaf node"),h=P0(n,u)}h=h,l=i.filter.updateFullNode(a,h,o)}else{let h=C(e),u=j0(n,h,t.serverCache);u==null&&t.serverCache.isCompleteForChild(h)&&(u=a.getImmediateChild(h)),u!=null?l=i.filter.updateChild(a,h,u,P(e),r,o):t.eventCache.getNode().hasChild(h)?l=i.filter.updateChild(a,h,b.EMPTY_NODE,P(e),r,o):l=a,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=a3(n,rt(t)),c.isLeafNode()&&(l=i.filter.updateFullNode(l,c,o)))}return c=t.serverCache.isFullyInitialized()||l3(n,H())!=null,b4(t,l,c,i.filter.filtersNodes())}}var b0=class{constructor(t,e){this.query_=t,this.eventRegistrations_=[];let n=this.query_._queryParams,s=new V4(n.getIndex()),o=_d(n);this.processor_=Fd(o);let c=e.serverCache,r=e.eventCache,a=s.updateFullNode(b.EMPTY_NODE,c.getNode(),null),l=o.updateFullNode(b.EMPTY_NODE,r.getNode(),null),h=new o1(a,c.isFullyInitialized(),s.filtersNodes()),u=new o1(l,r.isFullyInitialized(),o.filtersNodes());this.viewCache_=w3(u,h),this.eventGenerator_=new v0(this.query_)}get query(){return this.query_}};function Yd(i){return i.viewCache_.serverCache.getNode()}function Xd(i){return r3(i.viewCache_)}function Kd(i,t){let e=rt(i.viewCache_);return e&&(i.query._queryParams.loadsAllData()||!E(t)&&!e.getImmediateChild(C(t)).isEmpty())?e.getChild(t):null}function Kr(i){return i.eventRegistrations_.length===0}function Qd(i,t){i.eventRegistrations_.push(t)}function Qr(i,t,e){let n=[];if(e){v(t==null,"A cancel should cancel all event registrations.");let s=i.query._path;i.eventRegistrations_.forEach(o=>{let c=o.createCancelEvent(e,s);c&&n.push(c)})}if(t){let s=[];for(let o=0;o<i.eventRegistrations_.length;++o){let c=i.eventRegistrations_[o];if(!c.matches(t))s.push(c);else if(t.hasAnyCallback()){s=s.concat(i.eventRegistrations_.slice(o+1));break}}i.eventRegistrations_=s}else i.eventRegistrations_=[];return n}function Zr(i,t,e,n){t.type===s1.MERGE&&t.source.queryId!==null&&(v(rt(i.viewCache_),"We should always have a full cache before handling merges"),v(r3(i.viewCache_),"Missing event cache, even though we have a server cache"));let s=i.viewCache_,o=jd(i.processor_,s,t,e,n);return Pd(i.processor_,o.viewCache),v(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=o.viewCache,W5(i,o.changes,o.viewCache.eventCache.getNode(),null)}function Zd(i,t){let e=i.viewCache_.eventCache,n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Y,(o,c)=>{n.push(xt(o,c))}),e.isFullyInitialized()&&n.push(D5(e.getNode())),W5(i,n,e.getNode(),t)}function W5(i,t,e,n){let s=n?[n]:i.eventRegistrations_;return Md(i.eventGenerator_,t,e,s)}var u3,d3=class{constructor(){this.views=new Map}};function Jd(i){v(!u3,"__referenceConstructor has already been defined"),u3=i}function ef(){return v(u3,"Reference.ts has not been loaded"),u3}function tf(i){return i.views.size===0}function U0(i,t,e,n){let s=t.source.queryId;if(s!==null){let o=i.views.get(s);return v(o!=null,"SyncTree gave us an op for an invalid query."),Zr(o,t,e,n)}else{let o=[];for(let c of i.views.values())o=o.concat(Zr(c,t,e,n));return o}}function q5(i,t,e,n,s){let o=t._queryIdentifier,c=i.views.get(o);if(!c){let r=a3(e,s?n:null),a=!1;r?a=!0:n instanceof b?(r=P0(e,n),a=!1):(r=b.EMPTY_NODE,a=!1);let l=w3(new o1(r,a,!1),new o1(n,s,!1));return new b0(t,l)}return c}function nf(i,t,e,n,s,o){let c=q5(i,t,n,s,o);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,c),Qd(c,e),Zd(c,e)}function sf(i,t,e,n){let s=t._queryIdentifier,o=[],c=[],r=H1(i);if(s==="default")for(let[a,l]of i.views.entries())c=c.concat(Qr(l,e,n)),Kr(l)&&(i.views.delete(a),l.query._queryParams.loadsAllData()||o.push(l.query));else{let a=i.views.get(s);a&&(c=c.concat(Qr(a,e,n)),Kr(a)&&(i.views.delete(s),a.query._queryParams.loadsAllData()||o.push(a.query)))}return r&&!H1(i)&&o.push(new(ef())(t._repo,t._path)),{removed:o,events:c}}function $5(i){let t=[];for(let e of i.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function S1(i,t){let e=null;for(let n of i.views.values())e=e||Kd(n,t);return e}function G5(i,t){if(t._queryParams.loadsAllData())return C3(i);{let n=t._queryIdentifier;return i.views.get(n)}}function Y5(i,t){return G5(i,t)!=null}function H1(i){return C3(i)!=null}function C3(i){for(let t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var f3;function of(i){v(!f3,"__referenceConstructor has already been defined"),f3=i}function cf(){return v(f3,"Reference.ts has not been loaded"),f3}var rf=1,v3=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ve(null),this.pendingWriteTree_=Rd(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function af(i,t,e,n,s){return Vd(i.pendingWriteTree_,t,e,n,s),s?B4(i,new Ot(A5(),t,e)):[]}function wt(i,t,e=!1){let n=Hd(i.pendingWriteTree_,t);if(xd(i.pendingWriteTree_,t)){let o=new Ve(null);return n.snap!=null?o=o.set(H(),!0):Se(n.children,c=>{o=o.set(new I(c),!0)}),B4(i,new f0(n.path,o,e))}else return[]}function k4(i,t,e){return B4(i,new Ot(N0(),t,e))}function lf(i,t,e){let n=Ve.fromObject(e);return B4(i,new c3(N0(),t,n))}function hf(i,t){return B4(i,new o3(N0(),t))}function uf(i,t,e){let n=W0(i,e);if(n){let s=q0(n),o=s.path,c=s.queryId,r=ze(o,t),a=new o3(F0(c),r);return $0(i,o,a)}else return[]}function m3(i,t,e,n,s=!1){let o=t._path,c=i.syncPointTree_.get(o),r=[];if(c&&(t._queryIdentifier==="default"||Y5(c,t))){let a=sf(c,t,e,n);tf(c)&&(i.syncPointTree_=i.syncPointTree_.remove(o));let l=a.removed;if(r=a.events,!s){let h=l.findIndex(d=>d._queryParams.loadsAllData())!==-1,u=i.syncPointTree_.findOnPath(o,(d,f)=>H1(f));if(h&&!u){let d=i.syncPointTree_.subtree(o);if(!d.isEmpty()){let f=vf(d);for(let m=0;m<f.length;++m){let w=f[m],J=w.query,lt=J5(i,w);i.listenProvider_.startListening(M4(J),x4(i,J),lt.hashFn,lt.onComplete)}}}!u&&l.length>0&&!n&&(h?i.listenProvider_.stopListening(M4(t),null):l.forEach(d=>{let f=i.queryToTagMap.get(E3(d));i.listenProvider_.stopListening(M4(d),f)}))}mf(i,l)}return r}function X5(i,t,e,n){let s=W0(i,n);if(s!=null){let o=q0(s),c=o.path,r=o.queryId,a=ze(c,t),l=new Ot(F0(r),a,e);return $0(i,c,l)}else return[]}function df(i,t,e,n){let s=W0(i,n);if(s){let o=q0(s),c=o.path,r=o.queryId,a=ze(c,t),l=Ve.fromObject(e),h=new c3(F0(r),a,l);return $0(i,c,h)}else return[]}function w0(i,t,e,n=!1){let s=t._path,o=null,c=!1;i.syncPointTree_.foreachOnPath(s,(d,f)=>{let m=ze(d,s);o=o||S1(f,m),c=c||H1(f)});let r=i.syncPointTree_.get(s);r?(c=c||H1(r),o=o||S1(r,H())):(r=new d3,i.syncPointTree_=i.syncPointTree_.set(s,r));let a;o!=null?a=!0:(a=!1,o=b.EMPTY_NODE,i.syncPointTree_.subtree(s).foreachChild((f,m)=>{let w=S1(m,H());w&&(o=o.updateImmediateChild(f,w))}));let l=Y5(r,t);if(!l&&!t._queryParams.loadsAllData()){let d=E3(t);v(!i.queryToTagMap.has(d),"View does not exist, but we have a tag");let f=pf();i.queryToTagMap.set(d,f),i.tagToQueryMap.set(f,d)}let h=M3(i.pendingWriteTree_,s),u=nf(r,t,e,h,o,a);if(!l&&!c&&!n){let d=G5(r,t);u=u.concat(gf(i,t,d))}return u}function K5(i,t,e){let s=i.pendingWriteTree_,o=i.syncPointTree_.findOnPath(t,(c,r)=>{let a=ze(c,t),l=S1(r,a);if(l)return l});return N5(s,t,o,e,!0)}function ff(i,t){let e=t._path,n=null;i.syncPointTree_.foreachOnPath(e,(l,h)=>{let u=ze(l,e);n=n||S1(h,u)});let s=i.syncPointTree_.get(e);s?n=n||S1(s,H()):(s=new d3,i.syncPointTree_=i.syncPointTree_.set(e,s));let o=n!=null,c=o?new o1(n,!0,!1):null,r=M3(i.pendingWriteTree_,t._path),a=q5(s,t,r,o?c.getNode():b.EMPTY_NODE,o);return Xd(a)}function B4(i,t){return Q5(t,i.syncPointTree_,null,M3(i.pendingWriteTree_,H()))}function Q5(i,t,e,n){if(E(i.path))return Z5(i,t,e,n);{let s=t.get(H());e==null&&s!=null&&(e=S1(s,H()));let o=[],c=C(i.path),r=i.operationForChild(c),a=t.children.get(c);if(a&&r){let l=e?e.getImmediateChild(c):null,h=F5(n,c);o=o.concat(Q5(r,a,l,h))}return s&&(o=o.concat(U0(s,i,n,e))),o}}function Z5(i,t,e,n){let s=t.get(H());e==null&&s!=null&&(e=S1(s,H()));let o=[];return t.children.inorderTraversal((c,r)=>{let a=e?e.getImmediateChild(c):null,l=F5(n,c),h=i.operationForChild(c);h&&(o=o.concat(Z5(h,r,a,l)))}),s&&(o=o.concat(U0(s,i,n,e))),o}function J5(i,t){let e=t.query,n=x4(i,e);return{hashFn:()=>(Yd(t)||b.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return n?uf(i,e._path,n):hf(i,e._path);{let o=Vu(s,e);return m3(i,e,null,o)}}}}function x4(i,t){let e=E3(t);return i.queryToTagMap.get(e)}function E3(i){return i._path.toString()+"$"+i._queryIdentifier}function W0(i,t){return i.tagToQueryMap.get(t)}function q0(i){let t=i.indexOf("$");return v(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new I(i.substr(0,t))}}function $0(i,t,e){let n=i.syncPointTree_.get(t);v(n,"Missing sync point for query tag that we're tracking");let s=M3(i.pendingWriteTree_,t);return U0(n,e,s,null)}function vf(i){return i.fold((t,e,n)=>{if(e&&H1(e))return[C3(e)];{let s=[];return e&&(s=$5(e)),Se(n,(o,c)=>{s=s.concat(c)}),s}})}function M4(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(cf())(i._repo,i._path):i}function mf(i,t){for(let e=0;e<t.length;++e){let n=t[e];if(!n._queryParams.loadsAllData()){let s=E3(n),o=i.queryToTagMap.get(s);i.queryToTagMap.delete(s),i.tagToQueryMap.delete(o)}}}function pf(){return rf++}function gf(i,t,e){let n=t._path,s=x4(i,t),o=J5(i,e),c=i.listenProvider_.startListening(M4(t),s,o.hashFn,o.onComplete),r=i.syncPointTree_.subtree(n);if(s)v(!H1(r.value),"If we're adding a query, it shouldn't be shadowed");else{let a=r.fold((l,h,u)=>{if(!E(l)&&h&&H1(h))return[C3(h).query];{let d=[];return h&&(d=d.concat($5(h).map(f=>f.query))),Se(u,(f,m)=>{d=d.concat(m)}),d}});for(let l=0;l<a.length;++l){let h=a[l];i.listenProvider_.stopListening(M4(h),x4(i,h))}}return c}var M0=class i{constructor(t){this.node_=t}getImmediateChild(t){let e=this.node_.getImmediateChild(t);return new i(e)}node(){return this.node_}},C0=class i{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=te(this.path_,t);return new i(this.syncTree_,e)}node(){return K5(this.syncTree_,this.path_)}},_f=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},Jr=function(i,t,e){if(!i||typeof i!="object")return i;if(v(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return zf(i[".sv"],t,e);if(typeof i[".sv"]=="object")return yf(i[".sv"],t);v(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},zf=function(i,t,e){switch(i){case"timestamp":return e.timestamp;default:v(!1,"Unexpected server value: "+i)}},yf=function(i,t,e){i.hasOwnProperty("increment")||v(!1,"Unexpected server value: "+JSON.stringify(i,null,2));let n=i.increment;typeof n!="number"&&v(!1,"Unexpected increment value: "+n);let s=t.node();if(v(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return n;let c=s.getValue();return typeof c!="number"?n:c+n},bf=function(i,t,e,n){return G0(t,new C0(e,i),n)},wf=function(i,t,e){return G0(i,new M0(t),e)};function G0(i,t,e){let n=i.getPriority().val(),s=Jr(n,t.getImmediateChild(".priority"),e),o;if(i.isLeafNode()){let c=i,r=Jr(c.getValue(),t,e);return r!==c.getValue()||s!==c.getPriority().val()?new Vt(r,ae(s)):i}else{let c=i;return o=c,s!==c.getPriority().val()&&(o=o.updatePriority(new Vt(s))),c.forEachChild(Y,(r,a)=>{let l=G0(a,t.getImmediateChild(r),e);l!==a&&(o=o.updateImmediateChild(r,l))}),o}}var O4=class{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}};function Y0(i,t){let e=t instanceof I?t:new I(t),n=i,s=C(e);for(;s!==null;){let o=$1(n.node.children,s)||{children:{},childCount:0};n=new O4(s,n,o),e=P(e),s=C(e)}return n}function Dt(i){return i.node.value}function e7(i,t){i.node.value=t,E0(i)}function t7(i){return i.node.childCount>0}function Mf(i){return Dt(i)===void 0&&!t7(i)}function S3(i,t){Se(i.node.children,(e,n)=>{t(new O4(e,i,n))})}function i7(i,t,e,n){e&&!n&&t(i),S3(i,s=>{i7(s,t,!0,n)}),e&&n&&t(i)}function Cf(i,t,e){let n=e?i:i.parent;for(;n!==null;){if(t(n))return!0;n=n.parent}return!1}function R4(i){return new I(i.parent===null?i.name:R4(i.parent)+"/"+i.name)}function E0(i){i.parent!==null&&Ef(i.parent,i.name,i)}function Ef(i,t,e){let n=Mf(e),s=e1(i.node.children,t);n&&s?(delete i.node.children[t],i.node.childCount--,E0(i)):!n&&!s&&(i.node.children[t]=e.node,i.node.childCount++,E0(i))}var Sf=/[\[\].#$\/\u0000-\u001F\u007F]/,Vf=/[\[\].#$\u0000-\u001F\u007F]/,B8=10*1024*1024,n7=function(i){return typeof i=="string"&&i.length!==0&&!Sf.test(i)},s7=function(i){return typeof i=="string"&&i.length!==0&&!Vf.test(i)},Hf=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),s7(i)};var o7=function(i,t,e){let n=e instanceof I?new Q8(e,i):e;if(t===void 0)throw new Error(i+"contains undefined "+nt(n));if(typeof t=="function")throw new Error(i+"contains a function "+nt(n)+" with contents = "+t.toString());if(p5(t))throw new Error(i+"contains "+t.toString()+" "+nt(n));if(typeof t=="string"&&t.length>B8/3&&e4(t)>B8)throw new Error(i+"contains a string greater than "+B8+" utf8 bytes "+nt(n)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,o=!1;if(Se(t,(c,r)=>{if(c===".value")s=!0;else if(c!==".priority"&&c!==".sv"&&(o=!0,!n7(c)))throw new Error(i+" contains an invalid key ("+c+") "+nt(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sd(n,c),o7(i,r,n),od(n)}),s&&o)throw new Error(i+' contains ".value" child '+nt(n)+" in addition to actual children.")}};var c7=function(i,t,e,n){if(!(n&&e===void 0)&&!s7(e))throw new Error(B6(i,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},xf=function(i,t,e,n){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),c7(i,t,e,n)};var Of=function(i,t){let e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!n7(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!Hf(e))throw new Error(B6(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var S0=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function r7(i,t){let e=null;for(let n=0;n<t.length;n++){let s=t[n],o=s.getPath();e!==null&&!k0(o,e.path)&&(i.eventLists_.push(e),e=null),e===null&&(e={events:[],path:o}),e.events.push(s)}e&&i.eventLists_.push(e)}function a7(i,t,e){r7(i,e),l7(i,n=>k0(n,t))}function x1(i,t,e){r7(i,e),l7(i,n=>Ke(n,t)||Ke(t,n))}function l7(i,t){i.recursionDepth_++;let e=!0;for(let n=0;n<i.eventLists_.length;n++){let s=i.eventLists_[n];if(s){let o=s.path;t(o)?(Tf(i.eventLists_[n]),i.eventLists_[n]=null):e=!1}}e&&(i.eventLists_=[]),i.recursionDepth_--}function Tf(i){for(let t=0;t<i.events.length;t++){let e=i.events[t];if(e!==null){i.events[t]=null;let n=e.getEventRunner();ot&&ue("event: "+e.toString()),I4(n)}}}var Lf="repo_interrupt",Df=25,V0=class{constructor(t,e,n,s){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new S0,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=s3(),this.transactionQueueTree_=new O4,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function If(i,t,e){if(i.stats_=I0(i.repoInfo_),i.forceRestClient_||Tu())i.server_=new a0(i.repoInfo_,(n,s,o,c)=>{e5(i,n,s,o,c)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>t5(i,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Z(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}i.persistentConnection_=new B0(i.repoInfo_,t,(n,s,o,c)=>{e5(i,n,s,o,c)},n=>{t5(i,n)},n=>{kf(i,n)},i.authTokenProvider_,i.appCheckProvider_,e),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(n=>{i.server_.refreshAuthToken(n)}),i.appCheckProvider_.addTokenChangeListener(n=>{i.server_.refreshAppCheckToken(n.token)}),i.statsReporter_=Du(i.repoInfo_,()=>new d0(i.stats_,i.server_)),i.infoData_=new l0,i.infoSyncTree_=new v3({startListening:(n,s,o,c)=>{let r=[],a=i.infoData_.getNode(n._path);return a.isEmpty()||(r=k4(i.infoSyncTree_,n._path,a),setTimeout(()=>{c("ok")},0)),r},stopListening:()=>{}}),X0(i,"connected",!1),i.serverSyncTree_=new v3({startListening:(n,s,o,c)=>(i.server_.listen(n,o,s,(r,a)=>{let l=c(r,a);x1(i.eventQueue_,n._path,l)}),[]),stopListening:(n,s)=>{i.server_.unlisten(n,s)}})}function Af(i){let e=i.infoData_.getNode(new I(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function h7(i){return _f({timestamp:Af(i)})}function e5(i,t,e,n,s){i.dataUpdateCount++;let o=new I(t);e=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,e):e;let c=[];if(s)if(n){let a=Jt(e,l=>ae(l));c=df(i.serverSyncTree_,o,a,s)}else{let a=ae(e);c=X5(i.serverSyncTree_,o,a,s)}else if(n){let a=Jt(e,l=>ae(l));c=lf(i.serverSyncTree_,o,a)}else{let a=ae(e);c=k4(i.serverSyncTree_,o,a)}let r=o;c.length>0&&(r=Z0(i,o)),x1(i.eventQueue_,r,c)}function t5(i,t){X0(i,"connected",t),t===!1&&Nf(i)}function kf(i,t){Se(t,(e,n)=>{X0(i,e,n)})}function X0(i,t,e){let n=new I("/.info/"+t),s=ae(e);i.infoData_.updateSnapshot(n,s);let o=k4(i.infoSyncTree_,n,s);x1(i.eventQueue_,n,o)}function Bf(i){return i.nextWriteId_++}function Rf(i,t,e){let n=ff(i.serverSyncTree_,t);return n!=null?Promise.resolve(n):i.server_.get(t).then(s=>{let o=ae(s).withIndex(t._queryParams.getIndex());w0(i.serverSyncTree_,t,e,!0);let c;if(t._queryParams.loadsAllData())c=k4(i.serverSyncTree_,t._path,o);else{let r=x4(i.serverSyncTree_,t);c=X5(i.serverSyncTree_,t._path,o,r)}return x1(i.eventQueue_,t._path,c),m3(i.serverSyncTree_,t,e,null,!0),o},s=>(K0(i,"get for query "+Z(t)+" failed: "+s),Promise.reject(new Error(s))))}function Nf(i){K0(i,"onDisconnectEvents");let t=h7(i),e=s3();h0(i.onDisconnect_,H(),(s,o)=>{let c=bf(s,o,i.serverSyncTree_,t);I5(e,s,c)});let n=[];h0(e,H(),(s,o)=>{n=n.concat(k4(i.serverSyncTree_,s,o));let c=Wf(i,s);Z0(i,c)}),i.onDisconnect_=s3(),x1(i.eventQueue_,H(),n)}function Ff(i,t,e){let n;C(t._path)===".info"?n=w0(i.infoSyncTree_,t,e):n=w0(i.serverSyncTree_,t,e),a7(i.eventQueue_,t._path,n)}function i5(i,t,e){let n;C(t._path)===".info"?n=m3(i.infoSyncTree_,t,e):n=m3(i.serverSyncTree_,t,e),a7(i.eventQueue_,t._path,n)}function Pf(i){i.persistentConnection_&&i.persistentConnection_.interrupt(Lf)}function K0(i,...t){let e="";i.persistentConnection_&&(e=i.persistentConnection_.id+":"),ue(e,...t)}function u7(i,t,e){return K5(i.serverSyncTree_,t,e)||b.EMPTY_NODE}function Q0(i,t=i.transactionQueueTree_){if(t||V3(i,t),Dt(t)){let e=f7(i,t);v(e.length>0,"Sending zero length transaction queue"),e.every(s=>s.status===0)&&jf(i,R4(t),e)}else t7(t)&&S3(t,e=>{Q0(i,e)})}function jf(i,t,e){let n=e.map(l=>l.currentWriteId),s=u7(i,t,n),o=s,c=s.hash();for(let l=0;l<e.length;l++){let h=e[l];v(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let u=ze(t,h.path);o=o.updateChild(u,h.currentOutputSnapshotRaw)}let r=o.val(!0),a=t;i.server_.put(a.toString(),r,l=>{K0(i,"transaction put response",{path:a.toString(),status:l});let h=[];if(l==="ok"){let u=[];for(let d=0;d<e.length;d++)e[d].status=2,h=h.concat(wt(i.serverSyncTree_,e[d].currentWriteId)),e[d].onComplete&&u.push(()=>e[d].onComplete(null,!0,e[d].currentOutputSnapshotResolved)),e[d].unwatcher();V3(i,Y0(i.transactionQueueTree_,t)),Q0(i,i.transactionQueueTree_),x1(i.eventQueue_,t,h);for(let d=0;d<u.length;d++)I4(u[d])}else{if(l==="datastale")for(let u=0;u<e.length;u++)e[u].status===3?e[u].status=4:e[u].status=0;else{De("transaction at "+a.toString()+" failed: "+l);for(let u=0;u<e.length;u++)e[u].status=4,e[u].abortReason=l}Z0(i,t)}},c)}function Z0(i,t){let e=d7(i,t),n=R4(e),s=f7(i,e);return Uf(i,s,n),n}function Uf(i,t,e){if(t.length===0)return;let n=[],s=[],c=t.filter(r=>r.status===0).map(r=>r.currentWriteId);for(let r=0;r<t.length;r++){let a=t[r],l=ze(e,a.path),h=!1,u;if(v(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)h=!0,u=a.abortReason,s=s.concat(wt(i.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=Df)h=!0,u="maxretry",s=s.concat(wt(i.serverSyncTree_,a.currentWriteId,!0));else{let d=u7(i,a.path,c);a.currentInputSnapshot=d;let f=t[r].update(d.val());if(f!==void 0){o7("transaction failed: Data returned ",f,a.path);let m=ae(f);typeof f=="object"&&f!=null&&e1(f,".priority")||(m=m.updatePriority(d.getPriority()));let J=a.currentWriteId,lt=h7(i),W4=wf(m,d,lt);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=W4,a.currentWriteId=Bf(i),c.splice(c.indexOf(J),1),s=s.concat(af(i.serverSyncTree_,a.path,W4,a.currentWriteId,a.applyLocally)),s=s.concat(wt(i.serverSyncTree_,J,!0))}else h=!0,u="nodata",s=s.concat(wt(i.serverSyncTree_,a.currentWriteId,!0))}x1(i.eventQueue_,e,s),s=[],h&&(t[r].status=2,function(d){setTimeout(d,Math.floor(0))}(t[r].unwatcher),t[r].onComplete&&(u==="nodata"?n.push(()=>t[r].onComplete(null,!1,t[r].currentInputSnapshot)):n.push(()=>t[r].onComplete(new Error(u),!1,null))))}V3(i,i.transactionQueueTree_);for(let r=0;r<n.length;r++)I4(n[r]);Q0(i,i.transactionQueueTree_)}function d7(i,t){let e,n=i.transactionQueueTree_;for(e=C(t);e!==null&&Dt(n)===void 0;)n=Y0(n,e),t=P(t),e=C(t);return n}function f7(i,t){let e=[];return v7(i,t,e),e.sort((n,s)=>n.order-s.order),e}function v7(i,t,e){let n=Dt(t);if(n)for(let s=0;s<n.length;s++)e.push(n[s]);S3(t,s=>{v7(i,s,e)})}function V3(i,t){let e=Dt(t);if(e){let n=0;for(let s=0;s<e.length;s++)e[s].status!==2&&(e[n]=e[s],n++);e.length=n,e7(t,e.length>0?e:void 0)}S3(t,n=>{V3(i,n)})}function Wf(i,t){let e=R4(d7(i,t)),n=Y0(i.transactionQueueTree_,t);return Cf(n,s=>{R8(i,s)}),R8(i,n),i7(n,s=>{R8(i,s)}),e}function R8(i,t){let e=Dt(t);if(e){let n=[],s=[],o=-1;for(let c=0;c<e.length;c++)e[c].status===3||(e[c].status===1?(v(o===c-1,"All SENT items should be at beginning of queue."),o=c,e[c].status=3,e[c].abortReason="set"):(v(e[c].status===0,"Unexpected transaction status in abort"),e[c].unwatcher(),s=s.concat(wt(i.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&n.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));o===-1?e7(t,void 0):e.length=o+1,x1(i.eventQueue_,R4(t),s);for(let c=0;c<n.length;c++)I4(n[c])}}function qf(i){let t="",e=i.split("/");for(let n=0;n<e.length;n++)if(e[n].length>0){let s=e[n];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function $f(i){let t={};i.charAt(0)==="?"&&(i=i.substring(1));for(let e of i.split("&")){if(e.length===0)continue;let n=e.split("=");n.length===2?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):De(`Invalid query segment '${e}' in query '${i}'`)}return t}var n5=function(i,t){let e=Gf(i),n=e.namespace;e.domain==="firebase.com"&&m1(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&e.domain!=="localhost"&&m1("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||wu();let s=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new Q2(e.host,e.secure,n,s,t,"",n!==e.subdomain),path:new I(e.pathString)}},Gf=function(i){let t="",e="",n="",s="",o="",c=!0,r="https",a=443;if(typeof i=="string"){let l=i.indexOf("//");l>=0&&(r=i.substring(0,l-1),i=i.substring(l+2));let h=i.indexOf("/");h===-1&&(h=i.length);let u=i.indexOf("?");u===-1&&(u=i.length),t=i.substring(0,Math.min(h,u)),h<u&&(s=qf(i.substring(h,u)));let d=$f(i.substring(Math.min(i.length,u)));l=t.indexOf(":"),l>=0?(c=r==="https"||r==="wss",a=parseInt(t.substring(l+1),10)):l=t.length;let f=t.slice(0,l);if(f.toLowerCase()==="localhost")e="localhost";else if(f.split(".").length<=2)e=f;else{let m=t.indexOf(".");n=t.substring(0,m).toLowerCase(),e=t.substring(m+1),o=n}"ns"in d&&(o=d.ns)}return{host:t,port:a,domain:e,subdomain:n,secure:c,scheme:r,pathString:s,namespace:o}};var p3=class{constructor(t,e,n,s){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=s}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Z(this.snapshot.exportVal())}},g3=class{constructor(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var _3=class{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return v(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var z3=class i{constructor(t,e,n,s){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=s}get key(){return E(this._path)?null:E5(this._path)}get ref(){return new c1(this._repo,this._path)}get _queryIdentifier(){let t=jr(this._queryParams),e=D0(t);return e==="{}"?"default":e}get _queryObject(){return jr(this._queryParams)}isEqual(t){if(t=G1(t),!(t instanceof i))return!1;let e=this._repo===t._repo,n=k0(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return e&&n&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+nd(this._path)}};var c1=class i extends z3{constructor(t,e){super(t,e,new r0,!1)}get parent(){let t=V5(this._path);return t===null?null:new i(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},T4=class i{constructor(t,e,n){this._node=t,this.ref=e,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let e=new I(t),n=y3(this.ref,t);return new i(this._node.getChild(e),n,Y)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>t(new i(s,y3(this.ref,n),Y)))}hasChild(t){let e=new I(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function H3(i,t){return i=G1(i),i._checkNotDeleted("ref"),t!==void 0?y3(i._root,t):i._root}function y3(i,t){return i=G1(i),C(i._path)===null?xf("child","path",t,!1):c7("child","path",t,!1),new c1(i._repo,te(i._path,t))}function J0(i){i=G1(i);let t=new _3(()=>{}),e=new b3(t);return Rf(i._repo,i,e).then(n=>new T4(n,new c1(i._repo,i._path),i._queryParams.getIndex()))}var b3=class i{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){let n=e._queryParams.getIndex();return new p3("value",this,new T4(t.snapshotNode,new c1(e._repo,e._path),n))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new g3(this,t,e):null}matches(t){return t instanceof i?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},H0=class i{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e=t==="children_added"?"child_added":t;return e=e==="children_removed"?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new g3(this,t,e):null}createEvent(t,e){v(t.childName!=null,"Child events should have a childName.");let n=y3(new c1(e._repo,e._path),t.childName),s=e._queryParams.getIndex();return new p3(t.type,this,new T4(t.snapshotNode,n,s),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof i?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Yf(i,t,e,n,s){let o;if(typeof n=="object"&&(o=void 0,s=n),typeof n=="function"&&(o=n),s&&s.onlyOnce){let a=e,l=(h,u)=>{i5(i._repo,i,r),a(h,u)};l.userCallback=e.userCallback,l.context=e.context,e=l}let c=new _3(e,o||void 0),r=t==="value"?new b3(c):new H0(t,c);return Ff(i._repo,i,r),()=>i5(i._repo,i,r)}function m7(i,t,e,n){return Yf(i,"value",t,e,n)}var x0=class{};var O0=class extends x0{constructor(t){super(),this._limit=t,this.type="limitToFirst"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new z3(t._repo,t._path,zd(t._queryParams,this._limit),t._orderByCalled)}};function p7(i){if(typeof i!="number"||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new O0(i)}function g7(i,...t){let e=G1(i);for(let n of t)e=n._apply(e);return e}Jd(c1);of(c1);var Xf="FIREBASE_DATABASE_EMULATOR_HOST",T0={},Kf=!1;function Qf(i,t,e,n){i.repoInfo_=new Q2(`${t}:${e}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),n&&(i.authTokenProvider_=n)}function Zf(i,t,e,n,s){let o=n||i.options.databaseURL;o===void 0&&(i.options.projectId||m1("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ue("Using default host for project ",i.options.projectId),o=`${i.options.projectId}-default-rtdb.firebaseio.com`);let c=n5(o,s),r=c.repoInfo,a,l;typeof process<"u"&&process.env&&(l=process.env[Xf]),l?(a=!0,o=`http://${l}?ns=${r.namespace}`,c=n5(o,s),r=c.repoInfo):a=!c.repoInfo.secure;let h=s&&a?new y4(y4.OWNER):new $8(i.name,i.options,t);Of("Invalid Firebase Database URL",c),E(c.path)||m1("Database URL must point to the root of a Firebase Database (not including a child path).");let u=ev(r,i,h,new q8(i.name,e));return new L0(u,i)}function Jf(i,t){let e=T0[t];(!e||e[i.key]!==i)&&m1(`Database ${t}(${i.repoInfo_}) has already been deleted.`),Pf(i),delete e[i.key]}function ev(i,t,e,n){let s=T0[t.name];s||(s={},T0[t.name]=s);let o=s[i.toURLString()];return o&&m1("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new V0(i,Kf,e,n),s[i.toURLString()]=o,o}var L0=class{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(If(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new c1(this._repo,H())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Jf(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&m1("Cannot call "+t+" on a deleted database.")}};function _7(i=Fo(),t){let e=Ro(i,"database").getImmediate({identifier:t});if(!e._instanceStarted){let n=po("database");n&&tv(e,...n)}return e}function tv(i,t,e,n={}){i=G1(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&m1("Cannot call useEmulator() after instance has already been initialized.");let s=i._repoInternal,o;if(s.repoInfo_.nodeAdmin)n.mockUserToken&&m1('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new y4(y4.OWNER);else if(n.mockUserToken){let c=typeof n.mockUserToken=="string"?n.mockUserToken:go(n.mockUserToken,i.app.options.projectId);o=new y4(c)}Qf(s,t,e,o)}function iv(i){Iu(No),i4(new f1("database",(t,{instanceIdentifier:e})=>{let n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return Zf(n,s,o,e)},"PUBLIC").setMultipleInstances(!0)),w1(Vr,Hr,i),w1(Vr,Hr,"esm2017")}B0.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};B0.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};Bu(s5.default.Client);iv("node");var x3=class i{constructor(t){this.platformId=t;if(n2(this.platformId)){this.course_db=_7(Uo);let e=H3(this.course_db,this.dataPath);m7(e,n=>{let s=n.val();this.firebaseDataSubject.next(s)})}}course_db;firebaseDataSubject=new We(null);firebaseData$=this.firebaseDataSubject.asObservable();dataPath="-OATAINcM2gAJQwfV2Df";getLimitedData(){if(!this.course_db)return Ze(null);let t=H3(this.course_db,this.dataPath),e=g7(t,p7(6));return g1(J0(e).then(n=>n.val()))}getAllData(){if(!this.course_db)return Ze(null);let t=H3(this.course_db,this.dataPath);return g1(J0(t).then(e=>e.val()))}static \u0275fac=function(e){return new(e||i)(p(X4))};static \u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})};var z7=class i{constructor(t){this.courseDbService=t;this.courseDbService.firebaseData$.subscribe(e=>{this.myData=e,console.log("Service A received updated data:",this.myData)})}myData;course={\u5927\u4E58\u8D77\u4FE1\u8AD6:[{title:"\u5927\u4E58\u8D77\u4FE1\u8AD6\u7B2C\u4E00\u96C6(\u4E0A)",video_id:"wPGuGXTs75I"},{title:"\u5927\u4E58\u8D77\u4FE1\u8AD6\u7B2C\u4E00\u96C6(\u4E0B)",video_id:"DSboF3McjiA"},{title:"\u5927\u4E58\u8D77\u4FE1\u8AD6\u7B2C\u4E8C\u96C6(\u4E0A)",video_id:"YsLb69JGofA"},{title:"\u5927\u4E58\u8D77\u4FE1\u8AD6\u7B2C\u4E8C\u96C6(\u4E0B)",video_id:"NBu-u9yqHfs"},{title:"\u5927\u4E58\u8D77\u4FE1\u8AD6\u7B2C\u4E09\u96C6(\u4E0A)",video_id:"qFpCSxgbak4"},{title:"\u5927\u4E58\u8D77\u4FE1\u8AD6\u7B2C\u4E09\u96C6(\u4E0B)",video_id:"QMyBYg2MfFY"},{title:"\u5927\u4E58\u8D77\u4FE1\u8AD6\u7B2C\u56DB\u96C6(\u4E0A)",video_id:"GrGwkkWybVY"},{title:"\u5927\u4E58\u8D77\u4FE1\u8AD6\u7B2C\u56DB\u96C6(\u4E0B)",video_id:"aNArOLl4axA"}],\u552F\u8B58\u5B78\u5C08\u984C:[{title:"\u3010\u5FC3\u610F\u8B58\u8F49\u5316\u79AA\u4FEE\u71DF \u4EE5\u552F\u8B58\u5FC3\u7406\u5B78\u70BA\u6A5F\u8F49\u3011\u5FC3\u610F\u8B58\u7684\u904B\u4F5C\u6A21\u5F0F 01",video_id:"SFYBaEUTjMc"},{title:"\u3010\u5FC3\u610F\u8B58\u8F49\u5316\u79AA\u4FEE\u71DF \u4EE5\u552F\u8B58\u5FC3\u7406\u5B78\u70BA\u6A5F\u8F49\u3011\u5FC3\u610F\u8B58\u7684\u904B\u4F5C\u6A21\u5F0F 02",video_id:"qKbtS9Cgf68"},{title:"\u3010\u5FC3\u610F\u8B58\u8F49\u5316\u79AA\u4FEE\u71DF \u4EE5\u552F\u8B58\u5FC3\u7406\u5B78\u70BA\u6A5F\u8F49\u3011\u5FC3\u610F\u8B58\u7684\u904B\u4F5C\u6A21\u5F0F 03",video_id:"IehR9d1L3LQ"},{title:"\u3010\u5FC3\u610F\u8B58\u8F49\u5316\u79AA\u4FEE\u71DF \u4EE5\u552F\u8B58\u5FC3\u7406\u5B78\u70BA\u6A5F\u8F49\u3011\u5FC3\u610F\u8B58\u7684\u904B\u4F5C\u6A21\u5F0F 04",video_id:"RvTm-dm3k1k"},{title:"\u3010\u5FC3\u610F\u8B58\u8F49\u5316\u79AA\u4FEE\u71DF \u4EE5\u552F\u8B58\u5FC3\u7406\u5B78\u70BA\u6A5F\u8F49\u3011\u5FC3\u610F\u8B58\u7684\u904B\u4F5C\u6A21\u5F0F 05",video_id:"paa-p7eEsyA"},{title:"\u3010\u5FC3\u610F\u8B58\u8F49\u5316\u79AA\u4FEE\u71DF \u4EE5\u552F\u8B58\u5FC3\u7406\u5B78\u70BA\u6A5F\u8F49\u3011\u5FC3\u610F\u8B58\u7684\u904B\u4F5C\u6A21\u5F0F 06",video_id:"wQHoyYS819U"},{title:"\u3010\u5FC3\u610F\u8B58\u8F49\u5316\u79AA\u4FEE\u71DF \u4EE5\u552F\u8B58\u5FC3\u7406\u5B78\u70BA\u6A5F\u8F49\u3011\u5FC3\u610F\u8B58\u7684\u904B\u4F5C\u6A21\u5F0F 07",video_id:"aT4z4bkCSow"},{title:"\u3010\u5FC3\u610F\u8B58\u8F49\u5316\u79AA\u4FEE\u71DF \u4EE5\u552F\u8B58\u5FC3\u7406\u5B78\u70BA\u6A5F\u8F49\u3011\u5FC3\u610F\u8B58\u7684\u904B\u4F5C\u6A21\u5F0F 08",video_id:"Ougo8AYk3kA"}]};course_name="";get course_list(){return this.course[this.course_name]}get name(){return this.course_name}set name(t){t.length>0?this.course_name=t:console.log("Name cannot be empty")}static \u0275fac=function(e){return new(e||i)(p(x3))};static \u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})};var V7=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||i)(g(xe),g(B))}}static{this.\u0275dir=U({type:i})}}return i})(),sv=(()=>{class i extends V7{static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Nt(i)))(s||i)}})()}static{this.\u0275dir=U({type:i,features:[r1]})}}return i})(),H7=new X("");var ov={provide:H7,useExisting:B3(()=>x7),multi:!0};function cv(){let i=q3()?q3().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var rv=new X(""),x7=(()=>{class i extends V7{constructor(e,n,s){super(e,n),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!cv())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||i)(g(xe),g(B),g(rv,8))}}static{this.\u0275dir=U({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,s){n&1&&$e("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[Pe([ov]),r1]})}}return i})();var av=new X(""),lv=new X("");function O7(i){return i!=null}function T7(i){return pi(i)?g1(i):i}function L7(i){let t={};return i.forEach(e=>{t=e!=null?j(j({},t),e):t}),Object.keys(t).length===0?null:t}function D7(i,t){return t.map(e=>e(i))}function hv(i){return!i.validate}function I7(i){return i.map(t=>hv(t)?t:e=>t.validate(e))}function uv(i){if(!i)return null;let t=i.filter(O7);return t.length==0?null:function(e){return L7(D7(e,t))}}function A7(i){return i!=null?uv(I7(i)):null}function dv(i){if(!i)return null;let t=i.filter(O7);return t.length==0?null:function(e){let n=D7(e,t).map(T7);return ci(n).pipe(He(L7))}}function k7(i){return i!=null?dv(I7(i)):null}function y7(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function fv(i){return i._rawValidators}function vv(i){return i._rawAsyncValidators}function ei(i){return i?Array.isArray(i)?i:[i]:[]}function T3(i,t){return Array.isArray(i)?i.includes(t):i===t}function b7(i,t){let e=ei(t);return ei(i).forEach(s=>{T3(e,s)||e.push(s)}),e}function w7(i,t){return ei(t).filter(e=>!T3(i,e))}var L3=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=A7(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=k7(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ti=class extends L3{get formDirective(){return null}get path(){return null}},U4=class extends L3{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ii=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},mv={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Dy=ne(j({},mv),{"[class.ng-submitted]":"isSubmitted"}),Iy=(()=>{class i extends ii{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(g(U4,2))}}static{this.\u0275dir=U({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,s){n&2&&Q("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[r1]})}}return i})();var N4="VALID",O3="INVALID",It="PENDING",F4="DISABLED",kt=class{},D3=class extends kt{constructor(t,e){super(),this.value=t,this.source=e}},P4=class extends kt{constructor(t,e){super(),this.pristine=t,this.source=e}},j4=class extends kt{constructor(t,e){super(),this.touched=t,this.source=e}},At=class extends kt{constructor(t,e){super(),this.status=t,this.source=e}};function pv(i){return(I3(i)?i.validators:i)||null}function gv(i){return Array.isArray(i)?A7(i):i||null}function _v(i,t){return(I3(t)?t.asyncValidators:i)||null}function zv(i){return Array.isArray(i)?k7(i):i||null}function I3(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}var ni=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=i2(()=>this.statusReactive()),this.statusReactive=Z4(void 0),this._pristine=i2(()=>this.pristineReactive()),this.pristineReactive=Z4(!0),this._touched=i2(()=>this.touchedReactive()),this.touchedReactive=Z4(!1),this._events=new y,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return l1(this.statusReactive)}set status(t){l1(()=>this.statusReactive.set(t))}get valid(){return this.status===N4}get invalid(){return this.status===O3}get pending(){return this.status==It}get disabled(){return this.status===F4}get enabled(){return this.status!==F4}get pristine(){return l1(this.pristineReactive)}set pristine(t){l1(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return l1(this.touchedReactive)}set touched(t){l1(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(b7(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(b7(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(w7(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(w7(t,this._rawAsyncValidators))}hasValidator(t){return T3(this._rawValidators,t)}hasAsyncValidator(t){return T3(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(ne(j({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new j4(!0,n))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),e&&t.emitEvent!==!1&&this._events.next(new j4(!1,n))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(ne(j({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new P4(!1,n))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),e&&t.emitEvent!==!1&&this._events.next(new P4(!0,n))}markAsPending(t={}){this.status=It;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new At(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(ne(j({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=F4,this.errors=null,this._forEachChild(s=>{s.disable(ne(j({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new D3(this.value,n)),this._events.next(new At(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(j({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=N4,this._forEachChild(n=>{n.enable(ne(j({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ne(j({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===N4||this.status===It)&&this._runAsyncValidator(n,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new D3(this.value,e)),this._events.next(new At(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(ne(j({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?F4:N4}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=It,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let n=T7(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,s)=>n&&n._find(s),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new At(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,n)}_initObservables(){this.valueChanges=new G,this.statusChanges=new G}_calculateStatus(){return this._allControlsDisabled()?F4:this.errors?O3:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(It)?It:this._anyControlsHaveStatus(O3)?O3:N4}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let n=!this._anyControlsDirty(),s=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),s&&this._events.next(new P4(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new j4(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){I3(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=gv(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=zv(this._rawAsyncValidators)}};var B7=new X("CallSetDisabledState",{providedIn:"root",factory:()=>si}),si="always";function yv(i,t){return[...t.path,i]}function bv(i,t,e=si){Mv(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),Cv(i,t),Sv(i,t),Ev(i,t),wv(i,t)}function M7(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function wv(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function Mv(i,t){let e=fv(i);t.validator!==null?i.setValidators(y7(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=vv(i);t.asyncValidator!==null?i.setAsyncValidators(y7(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let s=()=>i.updateValueAndValidity();M7(t._rawValidators,s),M7(t._rawAsyncValidators,s)}function Cv(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&R7(i,t)})}function Ev(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&R7(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function R7(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Sv(i,t){let e=(n,s)=>{t.valueAccessor.writeValue(n),s&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function Vv(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Hv(i){return Object.getPrototypeOf(i.constructor)===sv}function xv(i,t){if(!t)return null;Array.isArray(t);let e,n,s;return t.forEach(o=>{o.constructor===x7?e=o:Hv(o)?n=o:s=o}),s||n||e||null}function C7(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function E7(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Ov=class extends ni{constructor(t=null,e,n){super(pv(e),_v(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),I3(e)&&(e.nonNullable||e.initialValueIsDefault)&&(E7(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){C7(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){C7(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){E7(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Tv={provide:U4,useExisting:B3(()=>Lv)},S7=Promise.resolve(),Lv=(()=>{class i extends U4{constructor(e,n,s,o,c,r){super(),this._changeDetectorRef=c,this.callSetDisabledState=r,this.control=new Ov,this._registered=!1,this.name="",this.update=new G,this._parent=e,this._setValidators(n),this._setAsyncValidators(s),this.valueAccessor=xv(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Vv(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){bv(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){S7.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,s=n!==0&&L(n);S7.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?yv(e,this._parent):[e]}static{this.\u0275fac=function(n){return new(n||i)(g(ti,9),g(av,10),g(lv,10),g(H7,10),g(je,8),g(B7,8))}}static{this.\u0275dir=U({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Pe([Tv]),r1,K]})}}return i})();var Dv=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=R({})}}return i})();var ky=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:B7,useValue:e.callSetDisabledState??si}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=R({imports:[Dv]})}}return i})();export{zm as a,ym as b,bm as c,wm as d,Em as e,ds as f,Dm as g,Im as h,Am as i,km as j,vs as k,ms as l,Bm as m,Rm as n,Nm as o,Fm as p,Pm as q,Um as r,ws as s,Jm as t,pe as u,cp as v,rp as w,m2 as x,p2 as y,ka as z,g2 as A,Gs as B,rl as C,Ks as D,Te as E,Yt as F,w2 as G,Ws as H,C6 as I,A as J,Dg as K,S6 as L,Rg as M,Ng as N,eo as O,H6 as P,x6 as Q,so as R,co as S,ro as T,V_ as U,q_ as V,$_ as W,lo as X,G_ as Y,Y_ as Z,n1 as _,x3 as $,z7 as aa,H7 as ba,x7 as ca,U4 as da,Iy as ea,Lv as fa,ky as ga};
